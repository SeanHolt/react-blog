/*! For license information please see main.c5dff79a.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Vh){var r=Vh}Reflect.construct(e,[],t)}else{try{t.call()}catch(Vh){r=Vh}e.call(t.prototype)}else{try{throw Error()}catch(Vh){r=Vh}e()}}catch(Vh){if(Vh&&r&&"string"===typeof Vh.stack){for(var i=Vh.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case E:return"Portal";case T:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(rg){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function $(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ie=null,Se=null;function Te(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Ie?Se?Se.push(e):Se=[e]:Ie=e}function Ce(){if(Ie){var e=Ie,t=Se;if(Se=Ie=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ae(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return xe(e,t,n)}finally{Ne=!1,(null!==Ie||null!==Se)&&(Ae(),Ce())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(s(188))}function Ge(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,It,St,Tt,kt=!1,Ct=[],xt=null,At=null,Nt=null,Dt=new Map,Rt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Dt.forEach(jt),Rt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==At&&zt(At,e),null!==Nt&&zt(Nt,e),Dt.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Dt.set(s,Mt(Dt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Tn(){return Sn}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Dn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){ke(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function Yn(e){if(W(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Gn(t,Wn,e,_e(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},Sr={};function Tr(e){if(Ir[e])return Ir[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Ir[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Ar=Tr("transitionend"),Nr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Dr.length;Pr++){var Or=Dr[Pr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(kr,"onAnimationEnd"),Rr(Cr,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}De((function(){var r=s,i=_e(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case kr:case Cr:case xr:l=yn;break;case Ar:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Gr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Kn(a))if(Jn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(v=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Hr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=zn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=$t=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Re(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(Gr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Gr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Ii=-1;function Si(e){return{current:e}}function Ti(e){0>Ii||(e.current=Ei[Ii],Ei[Ii]=null,Ii--)}function ki(e,t){Ii++,Ei[Ii]=e.current,e.current=t}var Ci={},xi=Si(Ci),Ai=Si(!1),Ni=Ci;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ti(Ai),Ti(xi)}function Oi(e,t,n){if(xi.current!==Ci)throw Error(s(168));ki(xi,t),ki(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ni=xi.current,ki(xi,e),ki(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ai),Ti(xi),ki(xi,e)):Ti(Ai),ki(Ai,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Bi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Yi=null,Xi=1,Ji="";function $i(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Xi,Wi[Qi++]=Ji,Wi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Xi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case E:return(t=Uc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&$i(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&$i(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&$i(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,c);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&$i(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&$i(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&$i(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===I){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===I?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Oc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var bs=ws(!0),_s=ws(!1),Es=Si(null),Is=null,Ss=null,Ts=null;function ks(){Ts=Ss=Is=null}function Cs(e){var t=Es.current;Ti(Es),e._currentValue=t}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){Is=e,Ts=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(Ts!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===Is)throw Error(s(308));Ss=e,Is.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ds=null;function Rs(e){null===Ds?Ds=[e]:Ds.push(e)}function Ps(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function js(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&xl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Os(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Os(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Ks={},Gs=Si(Ks),Hs=Si(Ks),Ws=Si(Ks);function Qs(e){if(e===Ks)throw Error(s(174));return e}function Ys(e,t){switch(ki(Ws,t),ki(Hs,e),ki(Gs,Ks),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Gs),ki(Gs,t)}function Xs(){Ti(Gs),Ti(Hs),Ti(Ws)}function Js(e){Qs(Ws.current);var t=Qs(Gs.current),n=le(t,e.type);t!==n&&(ki(Hs,e),ki(Gs,n))}function $s(e){Hs.current===e&&(Ti(Gs),Ti(Hs))}var Zs=Si(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=$o,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function wo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,Ml|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function So(e,t){var n=oo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Do(9,ko.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&so)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ko(e,t,n,r){t.value=n,t.getSnapshot=r,xo(t)&&Ao(e)}function Co(e,t,n){return n((function(){xo(t)&&Ao(e)}))}function xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=Os(e,1);null!==t&&nc(t,e,1,-1)}function No(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Do(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return wo().memoizedState}function Po(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Do(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=wo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Do(t,n,s,r))}oo.flags|=e,i.memoizedState=Do(1|t,n,s,r)}function Lo(e,t){return Po(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function Uo(e,t){return Oo(4,4,e,t)}function jo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,jo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Go(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{wt=n,io.transition=r}}function Ho(){return wo().memoizedState}function Wo(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Xo(t,n);else if(null!==(n=Ps(e,t,n,r))){nc(n,e,r,ec()),Jo(n,t,r)}}function Qo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Xo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Rs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(Vh){}null!==(n=Ps(e,t,i,r))&&(nc(n,e,r,i=ec()),Jo(n,t,r))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Xo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $o={readContext:Ns,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Ns,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:No,useDebugValue:zo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=Go.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&so)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Do(9,ko.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Al.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ns,useCallback:Bo,useContext:Ns,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:qo,useReducer:_o,useRef:Ro,useState:function(){return _o(bo)},useDebugValue:zo,useDeferredValue:function(e){return Ko(wo(),ao.memoizedState,e)},useTransition:function(){return[_o(bo)[0],wo().memoizedState]},useMutableSource:Io,useSyncExternalStore:So,useId:Ho,unstable_isNewReconciler:!1},ta={readContext:Ns,useCallback:Bo,useContext:Ns,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:qo,useReducer:Eo,useRef:Ro,useState:function(){return Eo(bo)},useDebugValue:zo,useDeferredValue:function(e){var t=wo();return null===ao?t.memoizedState=e:Ko(t,ao.memoizedState,e)},useTransition:function(){return[Eo(bo)[0],wo().memoizedState]},useMutableSource:Io,useSyncExternalStore:So,useId:Ho,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=js(e,i,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ns(s):(i=Ri(t)?Ni:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ns(s):(s=Ri(t)?Ni:xi.current,i.context=Di(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Gl=r),ha(0,t)},n}function pa(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,js(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=b.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?_s(t,null,n,r):bs(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||wa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return ka(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Pl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Pl,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Pl,Rl),Rl|=r;return ba(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Ri(n)?Ni:xi.current;return s=Di(t,s),As(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||wa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ca(e,t,n,r,i){if(Ri(n)){var s=!0;Mi(t)}else s=!1;if(As(t,i),null===t.stateNode)qa(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ns(c):c=Di(t,c=Ri(n)?Ni:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ls=!1;var d=t.memoizedState;o.state=d,Bs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Ls?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ls||sa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ns(l):l=Di(t,l=Ri(n)?Ni:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,Bs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ls?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ls||sa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xa(e,t,n,r,s,i)}function xa(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ka(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Ys(e,t.containerInfo)}function Na(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Da,Ra,Pa,Oa,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Ua(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,o);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,ja(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Os(e,i),nc(r,e,i,-1))}return mc(),ja(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Qi++]=Xi,Wi[Qi++]=Ji,Wi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Pc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Pc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function za(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ba(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Ri(t.type)&&Pi(),Ha(t),null;case 3:return r=t.stateNode,Xs(),Ti(Ai),Ti(xi),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Ra(e,t),Ha(t),null;case 5:$s(t);var i=Qs(Ws.current);if(n=t.type,null!==e&&null!=t.stateNode)Pa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=Qs(Gs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":X(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Da(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ws.current),Qs(Gs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ti(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return Xs(),Ra(e,t),null===e&&Br(t.stateNode.containerInfo),Ha(t),null;case 10:return Cs(t.type._context),Ha(t),null;case 19:if(Ti(Zs),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ga(o,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ga(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bl&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ha(t),null}else 2*Je()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=Zs.current,ki(Zs,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Ti(Ai),Ti(xi),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(Ti(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(Zs),null;case 4:return Xs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Da=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Pa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Gs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,$a=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||Za(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Xa&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sc(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,dl(e,t,n),Xa=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=xc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(Vh){Sc(i,t,Vh)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Sc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":$(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Sc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Je())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||h,ml(t,e),Xa=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for($a=e,h=e.child;null!==h;){for(d=$a=h;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,$a=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Sc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(Mh){Sc(e,e.return,Mh)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){$a=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==$a;){var i=$a,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ya;var c=Xa;if(Ya=o,(Xa=l)&&!c)for($a=i;null!==$a;)l=(o=$a).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,$a=l):El(i);for(;null!==s;)$a=s,wl(s,t,n),s=s.sibling;$a=i,Ya=a,Xa=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,$a=s):bl(e)}}function bl(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&il(t)}catch(Yh){Sc(t,t.return,Yh)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function _l(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function El(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(Mh){Sc(t,n,Mh)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Mh){Sc(t,i,Mh)}}var s=t.return;try{il(t)}catch(Mh){Sc(t,s,Mh)}break;case 5:var o=t.return;try{il(t)}catch(Mh){Sc(t,o,Mh)}}}catch(Mh){Sc(t,t.return,Mh)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Il,Sl=Math.ceil,Tl=b.ReactCurrentDispatcher,kl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,xl=0,Al=null,Nl=null,Dl=0,Rl=0,Pl=Si(0),Ol=0,Ll=null,Ml=0,Fl=0,Ul=0,jl=null,Vl=null,zl=0,Bl=1/0,ql=null,Kl=!1,Gl=null,Hl=null,Wl=!1,Ql=null,Yl=0,Xl=0,Jl=null,$l=-1,Zl=0;function ec(){return 0!==(6&xl)?Je():-1!==$l?$l:$l=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&xl)&&0!==Dl?Dl&-Dl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&xl)&&e===Al||(e===Al&&(0===(2&xl)&&(Fl|=n),4===Ol&&ac(e,Dl)),rc(e,r),1===n&&0===xl&&0===(1&t.mode)&&(Bl=Je()+500,ji&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Al?Dl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),oi((function(){0===(6&xl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if($l=-1,Zl=0,0!==(6&xl))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=xl;xl|=2;var o=pc();for(Al===e&&Dl===t||(ql=null,Bl=Je()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}ks(),Tl.current=o,xl=i,null!==Nl?t=0:(Al=null,Dl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,dc(e,0),ac(e,r),rc(e,Je()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Ll,dc(e,0),ac(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,Vl,ql);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=zl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Vl,ql),t);break}_c(e,Vl,ql);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Vl,ql),r);break}_c(e,Vl,ql);break;default:throw Error(s(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ac(e,t){for(t&=~Ul,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&xl))throw Error(s(327));Ec();var t=dt(e,0);if(0===(1&t))return rc(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,dc(e,0),ac(e,t),rc(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Vl,ql),rc(e,Je()),null}function cc(e,t){var n=xl;xl|=1;try{return e(t)}finally{0===(xl=n)&&(Bl=Je()+500,ji&&Bi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&xl)&&Ec();var t=xl;xl|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(xl=t))&&Bi()}}function hc(){Rl=Pl.current,Ti(Pl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Xs(),Ti(Ai),Ti(xi),no();break;case 5:$s(r);break;case 4:Xs();break;case 13:case 19:Ti(Zs);break;case 10:Cs(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=e,Nl=e=Pc(e.current,null),Dl=Rl=t,Ol=0,Ll=null,Ul=Fl=Ml=0,Vl=jl=null,null!==Ds){for(t=0;t<Ds.length;t++)if(null!==(r=(n=Ds[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ds=null}return e}function fc(e,t){for(;;){var n=Nl;try{if(ks(),ro.current=$o,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,kl.current=null,null===n||null===n.return){Ol=1,Ll=t,Nl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Ol&&(Ol=2),null===jl?jl=[o]:jl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hl||!Hl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(Zh){t=Zh,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function pc(){var e=Tl.current;return Tl.current=$o,null===e?$o:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Al||0===(268435455&Ml)&&0===(268435455&Fl)||ac(Al,Dl)}function gc(e,t){var n=xl;xl|=2;var r=pc();for(Al===e&&Dl===t||(ql=null,dc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(ks(),xl=n,Tl.current=r,null!==Nl)throw Error(s(261));return Al=null,Dl=0,Ol}function yc(){for(;null!==Nl;)wc(Nl)}function vc(){for(;null!==Nl&&!Ye();)wc(Nl)}function wc(e){var t=Il(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Nl=t,kl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Rl)))return void(Nl=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Ol=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Ol&&(Ol=5)}function _c(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{Ec()}while(null!==Ql);if(0!==(6&xl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Nl=Al=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Ac(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=wt;wt=1;var l=xl;xl|=4,kl.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(If){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(If){Sc(t,t.return,If)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Xe(),xl=l,wt=a,Cl.transition=o}else e.current=n;if(Wl&&(Wl=!1,Ql=e,Yl=i),o=e.pendingLanes,0===o&&(Hl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Gl,Gl=null,e;0!==(1&Yl)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Bi()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function Ec(){if(null!==Ql){var e=bt(Yl),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&xl))throw Error(s(331));var i=xl;for(xl|=4,$a=e.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var h=$a;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,$a=d;else for(;null!==$a;){var f=(h=$a).sibling,p=h.return;if(sl(h),h===u){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else e:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,$a=v;break e}$a=o.return}}var w=e.current;for($a=w;null!==$a;){var b=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,$a=b;else e:for(a=w;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(Zh){Sc(l,l.return,Zh)}if(l===a){$a=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,$a=_;break e}$a=l.return}}if(xl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(Zh){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function Ic(e,t,n){e=js(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=js(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Dl&n)===n&&(4===Ol||3===Ol&&(130023424&Dl)===Dl&&500>Je()-zl?dc(e,0):Ul|=n),rc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Os(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function xc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),kc(e,n)}function Ac(e,t){return We(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Lc(n.children,i,o,t);case S:a=8,i|=8;break;case T:return(e=Dc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case A:return(e=Dc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Dc(19,n,t,i)).elementType=N,e.lanes=o,e;case P:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case D:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Dc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,o,a,l){return e=new jc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Dc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function zc(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,s,o,a,l){return(e=Vc(n,r,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=Us(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,js(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=js(i,t,o))&&(nc(e,i,o,s),Vs(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Il=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:Js(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(ki(Zs,1&Zs.current),null!==(e=Ka(e,t,n))?e.sibling:null);ki(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ba(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Ka(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Di(t,xi.current);As(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=xa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===D)return 14}return 2}(r),e=na(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Na(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Na(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ka(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Fa(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(Es,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Us(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),xs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Ns(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Ea(e,t,r,i=na(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,As(t,n),oa(t,r,i),la(t,r,i,n),xa(null,t,r,!0,e,n);case 19:return Ba(e,t,n);case 22:return Sa(e,t,n)}throw Error(s(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Kc(o);a.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Kc(o);s.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Kc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Je()),0===(6&xl)&&(Bl=Je()+500,Bi()))}break;case 13:uc((function(){var t=Os(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},Et=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},It=function(e){if(13===e.tag){var t=tc(e),n=Os(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},St=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));W(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=cc,Ae=uc;var eu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ce,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",i=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{var r=n(950);t.H=r.createRoot,r.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,I={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+x(a=e[c],c);l+=A(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=s+x(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:I};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,P(E);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,S=!1,T=null,k=-1,C=5,x=-1;function A(){return!(t.unstable_now()-x<C)}function N(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?I():(S=!1,T=null)}}else S=!1}if("function"===typeof w)I=function(){w(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=N,I=function(){R.postMessage(null)}}else I=function(){y(N,0)};function P(e){T=e,S||(S=!0,I())}function O(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(k),k=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,P(E))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)},895:(e,t,n)=>{var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,o=r.useRef,a=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!a){if(a=!0,s=e,e=r(e),void 0!==u&&d.hasValue){var t=d.value;if(u(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==u&&u(t,n)?t:(s=e,o=n)}var s,o,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,u]);var f=s(e,h[0],h[1]);return a((function(){d.hasValue=!0,d.value=f}),[f]),c(f),f}},237:(e,t,n)=>{e.exports=n(895)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".7ab4befc.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="react-blog:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/react-blog/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkreact_blog=self.webpackChunkreact_blog||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r={};n.r(r),n.d(r,{FirebaseError:()=>ji,SDK_VERSION:()=>fo,_DEFAULT_ENTRY_NAME:()=>eo,_addComponent:()=>io,_addOrOverwriteComponent:()=>so,_apps:()=>no,_clearComponents:()=>co,_components:()=>ro,_getProvider:()=>ao,_registerComponent:()=>oo,_removeServiceInstance:()=>lo,deleteApp:()=>yo,getApp:()=>mo,getApps:()=>go,initializeApp:()=>po,onLog:()=>wo,registerVersion:()=>vo,setLogLevel:()=>bo});const i=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};var s,o=n(43),a=n.t(o,2),l=n(950),c=n.t(l,2);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const h="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,r){return void 0===n&&(n=null),u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?y(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function y(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l=s.Pop,c=null,f=y();function y(){return(a.state||{idx:null}).idx}function v(){l=s.Pop;let e=y(),t=null==e?null:e-f;f=e,c&&c({action:l,location:b.location,delta:t})}function w(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,a.replaceState(u({},a.state,{idx:f}),""));let b={get action(){return l},get location(){return e(i,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(h,v),c=e,()=>{i.removeEventListener(h,v),c=null}},createHref:e=>t(i,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=s.Push;let r=m(b.location,e,t);n&&n(r,e),f=y()+1;let u=p(r,f),h=b.createHref(r);try{a.pushState(u,"",h)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;i.location.assign(h)}o&&c&&c({action:l,location:b.location,delta:1})},replace:function(e,t){l=s.Replace;let r=m(b.location,e,t);n&&n(r,e),f=y();let i=p(r,f),u=b.createHref(r);a.replaceState(i,"",u),o&&c&&c({action:l,location:b.location,delta:0})},go:e=>a.go(e)};return b}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));const b=new Set(["lazy","caseSensitive","path","id","index","children"]);function _(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r={}),e.map(((e,i)=>{let s=[...n,String(i)],o="string"===typeof e.id?e.id:s.join("-");if(d(!0!==e.index||!e.children,"Cannot specify children on an index route"),d(!r[o],'Found a route id collision on id "'+o+"\".  Route id's must be globally unique within Data Router usages"),function(e){return!0===e.index}(e)){let n=u({},e,t(e),{id:o});return r[o]=n,n}{let n=u({},e,t(e),{id:o,children:void 0});return r[o]=n,e.children&&(n.children=_(e.children,t,s,r)),n}}))}function E(e,t,n){return void 0===n&&(n="/"),I(e,t,n,!1)}function I(e,t,n,r){let i=F(("string"===typeof t?y(t):t).pathname||"/",n);if(null==i)return null;let s=S(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=M(i);o=O(s[a],e,r)}return o}function S(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(d(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=B([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),S(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:P(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of T(e.path))i(e,t,r);else i(e,t)})),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=T(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const k=/^:[\w-]+$/,C=3,x=2,A=1,N=10,D=-2,R=e=>"*"===e;function P(e,t){let n=e.split("/"),r=n.length;return n.some(R)&&(r+=D),t&&(r+=x),n.filter((e=>!R(e))).reduce(((e,t)=>e+(k.test(t)?C:""===t?A:N)),r)}function O(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:B([s,u.pathname]),pathnameBase:q(B([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=B([s,u.pathnameBase]))}return o}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function M(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return f(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function F(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function U(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function j(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function V(e,t){let n=j(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function z(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=y(e):(i=u({},e),d(!i.pathname||!i.pathname.includes("?"),U("?","pathname","search",i)),d(!i.pathname||!i.pathname.includes("#"),U("#","pathname","hash",i)),d(!i.search||!i.search.includes("#"),U("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?y(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:K(r),hash:G(i)}}(i,s),c=a&&"/"!==a&&a.endsWith("/"),h=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!h||(l.pathname+="/"),l}const B=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",G=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const H=function(e,t){void 0===t&&(t=302);let n=t;"number"===typeof n?n={status:n}:"undefined"===typeof n.status&&(n.status=302);let r=new Headers(n.headers);return r.set("Location",e),new Response(null,u({},n,{headers:r}))};class W{constructor(e,t,n,r){void 0===r&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function Q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Y=["post","put","patch","delete"],X=new Set(Y),J=["get",...Y],$=new Set(J),Z=new Set([301,302,303,307,308]),ee=new Set([307,308]),te={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ne={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},re={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,se=e=>({hasErrorBoundary:Boolean(e.hasErrorBoundary)}),oe="remix-router-transitions";function ae(e){const t=e.window?e.window:"undefined"!==typeof window?window:void 0,n="undefined"!==typeof t&&"undefined"!==typeof t.document&&"undefined"!==typeof t.document.createElement,r=!n;let i;if(d(e.routes.length>0,"You must provide a non-empty routes array to createRouter"),e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let t=e.detectErrorBoundary;i=e=>({hasErrorBoundary:t(e)})}else i=se;let o,a,l,c={},h=_(e.routes,i,void 0,c),p=e.basename||"/",g=e.unstable_dataStrategy||ye,y=e.unstable_patchRoutesOnMiss,v=u({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),b=null,S=new Set,T=null,k=null,C=null,x=null!=e.hydrationData,A=E(h,e.history.location,p),N=null;if(null==A&&!y){let t=De(404,{pathname:e.history.location.pathname}),{matches:n,route:r}=Ne(h);A=n,N={[r.id]:t}}if(A)if(A.some((e=>e.route.lazy)))a=!1;else if(A.some((e=>e.route.loader)))if(v.v7_partialHydration){let t=e.hydrationData?e.hydrationData.loaderData:null,n=e.hydrationData?e.hydrationData.errors:null,r=e=>!e.route.loader||("function"!==typeof e.route.loader||!0!==e.route.loader.hydrate)&&(t&&void 0!==t[e.route.id]||n&&void 0!==n[e.route.id]);if(n){let e=A.findIndex((e=>void 0!==n[e.route.id]));a=A.slice(0,e+1).every(r)}else a=A.every(r)}else a=null!=e.hydrationData;else a=!0;else a=!1,A=[];let D,R={historyAction:e.history.action,location:e.history.location,matches:A,initialized:a,navigation:te,restoreScrollPosition:null==e.hydrationData&&null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||N,fetchers:new Map,blockers:new Map},P=s.Pop,O=!1,L=!1,M=new Map,U=null,j=!1,V=!1,z=[],B=[],q=new Map,K=0,G=-1,H=new Map,W=new Set,Y=new Map,X=new Map,J=new Set,$=new Map,Z=new Map,ae=new Map,ue=!1;function de(e,t){void 0===t&&(t={}),R=u({},R,e);let n=[],r=[];v.v7_fetcherPersist&&R.fetchers.forEach(((e,t)=>{"idle"===e.state&&(J.has(t)?r.push(t):n.push(t))})),[...S].forEach((e=>e(R,{deletedFetchers:r,unstable_viewTransitionOpts:t.viewTransitionOpts,unstable_flushSync:!0===t.flushSync}))),v.v7_fetcherPersist&&(n.forEach((e=>R.fetchers.delete(e))),r.forEach((e=>Xe(e))))}function fe(t,n,r){var i,a;let l,{flushSync:c}=void 0===r?{}:r,d=null!=R.actionData&&null!=R.navigation.formMethod&&Ve(R.navigation.formMethod)&&"loading"===R.navigation.state&&!0!==(null==(i=t.state)?void 0:i._isRedirect);l=n.actionData?Object.keys(n.actionData).length>0?n.actionData:null:d?R.actionData:null;let f=n.loaderData?Ce(R.loaderData,n.loaderData,n.matches||[],n.errors):R.loaderData,p=R.blockers;p.size>0&&(p=new Map(p),p.forEach(((e,t)=>p.set(t,re))));let m,g=!0===O||null!=R.navigation.formMethod&&Ve(R.navigation.formMethod)&&!0!==(null==(a=t.state)?void 0:a._isRedirect);if(o&&(h=o,o=void 0),j||P===s.Pop||(P===s.Push?e.history.push(t,t.state):P===s.Replace&&e.history.replace(t,t.state)),P===s.Pop){let e=M.get(R.location.pathname);e&&e.has(t.pathname)?m={currentLocation:R.location,nextLocation:t}:M.has(t.pathname)&&(m={currentLocation:t,nextLocation:R.location})}else if(L){let e=M.get(R.location.pathname);e?e.add(t.pathname):(e=new Set([t.pathname]),M.set(R.location.pathname,e)),m={currentLocation:R.location,nextLocation:t}}de(u({},n,{actionData:l,loaderData:f,historyAction:P,location:t,initialized:!0,navigation:te,revalidation:"idle",restoreScrollPosition:lt(t,n.matches||R.matches),preventScrollReset:g,blockers:p}),{viewTransitionOpts:m,flushSync:!0===c}),P=s.Pop,O=!1,L=!1,j=!1,V=!1,z=[],B=[]}async function ge(t,n,r){D&&D.abort(),D=null,P=t,j=!0===(r&&r.startUninterruptedRevalidation),function(e,t){if(T&&C){let n=at(e,t);T[n]=C()}}(R.location,R.matches),O=!0===(r&&r.preventScrollReset),L=!0===(r&&r.enableViewTransition);let i=o||h,a=r&&r.overrideNavigation,l=E(i,n,p),c=!0===(r&&r.flushSync),d=ct(l,i,n.pathname);if(d.active&&d.matches&&(l=d.matches),!l){let{error:e,notFoundMatches:t,route:r}=it(n.pathname);return void fe(n,{matches:t,loaderData:{},errors:{[r.id]:e}},{flushSync:c})}if(R.initialized&&!V&&function(e,t){if(e.pathname!==t.pathname||e.search!==t.search)return!1;if(""===e.hash)return""!==t.hash;if(e.hash===t.hash)return!0;if(""!==t.hash)return!0;return!1}(R.location,n)&&!(r&&r.submission&&Ve(r.submission.formMethod)))return void fe(n,{matches:l},{flushSync:c});D=new AbortController;let f,m=Ee(e.history,n,D.signal,r&&r.submission);if(r&&r.pendingError)f=[Ae(l).route.id,{type:w.error,error:r.pendingError}];else if(r&&r.submission&&Ve(r.submission.formMethod)){let t=await async function(e,t,n,r,i,o){void 0===o&&(o={});Ue();let a,l=function(e,t){let n={state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text};return n}(t,n);if(de({navigation:l},{flushSync:!0===o.flushSync}),i){let n=await ut(r,t.pathname,e.signal);if("aborted"===n.type)return{shortCircuited:!0};if("error"===n.type){let{error:e,notFoundMatches:r,route:i}=st(t.pathname,n);return{matches:r,pendingActionResult:[i.id,{type:w.error,error:e}]}}if(!n.matches){let{notFoundMatches:e,error:n,route:r}=it(t.pathname);return{matches:e,pendingActionResult:[r.id,{type:w.error,error:n}]}}r=n.matches}let c=Ke(r,t);if(c.route.action||c.route.lazy){if(a=(await Te("action",e,[c],r))[0],e.signal.aborted)return{shortCircuited:!0}}else a={type:w.error,error:De(405,{method:e.method,pathname:t.pathname,routeId:c.route.id})};if(Fe(a)){let t;if(o&&null!=o.replace)t=o.replace;else{t=_e(a.response.headers.get("Location"),new URL(e.url),p)===R.location.pathname+R.location.search}return await Se(e,a,{submission:n,replace:t}),{shortCircuited:!0}}if(Le(a))throw De(400,{type:"defer-action"});if(Me(a)){let e=Ae(r,c.route.id);return!0!==(o&&o.replace)&&(P=s.Push),{matches:r,pendingActionResult:[e.route.id,a]}}return{matches:r,pendingActionResult:[c.route.id,a]}}(m,n,r.submission,l,d.active,{replace:r.replace,flushSync:c});if(t.shortCircuited)return;if(t.pendingActionResult){let[e,r]=t.pendingActionResult;if(Me(r)&&Q(r.error)&&404===r.error.status)return D=null,void fe(n,{matches:t.matches,loaderData:{},errors:{[e]:r.error}})}l=t.matches||l,f=t.pendingActionResult,a=He(n,r.submission),c=!1,d.active=!1,m=Ee(e.history,m.url,m.signal)}let{shortCircuited:g,matches:y,loaderData:b,errors:_}=await async function(t,n,r,i,s,a,l,c,d,f,m){let g=s||He(n,a),y=a||l||Ge(g),w=!j&&(!v.v7_partialHydration||!d);if(i){if(w){let e=Ie(m);de(u({navigation:g},void 0!==e?{actionData:e}:{}),{flushSync:f})}let e=await ut(r,n.pathname,t.signal);if("aborted"===e.type)return{shortCircuited:!0};if("error"===e.type){let{error:t,notFoundMatches:r,route:i}=st(n.pathname,e);return{matches:r,loaderData:{},errors:{[i.id]:t}}}if(!e.matches){let{error:e,notFoundMatches:t,route:r}=it(n.pathname);return{matches:t,loaderData:{},errors:{[r.id]:e}}}r=e.matches}let b=o||h,[_,E]=he(e.history,R,r,y,n,v.v7_partialHydration&&!0===d,v.unstable_skipActionErrorRevalidation,V,z,B,J,Y,W,b,p,m);if(ot((e=>!(r&&r.some((t=>t.route.id===e)))||_&&_.some((t=>t.route.id===e)))),G=++K,0===_.length&&0===E.length){let e=Ze();return fe(n,u({matches:r,loaderData:{},errors:m&&Me(m[1])?{[m[0]]:m[1].error}:null},xe(m),e?{fetchers:new Map(R.fetchers)}:{}),{flushSync:f}),{shortCircuited:!0}}if(w){let e={};if(!i){e.navigation=g;let t=Ie(m);void 0!==t&&(e.actionData=t)}E.length>0&&(e.fetchers=function(e){return e.forEach((e=>{let t=R.fetchers.get(e.key),n=We(void 0,t?t.data:void 0);R.fetchers.set(e.key,n)})),new Map(R.fetchers)}(E)),de(e,{flushSync:f})}E.forEach((e=>{q.has(e.key)&&Je(e.key),e.controller&&q.set(e.key,e.controller)}));let I=()=>E.forEach((e=>Je(e.key)));D&&D.signal.addEventListener("abort",I);let{loaderResults:S,fetcherResults:T}=await Pe(R.matches,r,_,E,t);if(t.signal.aborted)return{shortCircuited:!0};D&&D.signal.removeEventListener("abort",I);E.forEach((e=>q.delete(e.key)));let k=Re([...S,...T]);if(k){if(k.idx>=_.length){let e=E[k.idx-_.length].key;W.add(e)}return await Se(t,k.result,{replace:c}),{shortCircuited:!0}}let{loaderData:C,errors:x}=ke(R,r,_,S,m,E,T,$);$.forEach(((e,t)=>{e.subscribe((n=>{(n||e.done)&&$.delete(t)}))})),v.v7_partialHydration&&d&&R.errors&&Object.entries(R.errors).filter((e=>{let[t]=e;return!_.some((e=>e.route.id===t))})).forEach((e=>{let[t,n]=e;x=Object.assign(x||{},{[t]:n})}));let A=Ze(),N=et(G),P=A||N||E.length>0;return u({matches:r,loaderData:C,errors:x},P?{fetchers:new Map(R.fetchers)}:{})}(m,n,l,d.active,a,r&&r.submission,r&&r.fetcherSubmission,r&&r.replace,r&&!0===r.initialHydration,c,f);g||(D=null,fe(n,u({matches:y||l},xe(f),{loaderData:b,errors:_})))}function Ie(e){return e&&!Me(e[1])?{[e[0]]:e[1].data}:R.actionData?0===Object.keys(R.actionData).length?null:R.actionData:void 0}async function Se(r,i,o){let{submission:a,fetcherSubmission:l,replace:c}=void 0===o?{}:o;i.response.headers.has("X-Remix-Revalidate")&&(V=!0);let h=i.response.headers.get("Location");d(h,"Expected a Location header on the redirect Response"),h=_e(h,new URL(r.url),p);let f=m(R.location,h,{_isRedirect:!0});if(n){let n=!1;if(i.response.headers.has("X-Remix-Reload-Document"))n=!0;else if(ie.test(h)){const r=e.history.createURL(h);n=r.origin!==t.location.origin||null==F(r.pathname,p)}if(n)return void(c?t.location.replace(h):t.location.assign(h))}D=null;let g=!0===c?s.Replace:s.Push,{formMethod:y,formAction:v,formEncType:w}=R.navigation;!a&&!l&&y&&v&&w&&(a=Ge(R.navigation));let b=a||l;if(ee.has(i.response.status)&&b&&Ve(b.formMethod))await ge(g,f,{submission:u({},b,{formAction:h}),preventScrollReset:O});else{let e=He(f,a);await ge(g,f,{overrideNavigation:e,fetcherSubmission:l,preventScrollReset:O})}}async function Te(e,t,n,r){try{let s=await ve(g,e,t,n,r,c,i);return await Promise.all(s.map(((e,i)=>{if(Oe(e)){let s=e.result;return{type:w.redirect,response:be(s,t,n[i].route.id,r,p,v.v7_relativeSplatPath)}}return we(e)})))}catch(s){return n.map((()=>({type:w.error,error:s})))}}async function Pe(t,n,r,i,s){let[o,...a]=await Promise.all([r.length?Te("loader",s,r,n):[],...i.map((t=>{if(t.matches&&t.match&&t.controller){return Te("loader",Ee(e.history,t.path,t.controller.signal),[t.match],t.matches).then((e=>e[0]))}return Promise.resolve({type:w.error,error:De(404,{pathname:t.path})})}))]);return await Promise.all([ze(t,r,o,o.map((()=>s.signal)),!1,R.loaderData),ze(t,i.map((e=>e.match)),a,i.map((e=>e.controller?e.controller.signal:null)),!0)]),{loaderResults:o,fetcherResults:a}}function Ue(){V=!0,z.push(...ot()),Y.forEach(((e,t)=>{q.has(t)&&(B.push(t),Je(t))}))}function je(e,t,n){void 0===n&&(n={}),R.fetchers.set(e,t),de({fetchers:new Map(R.fetchers)},{flushSync:!0===(n&&n.flushSync)})}function qe(e,t,n,r){void 0===r&&(r={});let i=Ae(R.matches,t);Xe(e),de({errors:{[i.route.id]:n},fetchers:new Map(R.fetchers)},{flushSync:!0===(r&&r.flushSync)})}function Ye(e){return v.v7_fetcherPersist&&(X.set(e,(X.get(e)||0)+1),J.has(e)&&J.delete(e)),R.fetchers.get(e)||ne}function Xe(e){let t=R.fetchers.get(e);!q.has(e)||t&&"loading"===t.state&&H.has(e)||Je(e),Y.delete(e),H.delete(e),W.delete(e),J.delete(e),R.fetchers.delete(e)}function Je(e){let t=q.get(e);d(t,"Expected fetch controller: "+e),t.abort(),q.delete(e)}function $e(e){for(let t of e){let e=Qe(Ye(t).data);R.fetchers.set(t,e)}}function Ze(){let e=[],t=!1;for(let n of W){let r=R.fetchers.get(n);d(r,"Expected fetcher: "+n),"loading"===r.state&&(W.delete(n),e.push(n),t=!0)}return $e(e),t}function et(e){let t=[];for(let[n,r]of H)if(r<e){let e=R.fetchers.get(n);d(e,"Expected fetcher: "+n),"loading"===e.state&&(Je(n),H.delete(n),t.push(n))}return $e(t),t.length>0}function tt(e){R.blockers.delete(e),Z.delete(e)}function nt(e,t){let n=R.blockers.get(e)||re;d("unblocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"blocked"===t.state||"blocked"===n.state&&"proceeding"===t.state||"blocked"===n.state&&"unblocked"===t.state||"proceeding"===n.state&&"unblocked"===t.state,"Invalid blocker state transition: "+n.state+" -> "+t.state);let r=new Map(R.blockers);r.set(e,t),de({blockers:r})}function rt(e){let{currentLocation:t,nextLocation:n,historyAction:r}=e;if(0===Z.size)return;Z.size>1&&f(!1,"A router only supports one blocker at a time");let i=Array.from(Z.entries()),[s,o]=i[i.length-1],a=R.blockers.get(s);return a&&"proceeding"===a.state?void 0:o({currentLocation:t,nextLocation:n,historyAction:r})?s:void 0}function it(e){let t=De(404,{pathname:e}),n=o||h,{matches:r,route:i}=Ne(n);return ot(),{notFoundMatches:r,route:i,error:t}}function st(e,t){let n=t.partialMatches,r=n[n.length-1].route;return{notFoundMatches:n,route:r,error:De(400,{type:"route-discovery",routeId:r.id,pathname:e,message:null!=t.error&&"message"in t.error?t.error:String(t.error)})}}function ot(e){let t=[];return $.forEach(((n,r)=>{e&&!e(r)||(n.cancel(),t.push(r),$.delete(r))})),t}function at(e,t){if(k){return k(e,t.map((e=>function(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}(e,R.loaderData))))||e.key}return e.key}function lt(e,t){if(T){let n=at(e,t),r=T[n];if("number"===typeof r)return r}return null}function ct(e,t,n){if(y){if(!e){return{active:!0,matches:I(t,n,p,!0)||[]}}if("*"===e[e.length-1].route.path){return{active:!0,matches:I(t,n,p,!0)}}}return{active:!1,matches:null}}async function ut(e,t,n){let r=e,s=r.length>0?r[r.length-1].route:null;for(;;){try{await pe(y,t,r,h||o,c,i,ae,n)}catch(a){return{type:"error",error:a,partialMatches:r}}if(n.aborted)return{type:"aborted"};let e=o||h,l=E(e,t,p),u=!1;if(l){let e=l[l.length-1].route;if(e.index)return{type:"success",matches:l};if(e.path&&e.path.length>0){if("*"!==e.path)return{type:"success",matches:l};u=!0}}let d=I(e,t,p,!0);if(!d||r.map((e=>e.route.id)).join("-")===d.map((e=>e.route.id)).join("-"))return{type:"success",matches:u?l:null};if(r=d,s=r[r.length-1].route,"*"===s.path)return{type:"success",matches:r}}}return l={get basename(){return p},get future(){return v},get state(){return R},get routes(){return h},get window(){return t},initialize:function(){if(b=e.history.listen((t=>{let{action:n,location:r,delta:i}=t;if(ue)return void(ue=!1);f(0===Z.size||null!=i,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let s=rt({currentLocation:R.location,nextLocation:r,historyAction:n});return s&&null!=i?(ue=!0,e.history.go(-1*i),void nt(s,{state:"blocked",location:r,proceed(){nt(s,{state:"proceeding",proceed:void 0,reset:void 0,location:r}),e.history.go(i)},reset(){let e=new Map(R.blockers);e.set(s,re),de({blockers:e})}})):ge(n,r)})),n){!function(e,t){try{let n=e.sessionStorage.getItem(oe);if(n){let e=JSON.parse(n);for(let[n,r]of Object.entries(e||{}))r&&Array.isArray(r)&&t.set(n,new Set(r||[]))}}catch(n){}}(t,M);let e=()=>function(e,t){if(t.size>0){let r={};for(let[e,n]of t)r[e]=[...n];try{e.sessionStorage.setItem(oe,JSON.stringify(r))}catch(n){f(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}(t,M);t.addEventListener("pagehide",e),U=()=>t.removeEventListener("pagehide",e)}return R.initialized||ge(s.Pop,R.location,{initialHydration:!0}),l},subscribe:function(e){return S.add(e),()=>S.delete(e)},enableScrollRestoration:function(e,t,n){if(T=e,C=t,k=n||null,!x&&R.navigation===te){x=!0;let e=lt(R.location,R.matches);null!=e&&de({restoreScrollPosition:e})}return()=>{T=null,C=null,k=null}},navigate:async function t(n,r){if("number"===typeof n)return void e.history.go(n);let i=le(R.location,R.matches,p,v.v7_prependBasename,n,v.v7_relativeSplatPath,null==r?void 0:r.fromRouteId,null==r?void 0:r.relative),{path:o,submission:a,error:l}=ce(v.v7_normalizeFormMethod,!1,i,r),c=R.location,h=m(R.location,o,r&&r.state);h=u({},h,e.history.encodeLocation(h));let d=r&&null!=r.replace?r.replace:void 0,f=s.Push;!0===d?f=s.Replace:!1===d||null!=a&&Ve(a.formMethod)&&a.formAction===R.location.pathname+R.location.search&&(f=s.Replace);let g=r&&"preventScrollReset"in r?!0===r.preventScrollReset:void 0,y=!0===(r&&r.unstable_flushSync),w=rt({currentLocation:c,nextLocation:h,historyAction:f});if(!w)return await ge(f,h,{submission:a,pendingError:l,preventScrollReset:g,replace:r&&r.replace,enableViewTransition:r&&r.unstable_viewTransition,flushSync:y});nt(w,{state:"blocked",location:h,proceed(){nt(w,{state:"proceeding",proceed:void 0,reset:void 0,location:h}),t(n,r)},reset(){let e=new Map(R.blockers);e.set(w,re),de({blockers:e})}})},fetch:function(t,n,i,s){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");q.has(t)&&Je(t);let a=!0===(s&&s.unstable_flushSync),l=o||h,c=le(R.location,R.matches,p,v.v7_prependBasename,i,v.v7_relativeSplatPath,n,null==s?void 0:s.relative),u=E(l,c,p),f=ct(u,l,c);if(f.active&&f.matches&&(u=f.matches),!u)return void qe(t,n,De(404,{pathname:c}),{flushSync:a});let{path:m,submission:g,error:y}=ce(v.v7_normalizeFormMethod,!0,c,s);if(y)return void qe(t,n,y,{flushSync:a});let w=Ke(u,m);O=!0===(s&&s.preventScrollReset),g&&Ve(g.formMethod)?async function(t,n,r,i,s,a,l,c){function u(e){if(!e.route.action&&!e.route.lazy){let e=De(405,{method:c.formMethod,pathname:r,routeId:n});return qe(t,n,e,{flushSync:l}),!0}return!1}if(Ue(),Y.delete(t),!a&&u(i))return;let f=R.fetchers.get(t);je(t,function(e,t){let n={state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0};return n}(c,f),{flushSync:l});let m=new AbortController,g=Ee(e.history,r,m.signal,c);if(a){let e=await ut(s,r,g.signal);if("aborted"===e.type)return;if("error"===e.type){let{error:i}=st(r,e);return void qe(t,n,i,{flushSync:l})}if(!e.matches)return void qe(t,n,De(404,{pathname:r}),{flushSync:l});if(u(i=Ke(s=e.matches,r)))return}q.set(t,m);let y=K,w=await Te("action",g,[i],s),b=w[0];if(g.signal.aborted)return void(q.get(t)===m&&q.delete(t));if(v.v7_fetcherPersist&&J.has(t)){if(Fe(b)||Me(b))return void je(t,Qe(void 0))}else{if(Fe(b))return q.delete(t),G>y?void je(t,Qe(void 0)):(W.add(t),je(t,We(c)),Se(g,b,{fetcherSubmission:c}));if(Me(b))return void qe(t,n,b.error)}if(Le(b))throw De(400,{type:"defer-action"});let _=R.navigation.location||R.location,I=Ee(e.history,_,m.signal),S=o||h,T="idle"!==R.navigation.state?E(S,R.navigation.location,p):R.matches;d(T,"Didn't find any matches after fetcher action");let k=++K;H.set(t,k);let C=We(c,b.data);R.fetchers.set(t,C);let[x,A]=he(e.history,R,T,c,_,!1,v.unstable_skipActionErrorRevalidation,V,z,B,J,Y,W,S,p,[i.route.id,b]);A.filter((e=>e.key!==t)).forEach((e=>{let t=e.key,n=R.fetchers.get(t),r=We(void 0,n?n.data:void 0);R.fetchers.set(t,r),q.has(t)&&Je(t),e.controller&&q.set(t,e.controller)})),de({fetchers:new Map(R.fetchers)});let N=()=>A.forEach((e=>Je(e.key)));m.signal.addEventListener("abort",N);let{loaderResults:O,fetcherResults:L}=await Pe(R.matches,T,x,A,I);if(m.signal.aborted)return;m.signal.removeEventListener("abort",N),H.delete(t),q.delete(t),A.forEach((e=>q.delete(e.key)));let M=Re([...O,...L]);if(M){if(M.idx>=x.length){let e=A[M.idx-x.length].key;W.add(e)}return Se(I,M.result)}let{loaderData:F,errors:U}=ke(R,R.matches,x,O,void 0,A,L,$);if(R.fetchers.has(t)){let e=Qe(b.data);R.fetchers.set(t,e)}et(k),"loading"===R.navigation.state&&k>G?(d(P,"Expected pending action"),D&&D.abort(),fe(R.navigation.location,{matches:T,loaderData:F,errors:U,fetchers:new Map(R.fetchers)})):(de({errors:U,loaderData:Ce(R.loaderData,F,T,U),fetchers:new Map(R.fetchers)}),V=!1)}(t,n,m,w,u,f.active,a,g):(Y.set(t,{routeId:n,path:m}),async function(t,n,r,i,s,o,a,l){let c=R.fetchers.get(t);je(t,We(l,c?c.data:void 0),{flushSync:a});let u=new AbortController,h=Ee(e.history,r,u.signal);if(o){let e=await ut(s,r,h.signal);if("aborted"===e.type)return;if("error"===e.type){let{error:i}=st(r,e);return void qe(t,n,i,{flushSync:a})}if(!e.matches)return void qe(t,n,De(404,{pathname:r}),{flushSync:a});i=Ke(s=e.matches,r)}q.set(t,u);let f=K,p=await Te("loader",h,[i],s),m=p[0];Le(m)&&(m=await Be(m,h.signal,!0)||m);q.get(t)===u&&q.delete(t);if(h.signal.aborted)return;if(J.has(t))return void je(t,Qe(void 0));if(Fe(m))return G>f?void je(t,Qe(void 0)):(W.add(t),void await Se(h,m));if(Me(m))return void qe(t,n,m.error);d(!Le(m),"Unhandled fetcher deferred data"),je(t,Qe(m.data))}(t,n,m,w,u,f.active,a,g))},revalidate:function(){Ue(),de({revalidation:"loading"}),"submitting"!==R.navigation.state&&("idle"!==R.navigation.state?ge(P||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation}):ge(R.historyAction,R.location,{startUninterruptedRevalidation:!0}))},createHref:t=>e.history.createHref(t),encodeLocation:t=>e.history.encodeLocation(t),getFetcher:Ye,deleteFetcher:function(e){if(v.v7_fetcherPersist){let t=(X.get(e)||0)-1;t<=0?(X.delete(e),J.add(e)):X.set(e,t)}else Xe(e);de({fetchers:new Map(R.fetchers)})},dispose:function(){b&&b(),U&&U(),S.clear(),D&&D.abort(),R.fetchers.forEach(((e,t)=>Xe(t))),R.blockers.forEach(((e,t)=>tt(t)))},getBlocker:function(e,t){let n=R.blockers.get(e)||re;return Z.get(e)!==t&&Z.set(e,t),n},deleteBlocker:tt,patchRoutes:(e,t)=>me(e,t,h||o,c,i),_internalFetchControllers:q,_internalActiveDeferreds:$,_internalSetRoutes:function(e){c={},o=_(e,i,void 0,c)}},l}Symbol("deferred");function le(e,t,n,r,i,s,o,a){let l,c;if(o){l=[];for(let e of t)if(l.push(e),e.route.id===o){c=e;break}}else l=t,c=t[t.length-1];let u=z(i||".",V(l,s),F(e.pathname,n)||e.pathname,"path"===a);return null==i&&(u.search=e.search,u.hash=e.hash),null!=i&&""!==i&&"."!==i||!c||!c.route.index||qe(u.search)||(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&"/"!==n&&(u.pathname="/"===u.pathname?n:B([n,u.pathname])),g(u)}function ce(e,t,n,r){if(!r||!function(e){return null!=e&&("formData"in e&&null!=e.formData||"body"in e&&void 0!==e.body)}(r))return{path:n};if(r.formMethod&&!je(r.formMethod))return{path:n,error:De(405,{method:r.formMethod})};let i,s,o=()=>({path:n,error:De(400,{type:"invalid-body"})}),a=r.formMethod||"get",l=e?a.toUpperCase():a.toLowerCase(),c=Pe(n);if(void 0!==r.body){if("text/plain"===r.formEncType){if(!Ve(l))return o();let e="string"===typeof r.body?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce(((e,t)=>{let[n,r]=t;return""+e+n+"="+r+"\n"}),""):String(r.body);return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:void 0,text:e}}}if("application/json"===r.formEncType){if(!Ve(l))return o();try{let e="string"===typeof r.body?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:l,formAction:c,formEncType:r.formEncType,formData:void 0,json:e,text:void 0}}}catch(f){return o()}}}if(d("function"===typeof FormData,"FormData is not available in this environment"),r.formData)i=Ie(r.formData),s=r.formData;else if(r.body instanceof FormData)i=Ie(r.body),s=r.body;else if(r.body instanceof URLSearchParams)i=r.body,s=Se(i);else if(null==r.body)i=new URLSearchParams,s=new FormData;else try{i=new URLSearchParams(r.body),s=Se(i)}catch(f){return o()}let u={formMethod:l,formAction:c,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:s,json:void 0,text:void 0};if(Ve(u.formMethod))return{path:n,submission:u};let h=y(n);return t&&h.search&&qe(h.search)&&i.append("index",""),h.search="?"+i,{path:g(h),submission:u}}function ue(e,t){let n=e;if(t){let r=e.findIndex((e=>e.route.id===t));r>=0&&(n=e.slice(0,r))}return n}function he(e,t,n,r,i,s,o,a,l,c,h,d,f,p,m,g){let y=g?Me(g[1])?g[1].error:g[1].data:void 0,v=e.createURL(t.location),w=e.createURL(i),b=g&&Me(g[1])?g[0]:void 0,_=b?ue(n,b):n,I=g?g[1].statusCode:void 0,S=o&&I&&I>=400,T=_.filter(((e,n)=>{let{route:i}=e;if(i.lazy)return!0;if(null==i.loader)return!1;if(s)return!("function"===typeof i.loader&&!i.loader.hydrate)||void 0===t.loaderData[i.id]&&(!t.errors||void 0===t.errors[i.id]);if(function(e,t,n){let r=!t||n.route.id!==t.route.id,i=void 0===e[n.route.id];return r||i}(t.loaderData,t.matches[n],e)||l.some((t=>t===e.route.id)))return!0;let o=t.matches[n],c=e;return fe(e,u({currentUrl:v,currentParams:o.params,nextUrl:w,nextParams:c.params},r,{actionResult:y,unstable_actionStatus:I,defaultShouldRevalidate:!S&&(a||v.pathname+v.search===w.pathname+w.search||v.search!==w.search||de(o,c))}))})),k=[];return d.forEach(((e,i)=>{if(s||!n.some((t=>t.route.id===e.routeId))||h.has(i))return;let o=E(p,e.path,m);if(!o)return void k.push({key:i,routeId:e.routeId,path:e.path,matches:null,match:null,controller:null});let l=t.fetchers.get(i),d=Ke(o,e.path),g=!1;g=!f.has(i)&&(!!c.includes(i)||(l&&"idle"!==l.state&&void 0===l.data?a:fe(d,u({currentUrl:v,currentParams:t.matches[t.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:y,unstable_actionStatus:I,defaultShouldRevalidate:!S&&a})))),g&&k.push({key:i,routeId:e.routeId,path:e.path,matches:o,match:d,controller:new AbortController})})),[T,k]}function de(e,t){let n=e.route.path;return e.pathname!==t.pathname||null!=n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function fe(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if("boolean"===typeof n)return n}return t.defaultShouldRevalidate}async function pe(e,t,n,r,i,s,o,a){let l=[t,...n.map((e=>e.route.id))].join("-");try{let u=o.get(l);u||(u=e({path:t,matches:n,patch:(e,t)=>{a.aborted||me(e,t,r,i,s)}}),o.set(l,u)),u&&("object"===typeof(c=u)&&null!=c&&"then"in c)&&await u}finally{o.delete(l)}var c}function me(e,t,n,r,i){if(e){var s;let n=r[e];d(n,"No route found to patch children into: routeId = "+e);let o=_(t,i,[e,"patch",String((null==(s=n.children)?void 0:s.length)||"0")],r);n.children?n.children.push(...o):n.children=o}else{let e=_(t,i,["patch",String(n.length||"0")],r);n.push(...e)}}async function ge(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];d(i,"No route found in manifest");let s={};for(let o in r){let e=void 0!==i[o]&&"hasErrorBoundary"!==o;f(!e,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. The lazy route property "'+o+'" will be ignored.'),e||b.has(o)||(s[o]=r[o])}Object.assign(i,s),Object.assign(i,u({},t(i),{lazy:void 0}))}function ye(e){return Promise.all(e.matches.map((e=>e.resolve())))}async function ve(e,t,n,r,i,s,o,a){let l=r.reduce(((e,t)=>e.add(t.route.id)),new Set),c=new Set,h=await e({matches:i.map((e=>{let r=l.has(e.route.id);return u({},e,{shouldLoad:r,resolve:i=>(c.add(e.route.id),r?async function(e,t,n,r,i,s,o){let a,l,c=r=>{let i,a=new Promise(((e,t)=>i=t));l=()=>i(),t.signal.addEventListener("abort",l);let c,u=i=>"function"!==typeof r?Promise.reject(new Error('You cannot call the handler for a route which defines a boolean "'+e+'" [routeId: '+n.route.id+"]")):r({request:t,params:n.params,context:o},...void 0!==i?[i]:[]);return c=s?s((e=>u(e))):(async()=>{try{return{type:"data",result:await u()}}catch(e){return{type:"error",result:e}}})(),Promise.race([c,a])};try{let s=n.route[e];if(n.route.lazy)if(s){let e,[t]=await Promise.all([c(s).catch((t=>{e=t})),ge(n.route,i,r)]);if(void 0!==e)throw e;a=t}else{if(await ge(n.route,i,r),s=n.route[e],!s){if("action"===e){let e=new URL(t.url),r=e.pathname+e.search;throw De(405,{method:t.method,pathname:r,routeId:n.route.id})}return{type:w.data,result:void 0}}a=await c(s)}else{if(!s){let e=new URL(t.url);throw De(404,{pathname:e.pathname+e.search})}a=await c(s)}d(void 0!==a.result,"You defined "+("action"===e?"an action":"a loader")+' for route "'+n.route.id+"\" but didn't return anything from your `"+e+"` function. Please return a value or `null`.")}catch(u){return{type:w.error,result:u}}finally{l&&t.signal.removeEventListener("abort",l)}return a}(t,n,e,s,o,i,a):Promise.resolve({type:w.data,result:void 0}))})})),request:n,params:i[0].params,context:a});return i.forEach((e=>d(c.has(e.route.id),'`match.resolve()` was not called for route id "'+e.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.'))),h.filter(((e,t)=>l.has(i[t].route.id)))}async function we(e){let{result:t,type:n,status:r}=e;if(Ue(t)){let e;try{let n=t.headers.get("Content-Type");e=n&&/\bapplication\/json\b/.test(n)?null==t.body?null:await t.json():await t.text()}catch(o){return{type:w.error,error:o}}return n===w.error?{type:w.error,error:new W(t.status,t.statusText,e),statusCode:t.status,headers:t.headers}:{type:w.data,data:e,statusCode:t.status,headers:t.headers}}return n===w.error?{type:w.error,error:t,statusCode:Q(t)?t.status:r}:function(e){let t=e;return t&&"object"===typeof t&&"object"===typeof t.data&&"function"===typeof t.subscribe&&"function"===typeof t.cancel&&"function"===typeof t.resolveData}(t)?{type:w.deferred,deferredData:t,statusCode:null==(i=t.init)?void 0:i.status,headers:(null==(s=t.init)?void 0:s.headers)&&new Headers(t.init.headers)}:{type:w.data,data:t,statusCode:r};var i,s}function be(e,t,n,r,i,s){let o=e.headers.get("Location");if(d(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!ie.test(o)){let a=r.slice(0,r.findIndex((e=>e.route.id===n))+1);o=le(new URL(t.url),a,i,!0,o,s),e.headers.set("Location",o)}return e}function _e(e,t,n){if(ie.test(e)){let r=e,i=r.startsWith("//")?new URL(t.protocol+r):new URL(r),s=null!=F(i.pathname,n);if(i.origin===t.origin&&s)return i.pathname+i.search+i.hash}return e}function Ee(e,t,n,r){let i=e.createURL(Pe(t)).toString(),s={signal:n};if(r&&Ve(r.formMethod)){let{formMethod:e,formEncType:t}=r;s.method=e.toUpperCase(),"application/json"===t?(s.headers=new Headers({"Content-Type":t}),s.body=JSON.stringify(r.json)):"text/plain"===t?s.body=r.text:"application/x-www-form-urlencoded"===t&&r.formData?s.body=Ie(r.formData):s.body=r.formData}return new Request(i,s)}function Ie(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,"string"===typeof r?r:r.name);return t}function Se(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function Te(e,t,n,r,i,s){let o,a={},l=null,c=!1,u={},h=r&&Me(r[1])?r[1].error:void 0;return n.forEach(((n,r)=>{let f=t[r].route.id;if(d(!Fe(n),"Cannot handle redirect results in processLoaderData"),Me(n)){let t=n.error;if(void 0!==h&&(t=h,h=void 0),l=l||{},s)l[f]=t;else{let n=Ae(e,f);null==l[n.route.id]&&(l[n.route.id]=t)}a[f]=void 0,c||(c=!0,o=Q(n.error)?n.error.status:500),n.headers&&(u[f]=n.headers)}else Le(n)?(i.set(f,n.deferredData),a[f]=n.deferredData.data,null==n.statusCode||200===n.statusCode||c||(o=n.statusCode),n.headers&&(u[f]=n.headers)):(a[f]=n.data,n.statusCode&&200!==n.statusCode&&!c&&(o=n.statusCode),n.headers&&(u[f]=n.headers))})),void 0!==h&&r&&(l={[r[0]]:h},a[r[0]]=void 0),{loaderData:a,errors:l,statusCode:o||200,loaderHeaders:u}}function ke(e,t,n,r,i,s,o,a){let{loaderData:l,errors:c}=Te(t,n,r,i,a,!1);for(let h=0;h<s.length;h++){let{key:t,match:n,controller:r}=s[h];d(void 0!==o&&void 0!==o[h],"Did not find corresponding fetcher result");let i=o[h];if(!r||!r.signal.aborted)if(Me(i)){let r=Ae(e.matches,null==n?void 0:n.route.id);c&&c[r.route.id]||(c=u({},c,{[r.route.id]:i.error})),e.fetchers.delete(t)}else if(Fe(i))d(!1,"Unhandled fetcher revalidation redirect");else if(Le(i))d(!1,"Unhandled fetcher deferred data");else{let n=Qe(i.data);e.fetchers.set(t,n)}}return{loaderData:l,errors:c}}function Ce(e,t,n,r){let i=u({},t);for(let s of n){let n=s.route.id;if(t.hasOwnProperty(n)?void 0!==t[n]&&(i[n]=t[n]):void 0!==e[n]&&s.route.loader&&(i[n]=e[n]),r&&r.hasOwnProperty(n))break}return i}function xe(e){return e?Me(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Ae(e,t){return(t?e.slice(0,e.findIndex((e=>e.route.id===t))+1):[...e]).reverse().find((e=>!0===e.route.hasErrorBoundary))||e[0]}function Ne(e){let t=1===e.length?e[0]:e.find((e=>e.index||!e.path||"/"===e.path))||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function De(e,t){let{pathname:n,routeId:r,method:i,type:s,message:o}=void 0===t?{}:t,a="Unknown Server Error",l="Unknown @remix-run/router error";return 400===e?(a="Bad Request","route-discovery"===s?l='Unable to match URL "'+n+'" - the `children()` function for route `'+r+"` threw the following error:\n"+o:i&&n&&r?l="You made a "+i+' request to "'+n+'" but did not provide a `loader` for route "'+r+'", so there is no way to handle the request.':"defer-action"===s?l="defer() is not supported in actions":"invalid-body"===s&&(l="Unable to encode submission body")):403===e?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):404===e?(a="Not Found",l='No route matches URL "'+n+'"'):405===e&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but did not provide an `action` for route "'+r+'", so there is no way to handle the request.':i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new W(e||500,a,new Error(l),!0)}function Re(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(Fe(n))return{result:n,idx:t}}}function Pe(e){return g(u({},"string"===typeof e?y(e):e,{hash:""}))}function Oe(e){return Ue(e.result)&&Z.has(e.result.status)}function Le(e){return e.type===w.deferred}function Me(e){return e.type===w.error}function Fe(e){return(e&&e.type)===w.redirect}function Ue(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"object"===typeof e.headers&&"undefined"!==typeof e.body}function je(e){return $.has(e.toLowerCase())}function Ve(e){return X.has(e.toLowerCase())}async function ze(e,t,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=t[o];if(!l)continue;let c=e.find((e=>e.route.id===l.route.id)),u=null!=c&&!de(c,l)&&void 0!==(s&&s[l.route.id]);if(Le(a)&&(i||u)){let e=r[o];d(e,"Expected an AbortSignal for revalidating fetcher deferred result"),await Be(a,e,i).then((e=>{e&&(n[o]=e||n[o])}))}}}async function Be(e,t,n){if(void 0===n&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:w.data,data:e.deferredData.unwrappedData}}catch(r){return{type:w.error,error:r}}return{type:w.data,data:e.deferredData.data}}}function qe(e){return new URLSearchParams(e).getAll("index").some((e=>""===e))}function Ke(e,t){let n="string"===typeof t?y(t).search:t.search;if(e[e.length-1].route.index&&qe(n||""))return e[e.length-1];let r=j(e);return r[r.length-1]}function Ge(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:s,json:o}=e;if(t&&n&&r)return null!=i?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i}:null!=s?{formMethod:t,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0}:void 0!==o?{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}:void 0}function He(e,t){if(t){return{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}return{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function We(e,t){if(e){return{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}}return{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Qe(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ye.apply(this,arguments)}const Xe=o.createContext(null);const Je=o.createContext(null);const $e=o.createContext(null);const Ze=o.createContext(null);const et=o.createContext({outlet:null,matches:[],isDataRoute:!1});const tt=o.createContext(null);function nt(){return null!=o.useContext(Ze)}function rt(){return nt()||d(!1),o.useContext(Ze).location}function it(e){o.useContext($e).static||o.useLayoutEffect(e)}function st(){let{isDataRoute:e}=o.useContext(et);return e?function(){let{router:e}=yt(mt.UseNavigateStable),t=wt(gt.UseNavigateStable),n=o.useRef(!1);it((()=>{n.current=!0}));let r=o.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Ye({fromRouteId:t},i)))}),[e,t]);return r}():function(){nt()||d(!1);let e=o.useContext(Xe),{basename:t,future:n,navigator:r}=o.useContext($e),{matches:i}=o.useContext(et),{pathname:s}=rt(),a=JSON.stringify(V(i,n.v7_relativeSplatPath)),l=o.useRef(!1);it((()=>{l.current=!0}));let c=o.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let o=z(n,JSON.parse(a),s,"path"===i.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:B([t,o.pathname])),(i.replace?r.replace:r.push)(o,i.state,i)}),[t,r,a,s,e]);return c}()}const ot=o.createContext(null);function at(){let{matches:e}=o.useContext(et),t=e[e.length-1];return t?t.params:{}}function lt(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=o.useContext($e),{matches:i}=o.useContext(et),{pathname:s}=rt(),a=JSON.stringify(V(i,r.v7_relativeSplatPath));return o.useMemo((()=>z(e,JSON.parse(a),s,"path"===n)),[e,a,s,n])}function ct(e,t,n,r){nt()||d(!1);let{navigator:i}=o.useContext($e),{matches:a}=o.useContext(et),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=rt();if(t){var p;let e="string"===typeof t?y(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||d(!1),h=e}else h=f;let m=h.pathname||"/",g=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=E(e,{pathname:g});let w=pt(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:B([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:B([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,r);return t&&w?o.createElement(Ze.Provider,{value:{location:Ye({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:s.Pop}},w):w}function ut(){let e=function(){var e;let t=o.useContext(tt),n=vt(gt.UseRouteError),r=wt(gt.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=Q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:i},n):null,null)}const ht=o.createElement(ut,null);class dt extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?o.createElement(et.Provider,{value:this.props.routeContext},o.createElement(tt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ft(e){let{routeContext:t,match:n,children:r}=e,i=o.useContext(Xe);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement(et.Provider,{value:t},r)}function pt(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let a=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||d(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let o=0;o<a.length;o++){let e=a[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=o),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,r,i)=>{let s,h=!1,d=null,f=null;var p;n&&(s=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||ht,c&&(u<0&&0===i?(p="route-fallback",!1||bt[p]||(bt[p]=!0),h=!0,f=null):u===i&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,i+1)),g=()=>{let t;return t=s?d:h?f:r.route.Component?o.createElement(r.route.Component,null):r.route.element?r.route.element:e,o.createElement(ft,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?o.createElement(dt,{location:n.location,revalidation:n.revalidation,component:d,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var mt=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(mt||{}),gt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(gt||{});function yt(e){let t=o.useContext(Xe);return t||d(!1),t}function vt(e){let t=o.useContext(Je);return t||d(!1),t}function wt(e){let t=function(e){let t=o.useContext(et);return t||d(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const bt={};a.startTransition;function _t(e){return function(e){let t=o.useContext(et).outlet;return t?o.createElement(ot.Provider,{value:e},t):t}(e.context)}function Et(e){let{basename:t="/",children:n=null,location:r,navigationType:i=s.Pop,navigator:a,static:l=!1,future:c}=e;nt()&&d(!1);let u=t.replace(/^\/*/,"/"),h=o.useMemo((()=>({basename:u,navigator:a,static:l,future:Ye({v7_relativeSplatPath:!1},c)})),[u,c,a,l]);"string"===typeof r&&(r=y(r));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:v="default"}=r,w=o.useMemo((()=>{let e=F(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:v},navigationType:i}}),[u,f,p,m,g,v,i]);return null==w?null:o.createElement($e.Provider,{value:h},o.createElement(Ze.Provider,{children:n,value:w}))}new Promise((()=>{}));o.Component;function It(e){let t={hasErrorBoundary:null!=e.ErrorBoundary||null!=e.errorElement};return e.Component&&Object.assign(t,{element:o.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:o.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:o.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},St.apply(this,arguments)}function Tt(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const kt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(Cx){}function Ct(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=St({},t,{errors:xt(t.errors)})),t}function xt(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&"RouteErrorResponse"===i.__type)n[r]=new W(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){let e=window[i.__subType];if("function"===typeof e)try{let t=new e(i.message);t.stack="",n[r]=t}catch(Cx){}}if(null==n[r]){let e=new Error(i.message);e.stack="",n[r]=e}}else n[r]=i;return n}const At=o.createContext({isTransitioning:!1});const Nt=o.createContext(new Map);const Dt=a.startTransition,Rt=c.flushSync;a.useId;function Pt(e){Rt?Rt(e):e()}class Ot{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function Lt(e){let{fallbackElement:t,router:n,future:r}=e,[i,s]=o.useState(n.state),[a,l]=o.useState(),[c,u]=o.useState({isTransitioning:!1}),[h,d]=o.useState(),[f,p]=o.useState(),[m,g]=o.useState(),y=o.useRef(new Map),{v7_startTransition:v}=r||{},w=o.useCallback((e=>{v?function(e){Dt?Dt(e):e()}(e):e()}),[v]),b=o.useCallback(((e,t)=>{let{deletedFetchers:r,unstable_flushSync:i,unstable_viewTransitionOpts:o}=t;r.forEach((e=>y.current.delete(e))),e.fetchers.forEach(((e,t)=>{void 0!==e.data&&y.current.set(t,e.data)}));let a=null==n.window||null==n.window.document||"function"!==typeof n.window.document.startViewTransition;if(o&&!a){if(i){Pt((()=>{f&&(h&&h.resolve(),f.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:o.currentLocation,nextLocation:o.nextLocation})}));let t=n.window.document.startViewTransition((()=>{Pt((()=>s(e)))}));return t.finished.finally((()=>{Pt((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})}))})),void Pt((()=>p(t)))}f?(h&&h.resolve(),f.skipTransition(),g({state:e,currentLocation:o.currentLocation,nextLocation:o.nextLocation})):(l(e),u({isTransitioning:!0,flushSync:!1,currentLocation:o.currentLocation,nextLocation:o.nextLocation}))}else i?Pt((()=>s(e))):w((()=>s(e)))}),[n.window,f,h,y,w]);o.useLayoutEffect((()=>n.subscribe(b)),[n,b]),o.useEffect((()=>{c.isTransitioning&&!c.flushSync&&d(new Ot)}),[c]),o.useEffect((()=>{if(h&&a&&n.window){let e=a,t=h.promise,r=n.window.document.startViewTransition((async()=>{w((()=>s(e))),await t}));r.finished.finally((()=>{d(void 0),p(void 0),l(void 0),u({isTransitioning:!1})})),p(r)}}),[w,a,h,n.window]),o.useEffect((()=>{h&&a&&i.location.key===a.location.key&&h.resolve()}),[h,f,i.location,a]),o.useEffect((()=>{!c.isTransitioning&&m&&(l(m.state),u({isTransitioning:!0,flushSync:!1,currentLocation:m.currentLocation,nextLocation:m.nextLocation}),g(void 0))}),[c.isTransitioning,m]),o.useEffect((()=>{}),[]);let _=o.useMemo((()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:e=>n.navigate(e),push:(e,t,r)=>n.navigate(e,{state:t,preventScrollReset:null==r?void 0:r.preventScrollReset}),replace:(e,t,r)=>n.navigate(e,{replace:!0,state:t,preventScrollReset:null==r?void 0:r.preventScrollReset})})),[n]),E=n.basename||"/",I=o.useMemo((()=>({router:n,navigator:_,static:!1,basename:E})),[n,_,E]);return o.createElement(o.Fragment,null,o.createElement(Xe.Provider,{value:I},o.createElement(Je.Provider,{value:i},o.createElement(Nt.Provider,{value:y.current},o.createElement(At.Provider,{value:c},o.createElement(Et,{basename:E,location:i.location,navigationType:i.historyAction,navigator:_,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?o.createElement(Mt,{routes:n.routes,future:n.future,state:i}):t))))),null)}function Mt(e){let{routes:t,future:n,state:r}=e;return ct(t,void 0,r,n)}const Ft="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ut=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jt=o.forwardRef((function(e,t){let n,{onClick:r,relative:i,reloadDocument:s,replace:a,state:l,target:c,to:u,preventScrollReset:h,unstable_viewTransition:f}=e,p=Tt(e,kt),{basename:m}=o.useContext($e),y=!1;if("string"===typeof u&&Ut.test(u)&&(n=u,Ft))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=F(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:y=!0}catch(Cx){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;nt()||d(!1);let{basename:r,navigator:i}=o.useContext($e),{hash:s,pathname:a,search:l}=lt(e,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:B([r,a])),i.createHref({pathname:c,search:l,hash:s})}(u,{relative:i}),w=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=st(),u=rt(),h=lt(e,{relative:a});return o.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:g(u)===g(h);c(e,{replace:n,state:i,preventScrollReset:s,relative:a,unstable_viewTransition:l})}}),[u,c,h,r,i,n,e,s,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:i,unstable_viewTransition:f});return o.createElement("a",St({},p,{href:n||v,onClick:y||s?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:c}))}));var Vt,zt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Vt||(Vt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(zt||(zt={}));var Bt=n(391),qt=n(237),Kt=o,Gt=Symbol.for("react-redux-context"),Ht="undefined"!==typeof globalThis?globalThis:{};function Wt(){var e;if(!Kt.createContext)return{};const t=null!==(e=Ht[Gt])&&void 0!==e?e:Ht[Gt]=new Map;let n=t.get(Kt.createContext);return n||(n=Kt.createContext(null),t.set(Kt.createContext,n)),n}var Qt=Wt(),Yt=()=>{throw new Error("uSES not initialized!")};function Xt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;return function(){return Kt.useContext(e)}}var Jt=Xt(),$t=Yt,Zt=(e,t)=>e===t;function en(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;const t=e===Qt?Jt:Xt(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=Zt,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:o,getServerState:a,stabilityCheck:l,identityFunctionCheck:c}=t(),u=(Kt.useRef(!0),Kt.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,i.stabilityCheck])),h=$t(o.addNestedSub,s.getState,a||s.getState,u,r);return Kt.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var tn=en();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function nn(e){e()}var rn={notify(){},get:()=>[]};function sn(e,t){let n,r=rn,i=0,s=!1;function o(){c.onStateChange&&c.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){nn((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=rn)}const c={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>r};return c}var on=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),an="undefined"!==typeof navigator&&"ReactNative"===navigator.product,ln=on||an?Kt.useLayoutEffect:Kt.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var cn=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:s="once",identityFunctionCheck:o="once"}=e;const a=Kt.useMemo((()=>{const e=sn(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:s,identityFunctionCheck:o}}),[t,i,s,o]),l=Kt.useMemo((()=>t.getState()),[t]);ln((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,l]);const c=n||Qt;return Kt.createElement(c.Provider,{value:a},r)};function un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;const t=e===Qt?Jt:Xt(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var hn=un();function dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;const t=e===Qt?hn:un(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var fn=dn();(e=>{$t=e})(qt.useSyncExternalStoreWithSelector),(e=>{e})(o.useSyncExternalStore);var pn=Symbol.for("immer-nothing"),mn=Symbol.for("immer-draftable"),gn=Symbol.for("immer-state");function yn(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var vn=Object.getPrototypeOf;function wn(e){return!!e&&!!e[gn]}function bn(e){var t;return!!e&&(En(e)||Array.isArray(e)||!!e[mn]||!(null===(t=e.constructor)||void 0===t||!t[mn])||Cn(e)||xn(e))}var _n=Object.prototype.constructor.toString();function En(e){if(!e||"object"!==typeof e)return!1;const t=vn(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===_n}function In(e,t){0===Sn(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function Sn(e){const t=e[gn];return t?t.type_:Array.isArray(e)?1:Cn(e)?2:xn(e)?3:0}function Tn(e,t){return 2===Sn(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kn(e,t,n){const r=Sn(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Cn(e){return e instanceof Map}function xn(e){return e instanceof Set}function An(e){return e.copy_||e.base_}function Nn(e,t){if(Cn(e))return new Map(e);if(xn(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=En(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[gn];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(vn(e),t)}{const t=vn(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function Dn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Pn(e)||wn(e)||!bn(e)||(Sn(e)>1&&(e.set=e.add=e.clear=e.delete=Rn),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,n]=e;return Dn(n,!0)}))),e}function Rn(){yn(2)}function Pn(e){return Object.isFrozen(e)}var On,Ln={};function Mn(e){const t=Ln[e];return t||yn(0),t}function Fn(){return On}function Un(e,t){t&&(Mn("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function jn(e){Vn(e),e.drafts_.forEach(Bn),e.drafts_=null}function Vn(e){e===On&&(On=e.parent_)}function zn(e){return On={drafts_:[],parent_:On,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Bn(e){const t=e[gn];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function qn(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[gn].modified_&&(jn(t),yn(4)),bn(e)&&(e=Kn(t,e),t.parent_||Hn(t,e)),t.patches_&&Mn("Patches").generateReplacementPatches_(n[gn].base_,e,t.patches_,t.inversePatches_)):e=Kn(t,n,[]),jn(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==pn?e:void 0}function Kn(e,t,n){if(Pn(t))return t;const r=t[gn];if(!r)return In(t,((i,s)=>Gn(e,r,t,i,s,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return Hn(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),In(i,((i,o)=>Gn(e,r,t,i,o,n,s))),Hn(e,t,!1),n&&e.patches_&&Mn("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Gn(e,t,n,r,i,s,o){if(wn(i)){const o=Kn(e,i,s&&t&&3!==t.type_&&!Tn(t.assigned_,r)?s.concat(r):void 0);if(kn(n,r,o),!wn(o))return;e.canAutoFreeze_=!1}else o&&n.add(i);if(bn(i)&&!Pn(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Kn(e,i),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||Hn(e,i)}}function Hn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Dn(t,n)}var Wn={get(e,t){if(t===gn)return e;const n=An(e);if(!Tn(n,t))return function(e,t,n){var r;const i=Xn(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!bn(r)?r:r===Yn(e.base_,t)?($n(e),e.copy_[t]=Zn(r,e)):r},has:(e,t)=>t in An(e),ownKeys:e=>Reflect.ownKeys(An(e)),set(e,t,n){const r=Xn(An(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=Yn(An(e),t),i=null===r||void 0===r?void 0:r[gn];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||Tn(e.base_,t)))return!0;$n(e),Jn(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Yn(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,$n(e),Jn(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=An(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){yn(11)},getPrototypeOf:e=>vn(e.base_),setPrototypeOf(){yn(12)}},Qn={};function Yn(e,t){const n=e[gn];return(n?An(n):e)[t]}function Xn(e,t){if(!(t in e))return;let n=vn(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=vn(n)}}function Jn(e){e.modified_||(e.modified_=!0,e.parent_&&Jn(e.parent_))}function $n(e){e.copy_||(e.copy_=Nn(e.base_,e.scope_.immer_.useStrictShallowCopy_))}In(Wn,((e,t)=>{Qn[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Qn.deleteProperty=function(e,t){return Qn.set.call(this,e,t,void 0)},Qn.set=function(e,t,n){return Wn.set.call(this,e[0],t,n,e[0])};function Zn(e,t){const n=Cn(e)?Mn("MapSet").proxyMap_(e,t):xn(e)?Mn("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Fn(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Wn;n&&(i=[r],s=Qn);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}(e,t);return(t?t.scope_:Fn()).drafts_.push(n),n}function er(e){return wn(e)||yn(10),tr(e)}function tr(e){if(!bn(e)||Pn(e))return e;const t=e[gn];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Nn(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Nn(e,!0);return In(n,((e,t)=>{kn(n,e,tr(t))})),t&&(t.finalized_=!1),n}var nr=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return r.produce(e,(e=>t.call(this,e,...s)))}}let r;if("function"!==typeof t&&yn(6),void 0!==n&&"function"!==typeof n&&yn(7),bn(e)){const i=zn(this),s=Zn(e,void 0);let o=!0;try{r=t(s),o=!1}finally{o?jn(i):Vn(i)}return Un(i,n),qn(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===pn&&(r=void 0),this.autoFreeze_&&Dn(r,!0),n){const t=[],i=[];Mn("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}yn(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;const s=this.produce(e,n,((e,t)=>{r=e,i=t}));return[s,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){bn(e)||yn(8),wn(e)&&(e=er(e));const t=zn(this),n=Zn(e,void 0);return n[gn].isManual_=!0,Vn(t),n}finishDraft(e,t){const n=e&&e[gn];n&&n.isManual_||yn(9);const{scope_:r}=n;return Un(r,t),qn(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Mn("Patches").applyPatches_;return wn(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},rr=nr.produce;nr.produceWithPatches.bind(nr),nr.setAutoFreeze.bind(nr),nr.setUseStrictShallowCopy.bind(nr),nr.applyPatches.bind(nr),nr.createDraft.bind(nr),nr.finishDraft.bind(nr);function ir(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var sr=e=>Array.isArray(e)?e:[e];function or(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var ar="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},lr=0,cr=1;function ur(){return{s:lr,v:void 0,o:null,p:null}}function hr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ur();const{resultEqualityCheck:r}=t;let i,s=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=ur(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=ur(),e.set(n,t)):t=r}}const a=t;let l;if(t.s===cr)l=t.v;else if(l=e.apply(null,arguments),s++,r){var c,u,h;const e=null!==(c=null===(u=i)||void 0===u||null===(h=u.deref)||void 0===h?void 0:h.call(u))&&void 0!==c?c:i;null!=e&&r(e,l)&&(l=e,0!==s&&s--);i="object"===typeof l&&null!==l||"function"===typeof l?new ar(l):l}return a.s=cr,a.v=l,l}return o.clearCache=()=>{n=ur(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function dr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,s=0,o=0,a={},l=t.pop();"object"===typeof l&&(a=l,l=t.pop()),ir(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c={...i,...a},{memoize:u,memoizeOptions:h=[],argsMemoize:d=hr,argsMemoizeOptions:f=[],devModeChecks:p={}}=c,m=sr(h),g=sr(f),y=or(t),v=u((function(){return s++,l.apply(null,arguments)}),...m);const w=d((function(){o++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(y,arguments);return r=v.apply(null,e),r}),...g);return Object.assign(w,{resultFunc:l,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>r,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:u,argsMemoize:d})};return Object.assign(s,{withTypes:()=>s}),s}var fr=dr(hr),pr=Object.assign((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map((t=>e[t])),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})}));return r}),{withTypes:()=>pr});function mr(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var gr=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),yr=()=>Math.random().toString(36).substring(7).split("").join("."),vr={INIT:"@@redux/INIT".concat(yr()),REPLACE:"@@redux/REPLACE".concat(yr()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(yr())};function wr(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function br(e,t,n){if("function"!==typeof e)throw new Error(mr(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(mr(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(mr(1));return n(br)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function u(){if(l)throw new Error(mr(3));return i}function h(e){if("function"!==typeof e)throw new Error(mr(4));if(l)throw new Error(mr(5));let t=!0;c();const n=a++;return o.set(n,e),function(){if(t){if(l)throw new Error(mr(6));t=!1,c(),o.delete(n),s=null}}}function d(e){if(!wr(e))throw new Error(mr(7));if("undefined"===typeof e.type)throw new Error(mr(8));if("string"!==typeof e.type)throw new Error(mr(17));if(l)throw new Error(mr(9));try{l=!0,i=r(i,e)}finally{l=!1}return(s=o).forEach((e=>{e()})),e}d({type:vr.INIT});return{dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(mr(10));r=e,d({type:vr.REPLACE})},[gr]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(mr(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[gr](){return this}}}}}function _r(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const r=t[s];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:vr.INIT}))throw new Error(mr(12));if("undefined"===typeof n(void 0,{type:vr.PROBE_UNKNOWN_ACTION()}))throw new Error(mr(13))}))}(n)}catch(Cx){i=Cx}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let s=!1;const o={};for(let i=0;i<r.length;i++){const a=r[i],l=n[a],c=e[a],u=l(c,t);if("undefined"===typeof u){t&&t.type;throw new Error(mr(14))}o[a]=u,s=s||u!==c}return s=s||r.length!==Object.keys(e).length,s?o:e}}function Er(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function Ir(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var Sr=Ir(),Tr=Ir,kr=(function(){const e=dr(...arguments),t=Object.assign((function(){const t=e(...arguments),n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t(wn(e)?er(e):e,...r)};return Object.assign(n,t),n}),{withTypes:()=>t})}(hr),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Er:Er.apply(null,arguments)});"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Cr(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Zr(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return wr(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var xr=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function Ar(e){return bn(e)?rr(e,(()=>{})):e}function Nr(e,t,n){if(e.has(t)){let r=e.get(t);return n.update&&(r=n.update(r,t,e),e.set(t,r)),r}if(!n.insert)throw new Error(Zr(10));const r=n.insert(t,e);return e.set(t,r),r}var Dr="RTK_autoBatch",Rr=e=>t=>{setTimeout(t,e)},Pr="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Rr(10),Or=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new xr(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,s=!1;const o=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?Pr:"callback"===e.type?e.queueNotification:Rr(e.timeout),l=()=>{s=!1,i&&(i=!1,o.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[Dr]),i=!r,i&&(s||(s=!0,a(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function Lr(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Zr(28));if(r in t)throw new Error(Zr(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var Mr=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var Fr=Symbol.for("rtk-slice-createasyncthunk");function Ur(e,t){return"".concat(e,"/").concat(t)}function jr(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[Fr];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(Zr(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(i),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Zr(12));if(n in o.sliceCaseReducersByType)throw new Error(Zr(13));return o.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(o.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,a)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?Lr(e.extraReducers):[e.extraReducers],i={...t,...o.sliceCaseReducersByType};return function(e,t){let n,[r,i,s]=Lr(t);if(function(e){return"function"===typeof e}(e))n=()=>Ar(e());else{const t=Ar(e);n=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,o=[r[t.type],...i.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===o.filter((e=>!!e)).length&&(o=[s]),o.reduce(((e,n)=>{if(n){if(wn(e)){const r=n(e,t);return void 0===r?e:r}if(bn(e))return rr(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw new Error(Zr(9))}return r}}return e}),e)}return o.getInitialState=n,o}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}s.forEach((r=>{const s=i[r],o={reducerName:r,type:Ur(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let r,i,{type:s,reducerName:o,createNotation:a}=e;if("reducer"in t){if(a&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Zr(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(s,r).exposeCaseReducer(o,r).exposeAction(o,i?Cr(s,i):Cr(s))}(o,s,a):function(e,t,n,r){let{type:i,reducerName:s}=e;if(!r)throw new Error(Zr(18));const{payloadCreator:o,fulfilled:a,pending:l,rejected:c,settled:u,options:h}=t,d=r(i,o,h);n.exposeAction(s,d),a&&n.addCase(d.fulfilled,a);l&&n.addCase(d.pending,l);c&&n.addCase(d.rejected,c);u&&n.addMatcher(d.settled,u);n.exposeCaseReducer(s,{fulfilled:a||Br,pending:l||Br,rejected:c||Br,settled:u||Br})}(o,s,a,n)}));const c=e=>e,u=new Map;let h;function d(e,t){return h||(h=l()),h(e,t)}function f(){return h||(h=l()),h.getInitialState()}function p(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let r=e[t];return"undefined"===typeof r&&n&&(r=f()),r}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const r=Nr(u,n,{insert:()=>new WeakMap});return Nr(r,t,{insert:()=>{const r={};for(const[s,o]of Object.entries(null!==(i=e.selectors)&&void 0!==i?i:{})){var i;r[s]=Vr(o,t,f,n)}return r}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const m={name:t,reducer:d,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:f,...p(r),injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=null!==t&&void 0!==t?t:r;return e.inject({reducerPath:i,reducer:d},n),{...m,...p(i,!0)}}};return m}}function Vr(e,t,n,r){function i(i){let s=t(i);"undefined"===typeof s&&r&&(s=n());for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return e(s,...a)}return i.unwrapped=e,i}var zr=jr();function Br(){}var qr="listener",Kr="completed",Gr="cancelled",Hr=("task-".concat(Gr),"task-".concat(Kr),"".concat(qr,"-").concat(Gr),"".concat(qr,"-").concat(Kr),(e,t)=>{if("function"!==typeof e)throw new Error(Zr(32))});var{assign:Wr}=Object,Qr="listenerMiddleware",Yr=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=Cr(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Zr(21));return Hr(s),{predicate:i,type:t,effect:s}},Xr=Object.assign((e=>{const{type:t,predicate:n,effect:r}=Yr(e);return{id:Mr(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Zr(22))}}}),{withTypes:()=>Xr}),Jr=Object.assign(Cr("".concat(Qr,"/add")),{withTypes:()=>Jr}),$r=(Cr("".concat(Qr,"/removeAll")),Object.assign(Cr("".concat(Qr,"/remove")),{withTypes:()=>$r}));Symbol.for("rtk-state-proxy-original");function Zr(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}const ei=zr({name:"app",initialState:{currentPage:1,perPage:10,author:null,blogId:null,totalBlogs:0},reducers:{setPage:(e,t)=>{e.currentPage=t.payload},prevPage:(e,t)=>{e.currentPage=Math.max(0,e.currentPage-1)},nextPage:(e,t)=>{e.currentPage=Math.max(0,e.currentPage+1)},setPerPage:(e,t)=>{e.perPage=t.payload},setAuthor:(e,t)=>{e.author=t.payload},setBlogId:(e,t)=>{e.blogId=t.payload},setTotal:(e,t)=>{e.totalBlogs=t.payload}}}),ti=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=null!==e&&void 0!==e?e:{};let s=new xr;return t&&(function(e){return"boolean"===typeof e}(t)?s.push(Sr):s.push(Tr(t.extraArgument))),s},{reducer:n,middleware:r,devTools:i=!0,preloadedState:s,enhancers:o}=e||{};let a,l;if("function"===typeof n)a=n;else{if(!wr(n))throw new Error(Zr(1));a=_r(n)}l="function"===typeof r?r(t):t();let c=Er;i&&(c=kr({trace:!1,..."object"===typeof i&&i}));const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(mr(15))};const o={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s(e,...n)}},a=t.map((e=>e(o)));return s=Er(...a)(i.dispatch),{...i,dispatch:s}}}(...l),h=Or(u);let d="function"===typeof o?o(h):h();return br(a,s,c(...d))}({reducer:{app:ei.reducer}}),{setPage:ni,prevPage:ri,nextPage:ii,setAuthor:si,setBlogId:oi,setTotal:ai}=ei.actions,li=e=>e.app.currentPage,ci=e=>e.app.perPage,ui=e=>e.app.totalBlogs,hi=fn.withTypes();ei.reducer;const di=new class{constructor(){this.commentsCache=[],this.blogCache=[],this.allBlogCache=[]}async getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.allBlogCache[t]&&this.allBlogCache[t][e])return this.allBlogCache[t][e];const n="http://localhost:3001/blogs?_page=".concat(t,"&_limit=").concat(e,"&_expand=profile");return await fetch(n,{method:"GET"}).then((e=>e.json())).then((n=>(Array.isArray(this.allBlogCache[t])||(this.allBlogCache[t]=[]),this.allBlogCache[t][e]=n,n)))}async getOne(e){return this.blogCache[parseInt(e)]?[this.blogCache[parseInt(e)]]:await fetch("http://localhost:3001/blogs/"+e+"?_embed=profile",{method:"GET"}).then((e=>e.json())).then((t=>(this.blogCache[parseInt(e)]=t,[t])))}async getByProfileById(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return await fetch("http://localhost:3001/blogs?profileId=".concat(e,"&_expand=profile&_page=").concat(n,"&_limit=").concat(t),{method:"GET"}).then((e=>e.json())).then((e=>e))}async getProfiles(){return await fetch("http://localhost:3001/profiles").then((e=>e.json())).then((e=>e))}async getCommentsByBlog(e){return this.commentsCache[e]&&Array.isArray(this.commentsCache[e])?this.commentsCache[e]:await fetch("http://localhost:3001/comments?blogId=".concat(e,"&_expand=profile")).then((e=>e.json())).then((t=>(this.commentsCache[e]=t,t)))}},fi=di;var pi=n(579);function mi(){const[e,t]=(0,o.useState)([]);return(0,o.useEffect)((()=>{fi.getProfiles().then((e=>{t(e)}))}),[]),(0,pi.jsxs)(pi.Fragment,{children:[(0,pi.jsx)("h1",{children:"Authors"}),e.map((e=>(0,pi.jsx)("h3",{children:(0,pi.jsx)(jt,{to:"/author/"+e.id,className:"item-link",children:e.name})},e.id)))]})}function gi(e,t){const n=hi();let r=[];const[i,s]=[tn(ui),tn(ci)],o=Math.floor(i/s);for(let a=0;a<=o;a++)r.push(a);return(0,pi.jsx)("nav",{"aria-label":"Page Pagination",className:"mx-auto mt-5",children:(0,pi.jsxs)("ul",{className:"pagination justify-content-center",children:[(0,pi.jsx)("li",{className:"page-item",children:(0,pi.jsx)("button",{className:"page-link",onClick:()=>n(ri(1)),children:"Previous"})},"prev"),r.map((e=>(0,pi.jsx)("li",{className:"page-item",children:(0,pi.jsx)("button",{className:"page-link",onClick:()=>n(ni(e+1)),children:e+1})},e))),(0,pi.jsx)("li",{className:"page-item",children:(0,pi.jsx)("button",{className:"page-link",onClick:()=>n(ii(2)),children:"Next"})},"next")]})})}const yi=(e,t,n,r,i,s)=>{e.author&&null!==e.author?fi.getByProfileById(e.author).then((e=>{r(e),i(!1)})).catch((e=>{console.log("profileId error = ",e),s(!0),i(!1)})):e.id&&null!==e.id?fi.getOne(e.id).then((e=>{r(e),i(!1)})).catch((e=>{console.log("getOne error : ",e),i(!1),s(!0)})):fi.getAll(t,n).then((e=>{r(e),i(!1)})).catch((e=>{console.log("getAll error = ",e),s(!0),i(!1)}))};function vi(e){const t=tn(li),n=tn(ci),{blogs:r,setBlogs:i,loading:s,setLoading:a,error:l,setError:c}=bi();return o.useEffect((()=>{yi(e,n,t,i,a,c)}),[e,n,t]),(0,pi.jsx)(pi.Fragment,{children:s?(0,pi.jsx)("h1",{children:"Loading..."}):l?(0,pi.jsx)("h1",{className:"error",children:"ERROR FOUND!"}):(0,pi.jsxs)(pi.Fragment,{children:[r.map((e=>{var t,n;return(0,pi.jsx)("div",{className:"card mb-2",children:(0,pi.jsx)("div",{className:"blog-post card-body",children:(0,pi.jsxs)("div",{className:"row",children:[(0,pi.jsx)("div",{className:"col-6 blog-title card-text",children:(0,pi.jsx)(jt,{to:"/blog/".concat(e.id),children:e.title})}),(0,pi.jsxs)("div",{className:"col-6 blog-author card-text",children:["By ",(0,pi.jsx)(jt,{to:"/author/".concat(null===(t=e.profile)||void 0===t?void 0:t.id),children:(null===(n=e.profile)||void 0===n?void 0:n.name)||"error"})]})]})})},e.id)})),(0,pi.jsx)(gi,{baseUrl:"/",start:t||0,perPage:n||10,total:r.length/(n||10)})]})})}function wi(){const e=at(),[t,n]=(0,o.useState)([]);return(0,o.useEffect)((()=>{e&&e.id&&fi.getCommentsByBlog(parseInt(e.id)).then((e=>{n(e)}))}),[]),(0,pi.jsxs)(pi.Fragment,{children:[(0,pi.jsx)("h4",{className:"mt-4",children:"Comments"}),t.map((e=>{var t;return(0,pi.jsx)("div",{className:"card w-100",children:(0,pi.jsxs)("div",{className:"d-flex p-2",children:[(0,pi.jsx)("div",{className:"card-text flex-fill",children:e.title}),(0,pi.jsx)("div",{className:"card-text flex-fill",children:null===(t=e.profile)||void 0===t?void 0:t.name})]})},e.id)}))]})}function bi(){const[e,t]=o.useState([]),[n,r]=o.useState(!0),[i,s]=o.useState(!1);return{blogs:e,setBlogs:t,loading:n,setLoading:r,error:i,setError:s}}function _i(){var e,t;let n=at();const r=tn(li),i=tn(ci),{blogs:s,setBlogs:a,loading:l,setLoading:c,error:u,setError:h}=bi();(0,o.useEffect)((()=>{yi(n,i,r,a,c,h)}),[]);const d=s[0];return(0,pi.jsx)(pi.Fragment,{children:l||u?null:(0,pi.jsxs)("div",{children:[(0,pi.jsxs)("div",{className:"blog-post mt-22",children:[(0,pi.jsx)("div",{className:"blog-title",children:(0,pi.jsx)("h3",{children:(0,pi.jsx)(jt,{to:"/blog/".concat(d.id),children:d.title})})}),Array.isArray(d.profile)?(0,pi.jsx)("p",{className:"error",children:"Error"}):(0,pi.jsx)("div",{className:"blog-author",children:(0,pi.jsx)(jt,{to:"/author/".concat(null===(e=d.profile)||void 0===e?void 0:e.id),children:null===(t=d.profile)||void 0===t?void 0:t.name})}),(0,pi.jsx)("div",{className:"blog-content",children:d.content})]}),(0,pi.jsx)(wi,{})]},d.id)})}function Ei(){return(0,pi.jsx)("div",{className:"container mt-5 mb-5 bg-secondary text-white-50",children:(0,pi.jsxs)("div",{className:"row",children:[(0,pi.jsx)("div",{className:"col",children:(0,pi.jsxs)("div",{className:"vstack",children:[(0,pi.jsx)("div",{className:"",children:"Static"}),(0,pi.jsx)("div",{className:"",children:(0,pi.jsx)(jt,{to:"/about",className:"text-white",children:"About"})}),(0,pi.jsx)("div",{className:"",children:(0,pi.jsx)(jt,{to:"/",className:"text-white",children:"Sitemap"})}),(0,pi.jsx)("div",{className:"",children:(0,pi.jsx)(jt,{to:"/",className:"text-white",children:"Contact"})}),(0,pi.jsx)("div",{className:"",children:(0,pi.jsx)(jt,{to:"/",className:"text-white",children:"FAQ"})})]})}),(0,pi.jsx)("div",{className:"col",children:(0,pi.jsxs)("div",{className:"vstack",children:[(0,pi.jsx)("div",{className:"",children:"Content"}),(0,pi.jsx)("div",{className:"",children:(0,pi.jsx)(jt,{to:"/",className:"text-white",children:"Blog"})}),(0,pi.jsx)("div",{className:"",children:(0,pi.jsx)(jt,{to:"/authors",className:"text-white",children:"Authors"})})]})})]})})}const Ii=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Si={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ii(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Ti;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ti extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ki=function(e){return function(e){const t=Ii(e);return Si.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ci=function(e){try{return Si.decodeString(e,!0)}catch(Cx){console.error("base64Decode failed: ",Cx)}return null};function xi(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=xi(e[n],t[n]));return e}const Ai=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ni=()=>{try{return Ai()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/react-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Cx){return}const t=e&&Ci(e[1]);return t&&JSON.parse(t)})()}catch(Cx){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Cx))}},Di=()=>{var e;return null===(e=Ni())||void 0===e?void 0:e.config};class Ri{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Pi(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Oi(){var e;const t=null===(e=Ni())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Cx){return!1}}function Li(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Mi(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Fi(){const e=Pi();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ui(){try{return"object"===typeof indexedDB}catch(Cx){return!1}}class ji extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vi.prototype.create)}}class Vi{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(zi,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ji(n,s,t)}}const zi=/\{\$([^}]+)}/g;function Bi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function qi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Ki(n)&&Ki(s)){if(!qi(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ki(e){return null!==e&&"object"===typeof e}function Gi(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Hi(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Wi(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Qi(e,t){const n=new Yi(e,t);return n.subscribe.bind(n)}class Yi{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Xi),void 0===r.error&&(r.error=Xi),void 0===r.complete&&(r.complete=Xi);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Cx){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Cx){"undefined"!==typeof console&&console.error&&console.error(Cx)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Xi(){}function Ji(e){return e&&e._delegate?e._delegate:e}class $i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Zi="[DEFAULT]";class es{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ri;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Cx){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Cx){if(r)return null;throw Cx}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Zi})}catch(Cx){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Cx){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zi;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zi;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(_T){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Zi?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(_T){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zi;return this.component?this.component.multipleInstances?e:Zi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ts{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new es(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ns=[];var rs;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(rs||(rs={}));const is={debug:rs.DEBUG,verbose:rs.VERBOSE,info:rs.INFO,warn:rs.WARN,error:rs.ERROR,silent:rs.SILENT},ss=rs.INFO,os={[rs.DEBUG]:"log",[rs.VERBOSE]:"log",[rs.INFO]:"info",[rs.WARN]:"warn",[rs.ERROR]:"error"},as=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=os[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ls{constructor(e){this.name=e,this._logLevel=ss,this._logHandler=as,this._userLogHandler=null,ns.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rs))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?is[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rs.DEBUG,...t),this._logHandler(this,rs.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rs.VERBOSE,...t),this._logHandler(this,rs.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rs.INFO,...t),this._logHandler(this,rs.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rs.WARN,...t),this._logHandler(this,rs.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,rs.ERROR,...t),this._logHandler(this,rs.ERROR,...t)}}const cs=(e,t)=>t.some((t=>e instanceof t));let us,hs;const ds=new WeakMap,fs=new WeakMap,ps=new WeakMap,ms=new WeakMap,gs=new WeakMap;let ys={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return fs.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ps.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bs(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function vs(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(hs||(hs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(_s(this),n),bs(ds.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bs(e.apply(_s(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(_s(this),t,...r);return ps.set(s,t.sort?t.sort():[t]),bs(s)}}function ws(e){return"function"===typeof e?vs(e):(e instanceof IDBTransaction&&function(e){if(fs.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));fs.set(e,t)}(e),cs(e,us||(us=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ys):e)}function bs(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(bs(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ds.set(t,e)})).catch((()=>{})),gs.set(t,e),t}(e);if(ms.has(e))return ms.get(e);const t=ws(e);return t!==e&&(ms.set(e,t),gs.set(t,e)),t}const _s=e=>gs.get(e);const Es=["get","getKey","getAll","getAllKeys","count"],Is=["put","add","delete","clear"],Ss=new Map;function Ts(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ss.get(t))return Ss.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Is.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Es.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Ss.set(t,s),s}ys=(e=>({...e,get:(t,n,r)=>Ts(t,n)||e.get(t,n,r),has:(t,n)=>!!Ts(t,n)||e.has(t,n)}))(ys);class ks{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Cs="@firebase/app",xs="0.9.13",As=new ls("@firebase/app"),Ns="@firebase/app-compat",Ds="@firebase/analytics-compat",Rs="@firebase/analytics",Ps="@firebase/app-check-compat",Os="@firebase/app-check",Ls="@firebase/auth",Ms="@firebase/auth-compat",Fs="@firebase/database",Us="@firebase/database-compat",js="@firebase/functions",Vs="@firebase/functions-compat",zs="@firebase/installations",Bs="@firebase/installations-compat",qs="@firebase/messaging",Ks="@firebase/messaging-compat",Gs="@firebase/performance",Hs="@firebase/performance-compat",Ws="@firebase/remote-config",Qs="@firebase/remote-config-compat",Ys="@firebase/storage",Xs="@firebase/storage-compat",Js="@firebase/firestore",$s="@firebase/firestore-compat",Zs="firebase",eo="[DEFAULT]",to={[Cs]:"fire-core",[Ns]:"fire-core-compat",[Rs]:"fire-analytics",[Ds]:"fire-analytics-compat",[Os]:"fire-app-check",[Ps]:"fire-app-check-compat",[Ls]:"fire-auth",[Ms]:"fire-auth-compat",[Fs]:"fire-rtdb",[Us]:"fire-rtdb-compat",[js]:"fire-fn",[Vs]:"fire-fn-compat",[zs]:"fire-iid",[Bs]:"fire-iid-compat",[qs]:"fire-fcm",[Ks]:"fire-fcm-compat",[Gs]:"fire-perf",[Hs]:"fire-perf-compat",[Ws]:"fire-rc",[Qs]:"fire-rc-compat",[Ys]:"fire-gcs",[Xs]:"fire-gcs-compat",[Js]:"fire-fst",[$s]:"fire-fst-compat","fire-js":"fire-js",[Zs]:"fire-js-all"},no=new Map,ro=new Map;function io(e,t){try{e.container.addComponent(t)}catch(Cx){As.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Cx)}}function so(e,t){e.container.addOrOverwriteComponent(t)}function oo(e){const t=e.name;if(ro.has(t))return As.debug("There were multiple attempts to register component ".concat(t,".")),!1;ro.set(t,e);for(const n of no.values())io(n,e);return!0}function ao(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function lo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eo;ao(e,t).clearInstance(n)}function co(){ro.clear()}const uo=new Vi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ho{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new $i("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw uo.create("app-deleted",{appName:this._name})}}const fo="9.23.0";function po(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:eo,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw uo.create("bad-app-name",{appName:String(i)});if(n||(n=Di()),!n)throw uo.create("no-options");const s=no.get(i);if(s){if(qi(n,s.options)&&qi(r,s.config))return s;throw uo.create("duplicate-app",{appName:i})}const o=new ts(i);for(const l of ro.values())o.addComponent(l);const a=new ho(n,r,o);return no.set(i,a),a}function mo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eo;const t=no.get(e);if(!t&&e===eo&&Di())return po();if(!t)throw uo.create("no-app",{appName:e});return t}function go(){return Array.from(no.values())}async function yo(e){const t=e.name;no.has(t)&&(no.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function vo(e,t,n){var r;let i=null!==(r=to[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void As.warn(e.join(" "))}oo(new $i("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function wo(e,t){if(null!==e&&"function"!==typeof e)throw uo.create("invalid-log-argument");!function(e,t){for(const n of ns){let r=null;t&&t.level&&(r=is[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:rs[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function bo(e){var t;t=e,ns.forEach((e=>{e.setLogLevel(t)}))}const _o="firebase-heartbeat-database",Eo=1,Io="firebase-heartbeat-store";let So=null;function To(){return So||(So=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=bs(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(bs(o.result),e.oldVersion,e.newVersion,bs(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(_o,Eo,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Io)}}).catch((e=>{throw uo.create("idb-open",{originalErrorMessage:e.message})}))),So}async function ko(e,t){try{const n=(await To()).transaction(Io,"readwrite"),r=n.objectStore(Io);await r.put(t,Co(e)),await n.done}catch(Cx){if(Cx instanceof ji)As.warn(Cx.message);else{const t=uo.create("idb-set",{originalErrorMessage:null===Cx||void 0===Cx?void 0:Cx.message});As.warn(t.message)}}}function Co(e){return"".concat(e.name,"!").concat(e.options.appId)}class xo{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new No(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=Ao();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Ao(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Do(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Do(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=ki(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Ao(){return(new Date).toISOString().substring(0,10)}class No{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ui()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await To();return await t.transaction(Io).objectStore(Io).get(Co(e))}catch(Cx){if(Cx instanceof ji)As.warn(Cx.message);else{const t=uo.create("idb-get",{originalErrorMessage:null===Cx||void 0===Cx?void 0:Cx.message});As.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ko(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ko(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Do(e){return ki(JSON.stringify({version:2,heartbeats:e})).length}var Ro;Ro="",oo(new $i("platform-logger",(e=>new ks(e)),"PRIVATE")),oo(new $i("heartbeat",(e=>new xo(e)),"PRIVATE")),vo(Cs,xs,Ro),vo(Cs,xs,"esm2017"),vo("fire-js","");class Po{constructor(e,t){this._delegate=e,this.firebase=t,io(e,new $i("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),yo(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eo;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eo;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){io(this._delegate,e)}_addOrOverwriteComponent(e){so(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Oo=new Vi("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Lo=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(r){const i=po(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Bi(t,i.name))return t[i.name];const s=new e(i,n);return t[i.name]=s,s},app:i,registerVersion:vo,setLogLevel:bo,onLog:wo,apps:null,SDK_VERSION:fo,INTERNAL:{registerComponent:function(t){const r=t.name,s=r.replace("-compat","");if(oo(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Oo.create("invalid-app-argument",{appName:r});return e[s]()};void 0!==t.serviceProps&&xi(o,t.serviceProps),n[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!Bi(t,e=e||eo))throw Oo.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,n}(Po);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){xi(t,e)},createSubscribe:Qi,ErrorFactory:Vi,deepExtend:xi}),t}(),Mo=new ls("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Mo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Mo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fo=Lo;!function(e){vo("@firebase/app-compat","0.2.13",e)}();Fo.registerVersion("firebase","9.23.0","app-compat");function Uo(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const jo={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Vo="EMAIL_SIGNIN",zo="PASSWORD_RESET",Bo="RECOVER_EMAIL",qo="REVERT_SECOND_FACTOR_ADDITION",Ko="VERIFY_AND_CHANGE_EMAIL",Go="VERIFY_EMAIL";function Ho(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wo=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Qo=Ho,Yo=new Vi("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xo=new ls("@firebase/auth");function Jo(e){if(Xo.logLevel<=rs.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xo.error("Auth (".concat(fo,"): ").concat(e),...n)}}function $o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw na(e,...n)}function Zo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return na(e,...n)}function ea(e,t,n){const r=Object.assign(Object.assign({},Qo()),{[t]:n});return new Vi("auth","Firebase",r).create(t,{appName:e.name})}function ta(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&$o(e,"argument-error"),ea(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function na(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Yo.create(e,...n)}function ra(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw na(t,...r)}}function ia(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Jo(t),new Error(t)}function sa(e,t){e||ia(t)}function oa(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function aa(){return"http:"===la()||"https:"===la()}function la(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class ca{constructor(e,t){this.shortDelay=e,this.longDelay=t,sa(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pi())||Mi()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(aa()||Li()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function ua(e,t){sa(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ha{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ia("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ia("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ia("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const da={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},fa=new ca(3e4,6e4);function pa(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ma(e,t,n,r){return ga(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Gi(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),ha.fetch()(va(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function ga(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},da),t);try{const t=new wa(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ba(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ba(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ba(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ba(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw ea(e,a,o);$o(e,a)}}catch(Cx){if(Cx instanceof ji)throw Cx;$o(e,"network-request-failed",{message:String(Cx)})}}async function ya(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await ma(e,t,n,r,i);return"mfaPendingCredential"in s&&$o(e,"multi-factor-auth-required",{_serverResponse:s}),s}function va(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ua(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}class wa{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Zo(this.auth,"network-request-failed"))),fa.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ba(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zo(e,t,r);return i.customData._tokenResponse=n,i}function _a(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Cx){}}function Ea(e){return 1e3*Number(e)}function Ia(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Jo("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ci(n);return e?JSON.parse(e):(Jo("Failed to decode base64 JWT payload"),null)}catch(Cx){return Jo("Caught error parsing JWT payload as JSON",null===Cx||void 0===Cx?void 0:Cx.toString()),null}}async function Sa(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Cx){throw Cx instanceof ji&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Cx)&&e.auth.currentUser===e&&await e.auth.signOut(),Cx}}class Ta{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Cx){return void((null===Cx||void 0===Cx?void 0:Cx.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ka{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_a(this.lastLoginAt),this.creationTime=_a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ca(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Sa(e,async function(e,t){return ma(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));ra(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Uo(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ka(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ra(e.idToken,"internal-error"),ra("undefined"!==typeof e.idToken,"internal-error"),ra("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Ia(e);return ra(t,"internal-error"),ra("undefined"!==typeof t.exp,"internal-error"),ra("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ra(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ga(e,{},(async()=>{const n=Gi({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=va(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",ha.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new xa;return n&&(ra("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ra("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ra("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return ia("not implemented")}}function Aa(e,t){ra("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Na{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Uo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ta(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ka(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Sa(this,this.stsTokenManager.getToken(this.auth,e));return ra(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Ji(e),r=await n.getIdToken(t),i=Ia(r);ra(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:_a(Ea(i.auth_time)),issuedAtTime:_a(Ea(i.iat)),expirationTime:_a(Ea(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ji(e);await Ca(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ra(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Na(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ra(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ca(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Sa(this,async function(e,t){return ma(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;ra(v&&E,e,"internal-error");const I=xa.fromJSON(this.name,E);ra("string"===typeof v,e,"internal-error"),Aa(u,e.name),Aa(h,e.name),ra("boolean"===typeof w,e,"internal-error"),ra("boolean"===typeof b,e,"internal-error"),Aa(d,e.name),Aa(f,e.name),Aa(p,e.name),Aa(m,e.name),Aa(g,e.name),Aa(y,e.name);const S=new Na({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new xa;r.updateFromServerResponse(t);const i=new Na({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ca(i),i}}const Da=new Map;function Ra(e){sa(e instanceof Function,"Expected a class definition");let t=Da.get(e);return t?(sa(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Da.set(e,t),t)}class Pa{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Pa.type="NONE";const Oa=Pa;function La(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Ma{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=La(this.userKey,r.apiKey,i),this.fullPersistenceKey=La("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Na._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ma(Ra(Oa),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ra(Oa);const s=La(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=Na._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(_T){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(_T){}}))),new Ma(i,e,n)):new Ma(i,e,n)}}function Fa(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(za(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ua(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qa(t))return"Blackberry";if(Ka(t))return"Webos";if(ja(t))return"Safari";if((t.includes("chrome/")||Va(t))&&!t.includes("edge/"))return"Chrome";if(Ba(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ua(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi();return/firefox\//i.test(e)}function ja(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Va(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi();return/crios\//i.test(e)}function za(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi();return/iemobile/i.test(e)}function Ba(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi();return/android/i.test(e)}function qa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi();return/blackberry/i.test(e)}function Ka(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi();return/webos/i.test(e)}function Ga(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ha(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi();return Ga(e)||Ba(e)||Ka(e)||qa(e)||/windows phone/i.test(e)||za(e)}function Wa(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Fa(Pi());break;case"Worker":t="".concat(Fa(Pi()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(fo,"/").concat(r)}async function Qa(e,t){return ma(e,"GET","/v2/recaptchaConfig",pa(e,t))}function Ya(e){return void 0!==e&&void 0!==e.getResponse}function Xa(e){return void 0!==e&&void 0!==e.enterprise}class Ja{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function $a(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Zo("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Za(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class el{constructor(e){this.type="recaptcha-enterprise",this.auth=il(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Xa(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Qa(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Ja(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Xa(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));$a("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function tl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new el(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class nl{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(Cx){r(Cx)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Cx){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Cx||void 0===Cx?void 0:Cx.message})}}}class rl{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sl(this),this.idTokenSubscription=new sl(this),this.beforeStateQueue=new nl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yo,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ra(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ma.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Cx){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Cx){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(Cx)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ra(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Cx){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ca(e)}catch(Cx){if((null===Cx||void 0===Cx?void 0:Cx.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Ji(e):null;return t&&ra(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ra(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Ra(e))}))}async initializeRecaptchaConfig(){const e=await Qa(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Ja(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new el(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vi("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ra(e)||this._popupRedirectResolver;ra(t,this,"argument-error"),this.redirectPersistenceManager=await Ma.create(this,[Ra(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return ra(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ra(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Xo.logLevel<=rs.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xo.warn("Auth (".concat(fo,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function il(e){return Ji(e)}class sl{constructor(e){this.auth=e,this.observer=null,this.addObserver=Qi((e=>this.observer=e))}get next(){return ra(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ol(e,t,n){const r=il(e);ra(r._canInitEmulator,r,"emulator-config-failed"),ra(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=al(t),{host:o,port:a}=function(e){const t=al(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ll(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ll(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function al(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ll(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class cl{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ia("not implemented")}_getIdTokenResponse(e){return ia("not implemented")}_linkToIdToken(e,t){return ia("not implemented")}_getReauthenticationResolver(e){return ia("not implemented")}}async function ul(e,t){return ma(e,"POST","/v1/accounts:resetPassword",pa(e,t))}async function hl(e,t){return ma(e,"POST","/v1/accounts:update",t)}async function dl(e,t){return ya(e,"POST","/v1/accounts:signInWithPassword",pa(e,t))}async function fl(e,t){return ma(e,"POST","/v1/accounts:sendOobCode",pa(e,t))}async function pl(e,t){return fl(e,t)}async function ml(e,t){return fl(e,t)}class gl extends cl{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new gl(e,t,"password")}static _fromEmailAndCode(e,t){return new gl(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await tl(e,n,"signInWithPassword");return dl(e,t)}return dl(e,n).catch((async t=>{if(t.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await tl(e,n,"signInWithPassword");return dl(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return ya(e,"POST","/v1/accounts:signInWithEmailLink",pa(e,t))}(e,{email:this._email,oobCode:this._password});default:$o(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return hl(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return ya(e,"POST","/v1/accounts:signInWithEmailLink",pa(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:$o(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function yl(e,t){return ya(e,"POST","/v1/accounts:signInWithIdp",pa(e,t))}class vl extends cl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$o("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Uo(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new vl(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return yl(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,yl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yl(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gi(t)}return e}}const wl={USER_NOT_FOUND:"user-not-found"};class bl extends cl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new bl({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new bl({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ya(e,"POST","/v1/accounts:signInWithPhoneNumber",pa(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ya(e,"POST","/v1/accounts:signInWithPhoneNumber",pa(e,t));if(n.temporaryProof)throw ba(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ya(e,"POST","/v1/accounts:signInWithPhoneNumber",pa(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),wl)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new bl({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class _l{constructor(e){var t,n,r,i,s,o;const a=Hi(Wi(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ra(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Hi(Wi(e)).link,n=t?Hi(Wi(t)).deep_link_id:null,r=Hi(Wi(e)).deep_link_id;return(r?Hi(Wi(r)).link:null)||r||n||t||e}(e);try{return new _l(t)}catch(_T){return null}}}class El{constructor(){this.providerId=El.PROVIDER_ID}static credential(e,t){return gl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=_l.parseLink(t);return ra(n,"argument-error"),gl._fromEmailAndCode(e,n.code,n.tenantId)}}El.PROVIDER_ID="password",El.EMAIL_PASSWORD_SIGN_IN_METHOD="password",El.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Il{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Sl extends Il{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Tl extends Sl{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return ra("providerId"in t&&"signInMethod"in t,"argument-error"),vl._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ra(e.idToken||e.accessToken,"argument-error"),vl._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Tl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Tl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Tl(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(Cx){return null}}}class kl extends Sl{constructor(){super("facebook.com")}static credential(e){return vl._fromParams({providerId:kl.PROVIDER_ID,signInMethod:kl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kl.credentialFromTaggedObject(e)}static credentialFromError(e){return kl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return kl.credential(t.oauthAccessToken)}catch(_T){return null}}}kl.FACEBOOK_SIGN_IN_METHOD="facebook.com",kl.PROVIDER_ID="facebook.com";class Cl extends Sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vl._fromParams({providerId:Cl.PROVIDER_ID,signInMethod:Cl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Cl.credentialFromTaggedObject(e)}static credentialFromError(e){return Cl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Cl.credential(n,r)}catch(_T){return null}}}Cl.GOOGLE_SIGN_IN_METHOD="google.com",Cl.PROVIDER_ID="google.com";class xl extends Sl{constructor(){super("github.com")}static credential(e){return vl._fromParams({providerId:xl.PROVIDER_ID,signInMethod:xl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xl.credentialFromTaggedObject(e)}static credentialFromError(e){return xl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return xl.credential(t.oauthAccessToken)}catch(_T){return null}}}xl.GITHUB_SIGN_IN_METHOD="github.com",xl.PROVIDER_ID="github.com";class Al extends cl{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return yl(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,yl(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yl(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Al(n,i):null}static _create(e,t){return new Al(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nl extends Il{constructor(e){ra(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Nl.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Nl.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Al.fromJSON(e);return ra(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Al._create(r,n)}catch(Cx){return null}}}class Dl extends Sl{constructor(){super("twitter.com")}static credential(e,t){return vl._fromParams({providerId:Dl.PROVIDER_ID,signInMethod:Dl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Dl.credentialFromTaggedObject(e)}static credentialFromError(e){return Dl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Dl.credential(n,r)}catch(_T){return null}}}async function Rl(e,t){return ya(e,"POST","/v1/accounts:signUp",pa(e,t))}Dl.TWITTER_SIGN_IN_METHOD="twitter.com",Dl.PROVIDER_ID="twitter.com";class Pl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Na._fromIdTokenResponse(e,n,r),s=Ol(n);return new Pl({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ol(n);return new Pl({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ol(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ll extends ji{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ll.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ll(e,t,n,r)}}function Ml(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ll._fromErrorAndOperation(e,n,t,r);throw n}))}function Fl(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function Ul(e,t){const n=Ji(e);await Vl(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return ma(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=Fl(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function jl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Sa(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Pl._forOperation(e,"link",r)}async function Vl(e,t,n){await Ca(t);const r=!1===e?"provider-already-linked":"no-such-provider";ra(Fl(t.providerData).has(n)===e,t.auth,r)}async function zl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Sa(e,Ml(r,i,t,e),n);ra(s.idToken,r,"internal-error");const o=Ia(s.idToken);ra(o,r,"internal-error");const{sub:a}=o;return ra(e.uid===a,r,"user-mismatch"),Pl._forOperation(e,i,s)}catch(Cx){throw(null===Cx||void 0===Cx?void 0:Cx.code)==="auth/".concat("user-not-found")&&$o(r,"user-mismatch"),Cx}}async function Bl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Ml(e,r,t),s=await Pl._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function ql(e,t){return Bl(il(e),t)}async function Kl(e,t){const n=Ji(e);return await Vl(!1,n,t.providerId),jl(n,t)}async function Gl(e,t){return zl(Ji(e),t)}async function Hl(e,t){const n=il(e),r=await async function(e,t){return ya(e,"POST","/v1/accounts:signInWithCustomToken",pa(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Pl._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Wl{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Ql._fromServerResponse(e,t):"totpInfo"in t?Yl._fromServerResponse(e,t):$o(e,"internal-error")}}class Ql extends Wl{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Ql(t)}}class Yl extends Wl{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Yl(t)}}function Xl(e,t,n){var r;ra((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ra("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ra(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ra(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Jl(e,t){await async function(e,t){return ma(e,"POST","/v1/accounts:update",pa(e,t))}(Ji(e),{oobCode:t})}async function $l(e,t){const n=Ji(e),r=await ul(n,{oobCode:t}),i=r.requestType;switch(ra(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ra(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ra(r.mfaInfo,n,"internal-error");default:ra(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Wl._fromServerResponse(il(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Zl(e,t){const n={identifier:t,continueUri:aa()?oa():"http://localhost"},{signinMethods:r}=await async function(e,t){return ma(e,"POST","/v1/accounts:createAuthUri",pa(e,t))}(Ji(e),n);return r||[]}async function ec(e,t){const n=Ji(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Xl(n.auth,r,t);const{email:i}=await async function(e,t){return fl(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function tc(e,t,n){const r=Ji(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Xl(r.auth,i,n);const{email:s}=await async function(e,t){return fl(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function nc(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Ji(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Sa(i,async function(e,t){return ma(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function rc(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Sa(e,hl(r,i));await e._updateTokensIfNecessary(s,!0)}class ic{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class sc extends ic{constructor(e,t,n,r){super(e,t,n),this.username=r}}class oc extends ic{constructor(e,t){super(e,"facebook.com",t)}}class ac extends sc{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class lc extends ic{constructor(e,t){super(e,"google.com",t)}}class cc extends sc{constructor(e,t,n){super(e,"twitter.com",t,n)}}function uc(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Ia(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new ic(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new oc(s,i);case"github.com":return new ac(s,i);case"google.com":return new lc(s,i);case"twitter.com":return new cc(s,i,e.screenName||null);case"custom":case"anonymous":return new ic(s,null);default:return new ic(s,r,i)}}(n)}class hc{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new hc("enroll",e,t)}static _fromMfaPendingCredential(e){return new hc("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return hc._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return hc._fromIdtoken(e.multiFactorSession.idToken)}return null}}class dc{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=il(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>Wl._fromServerResponse(n,e)));ra(r.mfaPendingCredential,n,"internal-error");const s=hc._fromMfaPendingCredential(r.mfaPendingCredential);return new dc(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Pl._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return ra(t.user,n,"internal-error"),Pl._forOperation(t.user,t.operationType,o);default:$o(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class fc{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>Wl._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new fc(e)}async getSession(){return hc._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Sa(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Sa(this.user,function(e,t){return ma(e,"POST","/v2/accounts/mfaEnrollment:withdraw",pa(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(Cx){throw Cx}}}const pc=new WeakMap;const mc="__sak";class gc{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(mc,"1"),this.storage.removeItem(mc),Promise.resolve(!0)):Promise.resolve(!1)}catch(_T){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class yc extends gc{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Pi();return ja(e)||Ga(e)}()&&function(){try{return!(!window||window===window.top)}catch(Cx){return!1}}(),this.fallbackToPolling=Ha(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Fi()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}yc.type="LOCAL";const vc=yc;class wc extends gc{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wc.type="SESSION";const bc=wc;class _c{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new _c(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ec(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}_c.receivers=[];class Ic{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Ec("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Sc(){return window}function Tc(){return"undefined"!==typeof Sc().WorkerGlobalScope&&"function"===typeof Sc().importScripts}const kc="firebaseLocalStorageDb",Cc="firebaseLocalStorage",xc="fbase_key";class Ac{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Nc(e,t){return e.transaction([Cc],t?"readwrite":"readonly").objectStore(Cc)}function Dc(){const e=indexedDB.open(kc,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Cc,{keyPath:xc})}catch(Cx){n(Cx)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Cc)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(kc);return new Ac(e).toPromise()}(),t(await Dc()))}))}))}async function Rc(e,t,n){const r=Nc(e,!0).put({[xc]:t,value:n});return new Ac(r).toPromise()}function Pc(e,t){const n=Nc(e,!0).delete(t);return new Ac(n).toPromise()}class Oc{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Dc()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Cx){if(t++>3)throw Cx;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tc()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_c._getInstance(Tc()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ic(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(_T){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dc();return await Rc(e,mc,"1"),await Pc(e,mc),!0}catch(_T){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Rc(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Nc(e,!1).get(t),r=await new Ac(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Pc(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Nc(e,!1).getAll();return new Ac(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Oc.type="LOCAL";const Lc=Oc;const Mc=1e12;class Fc{constructor(e){this.auth=e,this.counter=Mc,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Uc(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Mc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Mc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Mc;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Uc{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;ra(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(Cx){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(Cx){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const jc=Za("rcb"),Vc=new ca(3e4,6e4);class zc{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Sc().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ra(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Ya(Sc().grecaptcha)?Promise.resolve(Sc().grecaptcha):new Promise(((n,r)=>{const i=Sc().setTimeout((()=>{r(Zo(e,"network-request-failed"))}),Vc.get());Sc()[jc]=()=>{Sc().clearTimeout(i),delete Sc()[jc];const s=Sc().grecaptcha;if(!s||!Ya(s))return void r(Zo(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};$a("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Gi({onload:jc,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Zo(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Sc().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Bc{async load(e){return new Fc(e)}clearedOneInstance(){}}const qc="recaptcha",Kc={theme:"light",type:"image"};class Gc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Kc),n=arguments.length>2?arguments[2]:void 0;this.parameters=t,this.type=qc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=il(n),this.isInvisible="invisible"===this.parameters.size,ra("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof e?document.getElementById(e):e;ra(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bc:new zc,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(Cx){return Promise.reject(Cx)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){ra(!this.parameters.sitekey,this.auth,"argument-error"),ra(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ra("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Sc()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){ra(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ra(aa()&&!Tc(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await ma(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);ra(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ra(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Hc{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=bl._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Wc(e,t,n){var r;const i=await n.verify();try{let s;if(ra("string"===typeof i,e,"argument-error"),ra(n.type===qc,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){ra("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ma(e,"POST","/v2/accounts/mfaEnrollment:start",pa(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ra("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;ra(n,e,"missing-multi-factor-info");const o=await function(e,t){return ma(e,"POST","/v2/accounts/mfaSignIn:start",pa(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ma(e,"POST","/v1/accounts:sendVerificationCode",pa(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Qc{constructor(e){this.providerId=Qc.PROVIDER_ID,this.auth=il(e)}verifyPhoneNumber(e,t){return Wc(this.auth,e,Ji(t))}static credential(e,t){return bl._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Qc.credentialFromTaggedObject(t)}static credentialFromError(e){return Qc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?bl._fromTokenResponse(n,r):null}}function Yc(e,t){return t?Ra(t):(ra(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Qc.PROVIDER_ID="phone",Qc.PHONE_SIGN_IN_METHOD="phone";class Xc extends cl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jc(e){return Bl(e.auth,new Xc(e),e.bypassAuthState)}function $c(e){const{auth:t,user:n}=e;return ra(n,t,"internal-error"),zl(n,new Xc(e),e.bypassAuthState)}async function Zc(e){const{auth:t,user:n}=e;return ra(n,t,"internal-error"),jl(n,new Xc(e),e.bypassAuthState)}class eu{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Cx){this.reject(Cx)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(Cx){this.reject(Cx)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jc;case"linkViaPopup":case"linkViaRedirect":return Zc;case"reauthViaPopup":case"reauthViaRedirect":return $c;default:$o(this.auth,"internal-error")}}resolve(e){sa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tu=new ca(2e3,1e4);class nu extends eu{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,nu.currentPopupAction&&nu.currentPopupAction.cancel(),nu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ra(e,this.auth,"internal-error"),e}async onExecution(){sa(1===this.filter.length,"Popup operations only handle one event");const e=Ec();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Zo(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Zo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Zo(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,tu.get())};e()}}nu.currentPopupAction=null;const ru="pendingRedirect",iu=new Map;class su extends eu{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=iu.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=cu(t),r=lu(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Cx){e=()=>Promise.reject(Cx)}iu.set(this.auth._key(),e)}return this.bypassAuthState||iu.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function ou(e,t){return lu(e)._set(cu(t),"true")}function au(e,t){iu.set(e._key(),t)}function lu(e){return Ra(e._redirectPersistence)}function cu(e){return La(ru,e.config.apiKey,e.name)}function uu(e,t,n){return async function(e,t,n){const r=il(e);ta(e,t,Il),await r._initializationPromise;const i=Yc(r,n);return await ou(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function hu(e,t,n){return async function(e,t,n){const r=Ji(e);ta(r.auth,t,Il),await r.auth._initializationPromise;const i=Yc(r.auth,n);await ou(i,r.auth);const s=await pu(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function du(e,t,n){return async function(e,t,n){const r=Ji(e);ta(r.auth,t,Il),await r.auth._initializationPromise;const i=Yc(r.auth,n);await Vl(!1,r,t.providerId),await ou(i,r.auth);const s=await pu(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function fu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=il(e),i=Yc(r,t),s=new su(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function pu(e){const t=Ec("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class mu{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!yu(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Zo(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gu(e))}saveEventToCache(e){this.cachedEventUids.add(gu(e)),this.lastProcessedEventTime=Date.now()}}function gu(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function yu(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function vu(e){return ma(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const wu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bu=/^https?/;function _u(e){const t=oa(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!bu.test(n))return!1;if(wu.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Eu=new ca(3e4,6e4);function Iu(){const e=Sc().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Su=null;function Tu(e){return Su=Su||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){Iu(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Iu(),n(Zo(e,"network-request-failed"))},timeout:Eu.get()})}if(null===(i=null===(r=Sc().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Sc().gapi)||void 0===s?void 0:s.load)){const t=Za("iframefcb");return Sc()[t]=()=>{gapi.load?o():n(Zo(e,"network-request-failed"))},$a("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Su=null,e}))}(e),Su}const ku=new ca(5e3,15e3),Cu="__/auth/iframe",xu="emulator/auth/iframe",Au={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Du(e){const t=e.config;ra(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ua(t,xu):"https://".concat(e.config.authDomain,"/").concat(Cu),r={apiKey:t.apiKey,appName:e.name,v:fo},i=Nu.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Gi(r).slice(1))}const Ru={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Pu{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Cx){}}}function Ou(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Ru),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Pi().toLowerCase();n&&(a=Va(c)?"_blank":n),Ua(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Ga(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Pu(null);const h=window.open(t||"",a,u);ra(h,e,"popup-blocked");try{h.focus()}catch(Cx){}return new Pu(h)}const Lu="__/auth/handler",Mu="emulator/auth/handler",Fu=encodeURIComponent("fac");async function Uu(e,t,n,r,i,s){ra(e.config.authDomain,e,"auth-domain-config-required"),ra(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:fo,eventId:i};if(t instanceof Il){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Sl){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Fu,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Lu);return ua(t,Mu)}(e),"?").concat(Gi(a).slice(1)).concat(c)}const ju="webStorageSupport";const Vu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bc,this._completeRedirectFn=fu,this._overrideRedirectResult=au}async _openPopup(e,t,n,r){var i;sa(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ou(e,await Uu(e,t,n,oa(),r),Ec())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Sc().location.href=e}(await Uu(e,t,n,oa(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(sa(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Tu(e),n=Sc().gapi;return ra(n,e,"internal-error"),t.open({where:document.body,url:Du(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Au,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Zo(e,"network-request-failed"),s=Sc().setTimeout((()=>{r(i)}),ku.get());function o(){Sc().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new mu(e);return t.register("authEvent",(t=>{ra(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ju,{type:ju},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ju];void 0!==i&&t(!!i),$o(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await vu(e);for(const n of t)try{if(_u(n))return}catch(_T){}$o(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ha()||ja()||Ga()}};class zu{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ia("unexpected MultiFactorSessionType")}}}class Bu extends zu{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Bu(e)}_finalizeEnroll(e,t,n){return function(e,t){return ma(e,"POST","/v2/accounts/mfaEnrollment:finalize",pa(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return ma(e,"POST","/v2/accounts/mfaSignIn:finalize",pa(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class qu{constructor(){}static assertion(e){return Bu._fromCredential(e)}}qu.FACTOR_ID="phone";var Ku="@firebase/auth",Gu="0.23.2";class Hu{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ra(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Ni())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Wu;function Qu(){return window}Wu="Browser",oo(new $i("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ra(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Wu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wa(Wu)},c=new rl(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ra);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),oo(new $i("auth-internal",(e=>(e=>new Hu(e))(il(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),vo(Ku,Gu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Wu)),vo(Ku,Gu,"esm2017");async function Yu(e,t,n){var r;const{BuildInfo:i}=Qu();sa(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(sa(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return Ga()?o.ibi=i.packageName:Ba()?o.apn=i.packageName:$o(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Uu(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Xu(e){const{cordova:t}=Qu();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const Ju=20;class $u extends mu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Zu(e){const t=await nh()._get(rh(e));return t&&await nh()._remove(rh(e)),t}function eh(e,t){var n,r;const i=function(e){const t=ih(e),n=t.link?decodeURIComponent(t.link):void 0,r=ih(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return ih(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=ih(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(Cx){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Zo(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function th(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Ju;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function nh(){return Ra(vc)}function rh(e){return La("authEvent",e.config.apiKey,e.name)}function ih(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Hi(n.join("?"))}const sh=class{constructor(){this._redirectPersistence=bc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fu,this._overrideRedirectResult=au}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new $u(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){$o(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=Qu();ra("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ra("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ra("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ra("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ra("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),iu.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:th(),postBody:null,tenantId:e.tenantId,error:Zo(e,"no-auth-event")}}(e,n,r);await function(e,t){return nh()._set(rh(e),t)}(e,s);const o=await Yu(e,s,t);return async function(e,t,n){const{cordova:r}=Qu();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(Zo(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),Ba()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await Xu(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Qu(),n={};Ga()?n.iosBundleId=t.packageName:Ba()?n.androidPackageName=t.packageName:$o(e,"operation-not-supported-in-this-environment"),await vu(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Qu(),s=setTimeout((async()=>{await Zu(e),t.onEvent(oh())}),500),o=async n=>{clearTimeout(s);const r=await Zu(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=eh(r,n.url)),t.onEvent(i||oh())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");Qu().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(Cx){console.error(Cx)}}}};function oh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Zo("no-auth-event")}}function ah(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function lh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi();return!("file:"!==ah()&&"ionic:"!==ah()&&"capacitor:"!==ah()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi();return Fi()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pi();return/Edge\/\d+/.test(e)}(e)}function uh(){try{const e=self.localStorage,t=Ec();if(e)return e.setItem(t,"1"),e.removeItem(t),!ch()||Ui()}catch(Cx){return hh()&&Ui()}return!1}function hh(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function dh(){return("http:"===ah()||"https:"===ah()||Li()||lh())&&!(Mi()||Oi())&&uh()&&!hh()}function fh(){return lh()&&"undefined"!==typeof document}const ph={LOCAL:"local",NONE:"none",SESSION:"session"},mh=ra,gh="persistence";async function yh(e){await e._initializationPromise;const t=vh(),n=La(gh,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function vh(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(Cx){return null}}const wh=ra;class bh{constructor(){this.browserResolver=Ra(Vu),this.cordovaResolver=Ra(sh),this.underlyingResolver=null,this._redirectPersistence=bc,this._completeRedirectFn=fu,this._overrideRedirectResult=au}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return fh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wh(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!fh()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function _h(e){return e.unwrap()}function Eh(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new kh(e,function(e,t){var n;const r=Ji(e),i=t;return ra(t.customData.operationType,r,"argument-error"),ra(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),dc._fromError(r,i)}(e,t))}else if(r){const e=Ih(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Ih(e){const{_tokenResponse:t}=e instanceof ji?e.customData:e;if(!t)return null;if(!(e instanceof ji)&&"temporaryProof"in t&&"phoneNumber"in t)return Qc.credentialFromResult(e);const n=t.providerId;if(!n||n===jo.PASSWORD)return null;let r;switch(n){case jo.GOOGLE:r=Cl;break;case jo.FACEBOOK:r=kl;break;case jo.GITHUB:r=xl;break;case jo.TWITTER:r=Dl;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Al._create(n,o):vl._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Tl(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof ji?r.credentialFromError(e):r.credentialFromResult(e)}function Sh(e,t){return t.catch((t=>{throw t instanceof ji&&Eh(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Ih(r)),additionalUserInfo:uc(e),user:Ch.getOrCreate(n)};var r}))}async function Th(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Sh(e,n.confirm(t))}}class kh{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Sh(_h(this.auth),this.resolver.resolveSignIn(e))}}class Ch{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Ji(e);return pc.has(t)||pc.set(t,fc._fromUser(t)),pc.get(t)}(e)}static getOrCreate(e){return Ch.USER_MAP.has(e)||Ch.USER_MAP.set(e,new Ch(e)),Ch.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Sh(this.auth,Kl(this._delegate,e))}async linkWithPhoneNumber(e,t){return Th(this.auth,async function(e,t,n){const r=Ji(e);await Vl(!1,r,"phone");const i=await Wc(r.auth,t,Ji(n));return new Hc(i,(e=>Kl(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Sh(this.auth,async function(e,t,n){const r=Ji(e);ta(r.auth,t,Il);const i=Yc(r.auth,n);return new nu(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,bh))}async linkWithRedirect(e){return await yh(il(this.auth)),du(this._delegate,e,bh)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Sh(this.auth,Gl(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Th(this.auth,async function(e,t,n){const r=Ji(e),i=await Wc(r.auth,t,Ji(n));return new Hc(i,(e=>Gl(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Sh(this.auth,async function(e,t,n){const r=Ji(e);ta(r.auth,t,Il);const i=Yc(r.auth,n);return new nu(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,bh))}async reauthenticateWithRedirect(e){return await yh(il(this.auth)),hu(this._delegate,e,bh)}sendEmailVerification(e){return ec(this._delegate,e)}async unlink(e){return await Ul(this._delegate,e),this}updateEmail(e){return function(e,t){return rc(Ji(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return rc(Ji(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await jl(Ji(e),t)}(this._delegate,e)}updateProfile(e){return nc(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return tc(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ch.USER_MAP=new WeakMap;const xh=ra;class Ah{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;xh(n,"invalid-api-key",{appName:e.name}),xh(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?bh:void 0;this._delegate=t.initialize({options:{persistence:Dh(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Wo),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ch.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){ol(this._delegate,e,t)}applyActionCode(e){return Jl(this._delegate,e)}checkActionCode(e){return $l(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await ul(Ji(e),{oobCode:t,newPassword:n})}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Sh(this._delegate,async function(e,t,n){var r;const i=il(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await tl(i,s,"signUpPassword");o=Rl(i,e)}else o=Rl(i,s).catch((async e=>{if(e.code==="auth/".concat("missing-recaptcha-token")){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await tl(i,s,"signUpPassword");return Rl(i,e)}return Promise.reject(e)}));const a=await o.catch((e=>Promise.reject(e))),l=await Pl._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Zl(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=_l.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){xh(dh(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await il(e)._initializationPromise,fu(e,t,!1)}(this._delegate,bh);return e?Sh(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){il(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Nh(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Nh(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){var r;const i=il(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(e,t){ra(t.handleCodeInApp,i,"argument-error"),t&&Xl(i,e,t)}if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await tl(i,s,"getOobCode",!0);o(e,n),await ml(i,e)}else o(s,n),await ml(i,s).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await tl(i,s,"getOobCode",!0);o(e,n),await ml(i,e)}}))}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){var r;const i=il(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await tl(i,s,"getOobCode",!0);n&&Xl(i,e,n),await pl(i,e)}else n&&Xl(i,s,n),await pl(i,s).catch((async e=>{if(e.code!=="auth/".concat("missing-recaptcha-token"))return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await tl(i,s,"getOobCode",!0);n&&Xl(i,e,n),await pl(i,e)}}))}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){mh(Object.values(ph).includes(t),e,"invalid-persistence-type"),Mi()?mh(t!==ph.SESSION,e,"unsupported-persistence-type"):Oi()?mh(t===ph.NONE,e,"unsupported-persistence-type"):hh()?mh(t===ph.NONE||t===ph.LOCAL&&Ui(),e,"unsupported-persistence-type"):mh(t===ph.NONE||uh(),e,"unsupported-persistence-type")}(this._delegate,e),e){case ph.SESSION:t=bc;break;case ph.LOCAL:t=await Ra(Lc)._isAvailable()?Lc:vc;break;case ph.NONE:t=Oa;break;default:return $o("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Sh(this._delegate,async function(e){var t;const n=il(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Pl({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Rl(n,{returnSecureToken:!0}),i=await Pl._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Sh(this._delegate,ql(this._delegate,e))}signInWithCustomToken(e){return Sh(this._delegate,Hl(this._delegate,e))}signInWithEmailAndPassword(e,t){return Sh(this._delegate,function(e,t,n){return ql(Ji(e),El.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Sh(this._delegate,async function(e,t,n){const r=Ji(e),i=El.credentialWithLink(t,n||oa());return ra(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ql(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Th(this._delegate,async function(e,t,n){const r=il(e),i=await Wc(r,t,Ji(n));return new Hc(i,(e=>ql(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return xh(dh(),this._delegate,"operation-not-supported-in-this-environment"),Sh(this._delegate,async function(e,t,n){const r=il(e);ta(e,t,Il);const i=Yc(r,n);return new nu(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,bh))}async signInWithRedirect(e){return xh(dh(),this._delegate,"operation-not-supported-in-this-environment"),await yh(this._delegate),uu(this._delegate,e,bh)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await $l(Ji(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Nh(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Ch.getOrCreate(e)),error:t,complete:n}}function Dh(e,t){const n=function(e,t){const n=vh();if(!n)return[];const r=La(gh,e,t);switch(n.getItem(r)){case ph.NONE:return[Oa];case ph.LOCAL:return[Lc,bc];case ph.SESSION:return[bc];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Lc)||n.push(Lc),"undefined"!==typeof window)for(const r of[vc,bc])n.includes(r)||n.push(r);return n.includes(Oa)||n.push(Oa),n}Ah.Persistence=ph;class Rh{constructor(){this.providerId="phone",this._delegate=new Qc(_h(Fo.auth()))}static credential(e,t){return Qc.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}Rh.PHONE_SIGN_IN_METHOD=Qc.PHONE_SIGN_IN_METHOD,Rh.PROVIDER_ID=Qc.PROVIDER_ID;const Ph=ra;class Oh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fo.app();var r;Ph(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new Gc(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var Lh;(Lh=Fo).INTERNAL.registerComponent(new $i("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Ah(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Vo,PASSWORD_RESET:zo,RECOVER_EMAIL:Bo,REVERT_SECOND_FACTOR_ADDITION:qo,VERIFY_AND_CHANGE_EMAIL:Ko,VERIFY_EMAIL:Go}},EmailAuthProvider:El,FacebookAuthProvider:kl,GithubAuthProvider:xl,GoogleAuthProvider:Cl,OAuthProvider:Tl,SAMLAuthProvider:Nl,PhoneAuthProvider:Rh,PhoneMultiFactorGenerator:qu,RecaptchaVerifier:Oh,TwitterAuthProvider:Dl,Auth:Ah,AuthCredential:cl,Error:ji}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Lh.registerVersion("@firebase/auth-compat","0.4.2");var Mh,Fh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Uh={},jh=jh||{},Vh=Fh||self;function zh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Bh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var qh="closure_uid_"+(1e9*Math.random()>>>0),Kh=0;function Gh(e,t,n){return e.call.apply(e.bind,arguments)}function Hh(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Wh(e,t,n){return(Wh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gh:Hh).apply(null,arguments)}function Qh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Yh(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Xh(){this.s=this.s,this.o=this.o}Xh.prototype.s=!1,Xh.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,qh)&&e[qh]||(e[qh]=++Kh))},Xh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Jh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function $h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Zh(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(zh(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function ed(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ed.prototype.h=function(){this.defaultPrevented=!0};var td=function(){if(!Vh.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Vh.addEventListener("test",(()=>{}),t),Vh.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function nd(e){return/^[\s\xa0]*$/.test(e)}function rd(){var e=Vh.navigator;return e&&(e=e.userAgent)?e:""}function id(e){return-1!=rd().indexOf(e)}function sd(e){return sd[" "](e),e}sd[" "]=function(){};var od,ad,ld=id("Opera"),cd=id("Trident")||id("MSIE"),ud=id("Edge"),hd=ud||cd,dd=id("Gecko")&&!(-1!=rd().toLowerCase().indexOf("webkit")&&!id("Edge"))&&!(id("Trident")||id("MSIE"))&&!id("Edge"),fd=-1!=rd().toLowerCase().indexOf("webkit")&&!id("Edge");function pd(){var e=Vh.document;return e?e.documentMode:void 0}e:{var md="",gd=function(){var e=rd();return dd?/rv:([^\);]+)(\)|;)/.exec(e):ud?/Edge\/([\d\.]+)/.exec(e):cd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):fd?/WebKit\/(\S+)/.exec(e):ld?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(gd&&(md=gd?gd[1]:""),cd){var yd=pd();if(null!=yd&&yd>parseFloat(md)){od=String(yd);break e}}od=md}if(Vh.document&&cd){var vd=pd();ad=vd||(parseInt(od,10)||void 0)}else ad=void 0;var wd=ad;function bd(e,t){if(ed.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(dd){e:{try{sd(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:_d[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&bd.$.h.call(this)}}Yh(bd,ed);var _d={2:"touch",3:"pen",4:"mouse"};bd.prototype.h=function(){bd.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ed="closure_listenable_"+(1e6*Math.random()|0),Id=0;function Sd(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Id,this.fa=this.ia=!1}function Td(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function kd(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Cd(e){const t={};for(const n in e)t[n]=e[n];return t}const xd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ad(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<xd.length;t++)n=xd[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Nd(e){this.src=e,this.g={},this.h=0}function Dd(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Jh(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Td(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Rd(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Nd.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Rd(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Sd(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Pd="closure_lm_"+(1e6*Math.random()|0),Od={};function Ld(e,t,n,r,i){if(r&&r.once)return Fd(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ld(e,t[s],n,r,i);return null}return n=Kd(n),e&&e[Ed]?e.O(t,n,Bh(r)?!!r.capture:!!r,i):Md(e,t,n,!1,r,i)}function Md(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Bh(i)?!!i.capture:!!i,a=Bd(e);if(a||(e[Pd]=a=new Nd(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=zd;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)td||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Vd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Fd(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Fd(e,t[s],n,r,i);return null}return n=Kd(n),e&&e[Ed]?e.P(t,n,Bh(r)?!!r.capture:!!r,i):Md(e,t,n,!0,r,i)}function Ud(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Ud(e,t[s],n,r,i);else r=Bh(r)?!!r.capture:!!r,n=Kd(n),e&&e[Ed]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Rd(s=e.g[t],n,r,i))&&(Td(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Bd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Rd(t,n,r,i)),(n=-1<e?t[e]:null)&&jd(n))}function jd(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ed])Dd(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Vd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Bd(t))?(Dd(n,e),0==n.h&&(n.src=null,t[Pd]=null)):Td(e)}}}function Vd(e){return e in Od?Od[e]:Od[e]="on"+e}function zd(e,t){if(e.fa)e=!0;else{t=new bd(t,this);var n=e.listener,r=e.la||e.src;e.ia&&jd(e),e=n.call(r,t)}return e}function Bd(e){return(e=e[Pd])instanceof Nd?e:null}var qd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kd(e){return"function"===typeof e?e:(e[qd]||(e[qd]=function(t){return e.handleEvent(t)}),e[qd])}function Gd(){Xh.call(this),this.i=new Nd(this),this.S=this,this.J=null}function Hd(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new ed(t,e);else if(t instanceof ed)t.target=t.target||e;else{var i=t;Ad(t=new ed(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Wd(o,r,!0,t)&&i}if(i=Wd(o=t.g=e,r,!0,t)&&i,i=Wd(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Wd(o=t.g=n[s],r,!1,t)&&i}function Wd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Dd(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Yh(Gd,Xh),Gd.prototype[Ed]=!0,Gd.prototype.removeEventListener=function(e,t,n,r){Ud(this,e,t,n,r)},Gd.prototype.N=function(){if(Gd.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Td(n[r]);delete t.g[e],t.h--}}this.J=null},Gd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Gd.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Qd=Vh.JSON.stringify;function Yd(){var e=nf;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Xd=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Jd),(e=>e.reset()));class Jd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function $d(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Zd(e){Vh.setTimeout((()=>{throw e}),0)}let ef,tf=!1,nf=new class{constructor(){this.h=this.g=null}add(e,t){const n=Xd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},rf=()=>{const e=Vh.Promise.resolve(void 0);ef=()=>{e.then(sf)}};var sf=()=>{for(var e;e=Yd();){try{e.h.call(e.g)}catch(n){Zd(n)}var t=Xd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}tf=!1};function of(e,t){Gd.call(this),this.h=e||1,this.g=t||Vh,this.j=Wh(this.qb,this),this.l=Date.now()}function af(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function lf(e,t,n){if("function"===typeof e)n&&(e=Wh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Wh(e.handleEvent,e)}return 2147483647<Number(t)?-1:Vh.setTimeout(e,t||0)}function cf(e){e.g=lf((()=>{e.g=null,e.i&&(e.i=!1,cf(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Yh(of,Gd),(Mh=of.prototype).ga=!1,Mh.T=null,Mh.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Hd(this,"tick"),this.ga&&(af(this),this.start()))}},Mh.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Mh.N=function(){of.$.N.call(this),af(this),delete this.g};class uf extends Xh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:cf(this)}N(){super.N(),this.g&&(Vh.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hf(e){Xh.call(this),this.h=e,this.g={}}Yh(hf,Xh);var df=[];function ff(e,t,n,r){Array.isArray(n)||(n&&(df[0]=n.toString()),n=df);for(var i=0;i<n.length;i++){var s=Ld(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function pf(e){kd(e.g,(function(e,t){this.g.hasOwnProperty(t)&&jd(e)}),e),e.g={}}function mf(){this.g=!0}function gf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Qd(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}hf.prototype.N=function(){hf.$.N.call(this),pf(this)},hf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},mf.prototype.Ea=function(){this.g=!1},mf.prototype.info=function(){};var yf={},vf=null;function wf(){return vf=vf||new Gd}function bf(e){ed.call(this,yf.Ta,e)}function _f(e){const t=wf();Hd(t,new bf(t))}function Ef(e,t){ed.call(this,yf.STAT_EVENT,e),this.stat=t}function If(e){const t=wf();Hd(t,new Ef(t,e))}function Sf(e,t){ed.call(this,yf.Ua,e),this.size=t}function Tf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Vh.setTimeout((function(){e()}),t)}yf.Ta="serverreachability",Yh(bf,ed),yf.STAT_EVENT="statevent",Yh(Ef,ed),yf.Ua="timingevent",Yh(Sf,ed);var kf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Cf={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function xf(){}function Af(e){return e.h||(e.h=e.i())}function Nf(){}xf.prototype.h=null;var Df,Rf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Pf(){ed.call(this,"d")}function Of(){ed.call(this,"c")}function Lf(){}function Mf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new hf(this),this.P=Uf,e=hd?125:void 0,this.V=new of(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ff}function Ff(){this.i=null,this.g="",this.h=!1}Yh(Pf,ed),Yh(Of,ed),Yh(Lf,xf),Lf.prototype.g=function(){return new XMLHttpRequest},Lf.prototype.i=function(){return{}},Df=new Lf;var Uf=45e3,jf={},Vf={};function zf(e,t,n){e.L=1,e.v=op(tp(t)),e.s=n,e.S=!0,Bf(e,null)}function Bf(e,t){e.G=Date.now(),Hf(e),e.A=tp(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),wp(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Ff,e.g=bm(e.l,n?t:null,!e.s),0<e.O&&(e.M=new uf(Wh(e.Pa,e,e.g),e.O)),ff(e.U,e.g,"readystatechange",e.nb),t=e.I?Cd(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),_f(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function qf(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Kf(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=Gf(e,n),r==Vf){4==t&&(e.o=4,If(14),i=!1),gf(e.j,e.m,null,"[Incomplete Response]");break}if(r==jf){e.o=4,If(15),gf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}gf(e.j,e.m,r,null),Jf(e,r)}qf(e)&&r!=Vf&&r!=jf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,If(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),dm(t),t.M=!0,If(11))):(gf(e.j,e.m,n,"[Invalid Chunked Response]"),Xf(e),Yf(e))}function Gf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Vf:(n=Number(t.substring(n,r)),isNaN(n)?jf:(r+=1)+n>t.length?Vf:(t=t.slice(r,r+n),e.C=r+n,t))}function Hf(e){e.Y=Date.now()+e.P,Wf(e,e.P)}function Wf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Tf(Wh(e.lb,e),t)}function Qf(e){e.B&&(Vh.clearTimeout(e.B),e.B=null)}function Yf(e){0==e.l.H||e.J||mm(e.l,e)}function Xf(e){Qf(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,af(e.V),pf(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Jf(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||kp(n.i,e)))if(!e.K&&kp(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;pm(n),im(n)}hm(n),If(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Tf(Wh(n.ib,n),6e3));if(1>=Tp(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else ym(n,11)}else if((e.K||n.g==e)&&pm(n),!nd(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Cp(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,sp(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=wm(r,r.J?r.pa:null,r.Y),o.K){xp(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(Qf(a),Hf(a)),r.g=o}else um(r);0<n.j.length&&om(n)}else"stop"!=c[0]&&"close"!=c[0]||ym(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ym(n,7):rm(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}_f()}catch(c){}}function $f(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(zh(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(zh(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(zh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Mh=Mf.prototype).setTimeout=function(e){this.P=e},Mh.nb=function(e){e=e.target;const t=this.M;t&&3==Jp(e)?t.l():this.Pa(e)},Mh.Pa=function(e){try{if(e==this.g)e:{const u=Jp(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||hd||this.g&&(this.h.h||this.g.ja()||$p(this.g)))){this.J||4!=u||7==t||_f(),Qf(this);var n=this.g.da();this.ca=n;t:if(qf(this)){var r=$p(this.g);e="";var i=r.length,s=4==Jp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Xf(this),Yf(this);var o="";break t}this.h.i=new Vh.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nd(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,If(12),Xf(this),Yf(this);break e}gf(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jf(this,n)}this.S?(Kf(this,u,o),hd&&this.i&&3==u&&(ff(this.U,this.V,"tick",this.mb),this.V.start())):(gf(this.j,this.m,o,null),Jf(this,o)),4==u&&Xf(this),this.i&&!this.J&&(4==u?mm(this.l,this):(this.i=!1,Hf(this)))}else(function(e){const t={};e=(e.g&&2<=Jp(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(nd(e[r]))continue;var n=$d(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,If(12)):(this.o=0,If(13)),Xf(this),Yf(this)}}}catch(u){}},Mh.mb=function(){if(this.g){var e=Jp(this.g),t=this.g.ja();this.C<t.length&&(Qf(this),Kf(this,e,t),this.i&&4!=e&&Hf(this))}},Mh.cancel=function(){this.J=!0,Xf(this)},Mh.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(_f(),If(17)),Xf(this),this.o=2,Yf(this)):Wf(this,this.Y-e)};var Zf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ep(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ep){this.h=e.h,np(this,e.j),this.s=e.s,this.g=e.g,rp(this,e.m),this.l=e.l;var t=e.i,n=new mp;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ip(this,n),this.o=e.o}else e&&(t=String(e).match(Zf))?(this.h=!1,np(this,t[1]||"",!0),this.s=ap(t[2]||""),this.g=ap(t[3]||"",!0),rp(this,t[4]),this.l=ap(t[5]||"",!0),ip(this,t[6]||"",!0),this.o=ap(t[7]||"")):(this.h=!1,this.i=new mp(null,this.h))}function tp(e){return new ep(e)}function np(e,t,n){e.j=n?ap(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function rp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ip(e,t,n){t instanceof mp?(e.i=t,function(e,t){t&&!e.j&&(gp(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(yp(this,t),wp(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=lp(t,fp)),e.i=new mp(t,e.h))}function sp(e,t,n){e.i.set(t,n)}function op(e){return sp(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ap(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function lp(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,cp),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function cp(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ep.prototype.toString=function(){var e=[],t=this.j;t&&e.push(lp(t,up,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(lp(t,up,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(lp(n,"/"==n.charAt(0)?dp:hp,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",lp(n,pp)),e.join("")};var up=/[#\/\?@]/g,hp=/[#\?:]/g,dp=/[#\?]/g,fp=/[#\?@]/g,pp=/#/g;function mp(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function gp(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function yp(e,t){gp(e),t=bp(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vp(e,t){return gp(e),t=bp(e,t),e.g.has(t)}function wp(e,t,n){yp(e,t),0<n.length&&(e.i=null,e.g.set(bp(e,t),$h(n)),e.h+=n.length)}function bp(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Mh=mp.prototype).add=function(e,t){gp(this),this.i=null,e=bp(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Mh.forEach=function(e,t){gp(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Mh.ta=function(){gp(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Mh.Z=function(e){gp(this);let t=[];if("string"===typeof e)vp(this,e)&&(t=t.concat(this.g.get(bp(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Mh.set=function(e,t){return gp(this),this.i=null,vp(this,e=bp(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Mh.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Mh.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var _p=class{constructor(e,t){this.g=e,this.map=t}};function Ep(e){this.l=e||Ip,Vh.PerformanceNavigationTiming?e=0<(e=Vh.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Vh.g&&Vh.g.Ka&&Vh.g.Ka()&&Vh.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ip=10;function Sp(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Tp(e){return e.h?1:e.g?e.g.size:0}function kp(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Cp(e,t){e.g?e.g.add(t):e.h=t}function xp(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ap(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return $h(e.i)}Ep.prototype.cancel=function(){if(this.i=Ap(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Np,Dp=class{stringify(e){return Vh.JSON.stringify(e,void 0)}parse(e){return Vh.JSON.parse(e,void 0)}};function Rp(){this.g=new Dp}function Pp(e,t,n){const r=n||"";try{$f(e,(function(e,n){let i=e;Bh(e)&&(i=Qd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Cx){throw t.push(r+"type="+encodeURIComponent("_badmap")),Cx}}function Op(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Lp(e){this.l=e.fc||null,this.j=e.ob||!1}function Mp(e,t){Gd.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Fp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yh(Lp,xf),Lp.prototype.g=function(){return new Mp(this.l,this.j)},Lp.prototype.i=(Np={},function(){return Np}),Yh(Mp,Gd);var Fp=0;function Up(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function jp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Vp(e)}function Vp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Mh=Mp.prototype).open=function(e,t){if(this.readyState!=Fp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Vp(this)},Mh.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Vh).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Mh.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jp(this)),this.readyState=Fp},Mh.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Vp(this)),this.g&&(this.readyState=3,Vp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Vh.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Up(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Mh.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?jp(this):Vp(this),3==this.readyState&&Up(this)}},Mh.Za=function(e){this.g&&(this.response=this.responseText=e,jp(this))},Mh.Ya=function(e){this.g&&(this.response=e,jp(this))},Mh.ka=function(){this.g&&jp(this)},Mh.setRequestHeader=function(e,t){this.v.append(e,t)},Mh.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Mh.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Mp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var zp=Vh.JSON.parse;function Bp(e){Gd.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=qp,this.L=this.M=!1}Yh(Bp,Gd);var qp="",Kp=/^https?$/i,Gp=["POST","PUT"];function Hp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Wp(e),Yp(e)}function Wp(e){e.F||(e.F=!0,Hd(e,"complete"),Hd(e,"error"))}function Qp(e){if(e.h&&"undefined"!=typeof jh&&(!e.C[1]||4!=Jp(e)||2!=e.da()))if(e.v&&4==Jp(e))lf(e.La,0,e);else if(Hd(e,"readystatechange"),4==Jp(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Zf)[1]||null;!i&&Vh.self&&Vh.self.location&&(i=Vh.self.location.protocol.slice(0,-1)),r=!Kp.test(i?i.toLowerCase():"")}n=r}if(n)Hd(e,"complete"),Hd(e,"success");else{e.m=6;try{var s=2<Jp(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Wp(e)}}finally{Yp(e)}}}function Yp(e,t){if(e.g){Xp(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Hd(e,"ready");try{n.onreadystatechange=r}catch(Cx){}}}function Xp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Vh.clearTimeout(e.A),e.A=null)}function Jp(e){return e.g?e.g.readyState:0}function $p(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case qp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(rg){return null}}function Zp(e){let t="";return kd(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function em(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Zp(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):sp(e,t,n))}function tm(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function nm(e){this.Ga=0,this.j=[],this.l=new mf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=tm("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=tm("baseRetryDelayMs",5e3,e),this.hb=tm("retryDelaySeedMs",1e4,e),this.eb=tm("forwardChannelMaxRetries",2,e),this.xa=tm("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Ep(e&&e.concurrentRequestLimit),this.Ja=new Rp,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function rm(e){if(sm(e),3==e.H){var t=e.W++,n=tp(e.I);if(sp(n,"SID",e.K),sp(n,"RID",t),sp(n,"TYPE","terminate"),lm(e,n),(t=new Mf(e,e.l,t)).L=2,t.v=op(tp(n)),n=!1,Vh.navigator&&Vh.navigator.sendBeacon)try{n=Vh.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Vh.Image&&((new Image).src=t.v,n=!0),n||(t.g=bm(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Hf(t)}vm(e)}function im(e){e.g&&(dm(e),e.g.cancel(),e.g=null)}function sm(e){im(e),e.u&&(Vh.clearTimeout(e.u),e.u=null),pm(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Vh.clearTimeout(e.m),e.m=null)}function om(e){if(!Sp(e.i)&&!e.m){e.m=!0;var t=e.Na;ef||rf(),tf||(ef(),tf=!0),nf.add(t,e),e.C=0}}function am(e,t){var n;n=t?t.m:e.W++;const r=tp(e.I);sp(r,"SID",e.K),sp(r,"RID",n),sp(r,"AID",e.V),lm(e,r),e.o&&e.s&&em(r,e.o,e.s),n=new Mf(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=cm(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Cp(e.i,n),zf(n,r,t)}function lm(e,t){e.na&&kd(e.na,(function(e,n){sp(t,n,e)})),e.h&&$f({},(function(e,n){sp(t,n,e)}))}function cm(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Wh(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Pp(a,e,"req"+n+"_")}catch(pg){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function um(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ef||rf(),tf||(ef(),tf=!0),nf.add(t,e),e.A=0}}function hm(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Tf(Wh(e.Ma,e),gm(e,e.A)),e.A++,!0)}function dm(e){null!=e.B&&(Vh.clearTimeout(e.B),e.B=null)}function fm(e){e.g=new Mf(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=tp(e.wa);sp(t,"RID","rpc"),sp(t,"SID",e.K),sp(t,"AID",e.V),sp(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&sp(t,"TO",e.qa),sp(t,"TYPE","xmlhttp"),lm(e,t),e.o&&e.s&&em(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=op(tp(t)),n.s=null,n.S=!0,Bf(n,e)}function pm(e){null!=e.v&&(Vh.clearTimeout(e.v),e.v=null)}function mm(e,t){var n=null;if(e.g==t){pm(e),dm(e),e.g=null;var r=2}else{if(!kp(e.i,t))return;n=t.F,xp(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Hd(r=wf(),new Sf(r,n)),om(e)}else um(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Tp(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Tf(Wh(e.Na,e,t),gm(e,e.C)),e.C++,!0))}(e,t)||2==r&&hm(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ym(e,5);break;case 4:ym(e,10);break;case 3:ym(e,6);break;default:ym(e,2)}}function gm(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ym(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Wh(e.pb,e);n||(n=new ep("//www.google.com/images/cleardot.gif"),Vh.location&&"http"==Vh.location.protocol||np(n,"https"),op(n)),function(e,t){const n=new mf;if(Vh.Image){const r=new Image;r.onload=Qh(Op,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Qh(Op,n,r,"TestLoadImage: error",!1,t),r.onabort=Qh(Op,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Qh(Op,n,r,"TestLoadImage: timeout",!1,t),Vh.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else If(2);e.H=0,e.h&&e.h.za(t),vm(e),sm(e)}function vm(e){if(e.H=0,e.ma=[],e.h){const t=Ap(e.i);0==t.length&&0==e.j.length||(Zh(e.ma,t),Zh(e.ma,e.j),e.i.i.length=0,$h(e.j),e.j.length=0),e.h.ya()}}function wm(e,t,n){var r=n instanceof ep?tp(n):new ep(n);if(""!=r.g)t&&(r.g=t+"."+r.g),rp(r,r.m);else{var i=Vh.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new ep(null);r&&np(s,r),t&&(s.g=t),i&&rp(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&sp(r,n,t),sp(r,"VER",e.ra),lm(e,r),r}function bm(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Bp(new Lp({ob:!0})):new Bp(e.va)).Oa(e.J),t}function _m(){}function Em(){if(cd&&!(10<=Number(wd)))throw Error("Environmental error: no available transport.")}function Im(e,t){Gd.call(this),this.g=new nm(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!nd(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!nd(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new km(this)}function Sm(e){Pf.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Tm(){Of.call(this),this.status=1}function km(e){this.g=e}function Cm(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function xm(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Am(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Mh=Bp.prototype).Oa=function(e){this.M=e},Mh.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Df.g(),this.C=this.u?Af(this.u):Af(Df),this.g.onreadystatechange=Wh(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Hp(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Vh.FormData&&e instanceof Vh.FormData,!(0<=Jh(Gp,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Xp(this),0<this.B&&((this.L=function(e){return cd&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wh(this.ua,this)):this.A=lf(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Hp(this,s)}},Mh.ua=function(){"undefined"!=typeof jh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hd(this,"timeout"),this.abort(8))},Mh.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Hd(this,"complete"),Hd(this,"abort"),Yp(this))},Mh.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yp(this,!0)),Bp.$.N.call(this)},Mh.La=function(){this.s||(this.G||this.v||this.l?Qp(this):this.kb())},Mh.kb=function(){Qp(this)},Mh.isActive=function(){return!!this.g},Mh.da=function(){try{return 2<Jp(this)?this.g.status:-1}catch(Np){return-1}},Mh.ja=function(){try{return this.g?this.g.responseText:""}catch(Np){return""}},Mh.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),zp(t)}},Mh.Ia=function(){return this.m},Mh.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Mh=nm.prototype).ra=8,Mh.H=1,Mh.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Mf(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Cd(s),Ad(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=cm(this,i,t),sp(n=tp(this.I),"RID",e),sp(n,"CVER",22),this.F&&sp(n,"X-HTTP-Session-Id",this.F),lm(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Zp(s)))+"&"+t:this.o&&em(n,this.o,s)),Cp(this.i,i),this.bb&&sp(n,"TYPE","init"),this.P?(sp(n,"$req",t),sp(n,"SID","null"),i.aa=!0,zf(i,n,null)):zf(i,n,t),this.H=2}}else 3==this.H&&(e?am(this,e):0==this.j.length||Sp(this.i)||am(this))},Mh.Ma=function(){if(this.u=null,fm(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Tf(Wh(this.jb,this),e)}},Mh.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,If(10),im(this),fm(this))},Mh.ib=function(){null!=this.v&&(this.v=null,im(this),hm(this),If(19))},Mh.pb=function(e){e?(this.l.info("Successfully pinged google.com"),If(2)):(this.l.info("Failed to ping google.com"),If(1))},Mh.isActive=function(){return!!this.h&&this.h.isActive(this)},(Mh=_m.prototype).Ba=function(){},Mh.Aa=function(){},Mh.za=function(){},Mh.ya=function(){},Mh.isActive=function(){return!0},Mh.Va=function(){},Em.prototype.g=function(e,t){return new Im(e,t)},Yh(Im,Gd),Im.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;If(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=wm(e,null,e.Y),om(e)},Im.prototype.close=function(){rm(this.g)},Im.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Qd(e),e=n);t.j.push(new _p(t.fb++,e)),3==t.H&&om(t)},Im.prototype.N=function(){this.g.h=null,delete this.j,rm(this.g),delete this.g,Im.$.N.call(this)},Yh(Sm,Pf),Yh(Tm,Of),Yh(km,_m),km.prototype.Ba=function(){Hd(this.g,"a")},km.prototype.Aa=function(e){Hd(this.g,new Sm(e))},km.prototype.za=function(e){Hd(this.g,new Tm)},km.prototype.ya=function(){Hd(this.g,"b")},Yh(Cm,(function(){this.blockSize=-1})),Cm.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Cm.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)xm(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){xm(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){xm(this,r),i=0;break}}this.h=i,this.i+=t},Cm.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Nm={};function Dm(e){return-128<=e&&128>e?function(e,t){var n=Nm;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Am([0|e],0>e?-1:0)})):new Am([0|e],0>e?-1:0)}function Rm(e){if(isNaN(e)||!isFinite(e))return Om;if(0>e)return jm(Rm(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Pm;return new Am(t,0)}var Pm=4294967296,Om=Dm(0),Lm=Dm(1),Mm=Dm(16777216);function Fm(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Um(e){return-1==e.h}function jm(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Am(n,~e.h).add(Lm)}function Vm(e,t){return e.add(jm(t))}function zm(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Bm(e,t){this.g=e,this.h=t}function qm(e,t){if(Fm(t))throw Error("division by zero");if(Fm(e))return new Bm(Om,Om);if(Um(e))return t=qm(jm(e),t),new Bm(jm(t.g),jm(t.h));if(Um(t))return t=qm(e,jm(t)),new Bm(jm(t.g),t.h);if(30<e.g.length){if(Um(e)||Um(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Lm,r=t;0>=r.X(e);)n=Km(n),r=Km(r);var i=Gm(n,1),s=Gm(r,1);for(r=Gm(r,2),n=Gm(n,2);!Fm(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Gm(r,1),n=Gm(n,1)}return t=Vm(e,i.R(t)),new Bm(i,t)}for(i=Om;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Rm(n)).R(t);Um(o)||0<o.X(e);)o=(s=Rm(n-=r)).R(t);Fm(s)&&(s=Lm),i=i.add(s),e=Vm(e,o)}return new Bm(i,e)}function Km(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Am(n,e.h)}function Gm(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Am(i,e.h)}(Mh=Am.prototype).ea=function(){if(Um(this))return-jm(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Pm+r)*t,t*=Pm}return e},Mh.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Fm(this))return"0";if(Um(this))return"-"+jm(this).toString(e);for(var t=Rm(Math.pow(e,6)),n=this,r="";;){var i=qm(n,t).g,s=((0<(n=Vm(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Fm(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Mh.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Mh.X=function(e){return Um(e=Vm(this,e))?-1:Fm(e)?0:1},Mh.abs=function(){return Um(this)?jm(this):this},Mh.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Am(n,-2147483648&n[n.length-1]?-1:0)},Mh.R=function(e){if(Fm(this)||Fm(e))return Om;if(Um(this))return Um(e)?jm(this).R(jm(e)):jm(jm(this).R(e));if(Um(e))return jm(this.R(jm(e)));if(0>this.X(Mm)&&0>e.X(Mm))return Rm(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,zm(n,2*r+2*i),n[2*r+2*i+1]+=s*l,zm(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,zm(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,zm(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Am(n,0)},Mh.gb=function(e){return qm(this,e).h},Mh.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Am(n,this.h&e.h)},Mh.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Am(n,this.h|e.h)},Mh.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Am(n,this.h^e.h)},Em.prototype.createWebChannel=Em.prototype.g,Im.prototype.send=Im.prototype.u,Im.prototype.open=Im.prototype.m,Im.prototype.close=Im.prototype.close,kf.NO_ERROR=0,kf.TIMEOUT=8,kf.HTTP_ERROR=6,Cf.COMPLETE="complete",Nf.EventType=Rf,Rf.OPEN="a",Rf.CLOSE="b",Rf.ERROR="c",Rf.MESSAGE="d",Gd.prototype.listen=Gd.prototype.O,Bp.prototype.listenOnce=Bp.prototype.P,Bp.prototype.getLastError=Bp.prototype.Sa,Bp.prototype.getLastErrorCode=Bp.prototype.Ia,Bp.prototype.getStatus=Bp.prototype.da,Bp.prototype.getResponseJson=Bp.prototype.Wa,Bp.prototype.getResponseText=Bp.prototype.ja,Bp.prototype.send=Bp.prototype.ha,Bp.prototype.setWithCredentials=Bp.prototype.Oa,Cm.prototype.digest=Cm.prototype.l,Cm.prototype.reset=Cm.prototype.reset,Cm.prototype.update=Cm.prototype.j,Am.prototype.add=Am.prototype.add,Am.prototype.multiply=Am.prototype.R,Am.prototype.modulo=Am.prototype.gb,Am.prototype.compare=Am.prototype.X,Am.prototype.toNumber=Am.prototype.ea,Am.prototype.toString=Am.prototype.toString,Am.prototype.getBits=Am.prototype.D,Am.fromNumber=Rm,Am.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return jm(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Rm(Math.pow(n,8)),i=Om,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Rm(Math.pow(n,o)),i=i.R(o).add(Rm(a))):i=(i=i.R(r)).add(Rm(a))}return i};var Hm=Uh.createWebChannelTransport=function(){return new Em},Wm=Uh.getStatEventTarget=function(){return wf()},Qm=Uh.ErrorCode=kf,Ym=Uh.EventType=Cf,Xm=Uh.Event=yf,Jm=Uh.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},$m=Uh.FetchXmlHttpFactory=Lp,Zm=Uh.WebChannel=Nf,eg=Uh.XhrIo=Bp,tg=Uh.Md5=Cm,ng=Uh.Integer=Am;const rg="@firebase/firestore";class ig{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ig.UNAUTHENTICATED=new ig(null),ig.GOOGLE_CREDENTIALS=new ig("google-credentials-uid"),ig.FIRST_PARTY=new ig("first-party-uid"),ig.MOCK_USER=new ig("mock-user");let sg="9.23.0";const og=new ls("@firebase/firestore");function ag(){return og.logLevel}function lg(e){if(og.logLevel<=rs.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(hg);og.debug("Firestore (".concat(sg,"): ").concat(e),...i)}}function cg(e){if(og.logLevel<=rs.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(hg);og.error("Firestore (".concat(sg,"): ").concat(e),...i)}}function ug(e){if(og.logLevel<=rs.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(hg);og.warn("Firestore (".concat(sg,"): ").concat(e),...i)}}function hg(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function dg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(sg,") INTERNAL ASSERTION FAILED: ")+e;throw cg(t),new Error(t)}function fg(e,t){e||dg()}function pg(e,t){return e}const mg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gg extends ji{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class yg{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class vg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class wg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ig.UNAUTHENTICATED)))}shutdown(){}}class bg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _g{constructor(e){this.t=e,this.currentUser=ig.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new yg;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new yg,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{lg("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(lg("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new yg)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(lg("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(fg("string"==typeof t.accessToken),new vg(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fg(null===e||"string"==typeof e),new ig(e)}}class Eg{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=ig.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Ig{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Eg(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(ig.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tg{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&lg("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.T;return this.T=e.token,lg("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{lg("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):lg("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(fg("string"==typeof e.token),this.T=e.token,new Sg(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function kg(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Cg{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=kg(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function xg(e,t){return e<t?-1:e>t?1:0}function Ag(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Ng(e){return e+"\0"}class Dg{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new gg(mg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new gg(mg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new gg(mg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gg(mg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dg.fromMillis(Date.now())}static fromDate(e){return Dg.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Dg(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xg(this.nanoseconds,e.nanoseconds):xg(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rg{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rg(e)}static min(){return new Rg(new Dg(0,0))}static max(){return new Rg(new Dg(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pg{constructor(e,t,n){void 0===t?t=0:t>e.length&&dg(),void 0===n?n=e.length-t:n>e.length-t&&dg(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Pg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pg?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Og extends Pg{construct(e,t,n){return new Og(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new gg(mg.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Og(e)}static emptyPath(){return new Og([])}}const Lg=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mg extends Pg{construct(e,t,n){return new Mg(e,t,n)}static isValidIdentifier(e){return Lg.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mg.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mg(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new gg(mg.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new gg(mg.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new gg(mg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new gg(mg.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mg(t)}static emptyPath(){return new Mg([])}}class Fg{constructor(e){this.path=e}static fromPath(e){return new Fg(Og.fromString(e))}static fromName(e){return new Fg(Og.fromString(e).popFirst(5))}static empty(){return new Fg(Og.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Og.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Og.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fg(new Og(e.slice()))}}class Ug{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function jg(e){return e.fields.find((e=>2===e.kind))}function Vg(e){return e.fields.filter((e=>2!==e.kind))}Ug.UNKNOWN_ID=-1;class zg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Bg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Bg(0,Gg.min())}}function qg(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Rg.fromTimestamp(1e9===r?new Dg(n+1,0):new Dg(n,r));return new Gg(i,Fg.empty(),t)}function Kg(e){return new Gg(e.readTime,e.key,-1)}class Gg{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Gg(Rg.min(),Fg.empty(),-1)}static max(){return new Gg(Rg.max(),Fg.empty(),-1)}}function Hg(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Fg.comparator(e.documentKey,t.documentKey),0!==n?n:xg(e.largestBatchId,t.largestBatchId))}const Wg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Qg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Yg(e){if(e.code!==mg.FAILED_PRECONDITION||e.message!==Wg)throw e;lg("LocalStore","Unexpectedly lost primary lease")}class Xg{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dg(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xg(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Xg?t:Xg.resolve(t)}catch(e){return Xg.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Xg.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Xg.reject(t)}static resolve(e){return new Xg(((t,n)=>{t(e)}))}static reject(e){return new Xg(((t,n)=>{n(e)}))}static waitFor(e){return new Xg(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Xg.resolve(!1);for(const n of e)t=t.next((e=>e?Xg.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Xg(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Xg(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Jg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new yg,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new ey(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=sy(t.target.error);this.v.reject(new ey(e,n))}}static open(e,t,n,r){try{return new Jg(t,e.transaction(r,n))}catch(e){throw new ey(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(lg("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ny(t)}}class $g{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===$g.S(Pi())&&cg("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return lg("SimpleDb","Removing database:",e),ry(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ui())return!1;if($g.C())return!0;const e=Pi(),t=$g.S(e),n=0<t&&t<10,r=$g.N(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/react-blog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(lg("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new ey(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new gg(mg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new gg(mg.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new ey(e,r))},r.onupgradeneeded=e=>{lg("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.O(t,r.transaction,e.oldVersion,this.version).next((()=>{lg("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.$(e);const t=Jg.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.P(),e))).catch((e=>(t.abort(e),Xg.reject(e)))).toPromise();return s.catch((()=>{})),await t.R,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(lg("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Zg{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ry(this.L.delete())}}class ey extends gg{constructor(e,t){super(mg.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function ty(e){return"IndexedDbTransactionError"===e.name}class ny{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(lg("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(lg("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ry(n)}add(e){return lg("SimpleDb","ADD",this.store.name,e,e),ry(this.store.add(e))}get(e){return ry(this.store.get(e)).next((t=>(void 0===t&&(t=null),lg("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return lg("SimpleDb","DELETE",this.store.name,e),ry(this.store.delete(e))}count(){return lg("SimpleDb","COUNT",this.store.name),ry(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new Xg(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Xg(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){lg("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new Xg(((n,r)=>{t.onerror=e=>{const t=sy(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new Xg(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Zg(i),o=t(i.primaryKey,i.value,s);if(o instanceof Xg){const e=o.catch((e=>(s.done(),Xg.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>Xg.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ry(e){return new Xg(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=sy(e.target.error);n(t)}}))}let iy=!1;function sy(e){const t=$g.S(Pi());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new gg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return iy||(iy=!0,setTimeout((()=>{throw e}),0)),e}}return e}class oy{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){lg("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{lg("IndexBackiller","Documents written: ".concat(await this.tt.nt()))}catch(e){ty(e)?lg("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await Yg(e)}await this.et(6e4)}))}}class ay{constructor(e,t){this.localStore=e,this.persistence=t}async nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.st(t,e)))}st(e,t){const n=new Set;let r=t,i=!0;return Xg.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return lg("IndexBackiller","Processing collection: ".concat(t)),this.it(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.rt(r,n))).next((n=>(lg("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}rt(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Kg(t);Hg(r,n)>0&&(n=r)})),new Gg(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ly{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function cy(e){return null==e}function uy(e){return 0===e&&1/e==-1/0}function hy(e){return"number"==typeof e&&Number.isInteger(e)&&!uy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function dy(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=py(t)),t=fy(e.get(n),t);return py(t)}function fy(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function py(e){return e+"\x01\x01"}function my(e){const t=e.length;if(fg(t>=2),2===t)return fg("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Og.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&dg(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:dg()}s=t+2}return new Og(r)}ly.ct=-1;const gy=["userId","batchId"];function yy(e,t){return[e,dy(t)]}function vy(e,t,n){return[e,dy(t),n]}const wy={},by=["prefixPath","collectionGroup","readTime","documentId"],_y=["prefixPath","collectionGroup","documentId"],Ey=["collectionGroup","readTime","prefixPath","documentId"],Iy=["canonicalId","targetId"],Sy=["targetId","path"],Ty=["path","targetId"],ky=["collectionId","parent"],Cy=["indexId","uid"],xy=["uid","sequenceNumber"],Ay=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ny=["indexId","uid","orderedDocumentKey"],Dy=["userId","collectionPath","documentId"],Ry=["userId","collectionPath","largestBatchId"],Py=["userId","collectionGroup","largestBatchId"],Oy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ly=[...Oy,"documentOverlays"],My=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fy=My,Uy=[...Fy,"indexConfiguration","indexState","indexEntries"];class jy extends Qg{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Vy(e,t){const n=pg(e);return $g.M(n.ht,t)}function zy(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function By(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qy(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ky{constructor(e,t){this.comparator=e,this.root=t||Hy.EMPTY}insert(e,t){return new Ky(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hy.BLACK,null,null))}remove(e){return new Ky(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hy.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gy(this.root,e,this.comparator,!0)}}class Gy{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hy{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Hy.RED,this.left=null!=r?r:Hy.EMPTY,this.right=null!=i?i:Hy.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Hy(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Hy.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Hy.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hy.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hy.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw dg();if(this.right.isRed())throw dg();const e=this.left.check();if(e!==this.right.check())throw dg();return e+(this.isRed()?0:1)}}Hy.EMPTY=null,Hy.RED=!0,Hy.BLACK=!1,Hy.EMPTY=new class{constructor(){this.size=0}get key(){throw dg()}get value(){throw dg()}get color(){throw dg()}get left(){throw dg()}get right(){throw dg()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Hy(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wy{constructor(e){this.comparator=e,this.data=new Ky(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qy(this.data.getIterator())}getIteratorFrom(e){return new Qy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Wy))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Wy(this.comparator);return t.data=e,t}}class Qy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yy(e){return e.hasNext()?e.getNext():void 0}class Xy{constructor(e){this.fields=e,e.sort(Mg.comparator)}static empty(){return new Xy([])}unionWith(e){let t=new Wy(Mg.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Xy(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ag(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Jy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $y{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Jy("Invalid base64 string: "+e):e}}(e);return new $y(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new $y(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xg(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$y.EMPTY_BYTE_STRING=new $y("");const Zy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ev(e){if(fg(!!e),"string"==typeof e){let t=0;const n=Zy.exec(e);if(fg(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:tv(e.seconds),nanos:tv(e.nanos)}}function tv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nv(e){return"string"==typeof e?$y.fromBase64String(e):$y.fromUint8Array(e)}function rv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function iv(e){const t=e.mapValue.fields.__previous_value__;return rv(t)?iv(t):t}function sv(e){const t=ev(e.mapValue.fields.__local_write_time__.timestampValue);return new Dg(t.seconds,t.nanos)}class ov{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class av{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new av("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof av&&e.projectId===this.projectId&&e.database===this.database}}const lv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cv={nullValue:"NULL_VALUE"};function uv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rv(e)?4:Sv(e)?9007199254740991:10:dg()}function hv(e,t){if(e===t)return!0;const n=uv(e);if(n!==uv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return sv(e).isEqual(sv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ev(e.timestampValue),r=ev(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return nv(e.bytesValue).isEqual(nv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return tv(e.geoPointValue.latitude)===tv(t.geoPointValue.latitude)&&tv(e.geoPointValue.longitude)===tv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return tv(e.integerValue)===tv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=tv(e.doubleValue),r=tv(t.doubleValue);return n===r?uy(n)===uy(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ag(e.arrayValue.values||[],t.arrayValue.values||[],hv);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(zy(n)!==zy(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hv(n[i],r[i])))return!1;return!0}(e,t);default:return dg()}}function dv(e,t){return void 0!==(e.values||[]).find((e=>hv(e,t)))}function fv(e,t){if(e===t)return 0;const n=uv(e),r=uv(t);if(n!==r)return xg(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xg(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=tv(e.integerValue||e.doubleValue),r=tv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return pv(e.timestampValue,t.timestampValue);case 4:return pv(sv(e),sv(t));case 5:return xg(e.stringValue,t.stringValue);case 6:return function(e,t){const n=nv(e),r=nv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=xg(n[i],r[i]);if(0!==e)return e}return xg(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=xg(tv(e.latitude),tv(t.latitude));return 0!==n?n:xg(tv(e.longitude),tv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=fv(n[i],r[i]);if(e)return e}return xg(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===lv.mapValue&&t===lv.mapValue)return 0;if(e===lv.mapValue)return 1;if(t===lv.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=xg(r[o],s[o]);if(0!==e)return e;const t=fv(n[r[o]],i[s[o]]);if(0!==t)return t}return xg(r.length,s.length)}(e.mapValue,t.mapValue);default:throw dg()}}function pv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return xg(e,t);const n=ev(e),r=ev(t),i=xg(n.seconds,r.seconds);return 0!==i?i:xg(n.nanos,r.nanos)}function mv(e){return gv(e)}function gv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ev(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?nv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Fg.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=gv(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(gv(e.fields[i]));return n+"}"}(e.mapValue):dg();var t,n}function yv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function vv(e){return!!e&&"integerValue"in e}function wv(e){return!!e&&"arrayValue"in e}function bv(e){return!!e&&"nullValue"in e}function _v(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ev(e){return!!e&&"mapValue"in e}function Iv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return By(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Iv(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Iv(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Sv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Tv(e){return"nullValue"in e?cv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?yv(av.empty(),Fg.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:dg()}function kv(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?yv(av.empty(),Fg.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?lv:dg()}function Cv(e,t){const n=fv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function xv(e,t){const n=fv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Av{constructor(e){this.value=e}static empty(){return new Av({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ev(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iv(t)}setAll(e){let t=Mg.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Iv(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ev(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hv(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ev(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){By(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Av(Iv(this.value))}}function Nv(e){const t=[];return By(e.fields,((e,n)=>{const r=new Mg([e]);if(Ev(n)){const e=Nv(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Xy(t)}class Dv{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Dv(e,0,Rg.min(),Rg.min(),Rg.min(),Av.empty(),0)}static newFoundDocument(e,t,n,r){return new Dv(e,1,t,Rg.min(),n,r,0)}static newNoDocument(e,t){return new Dv(e,2,t,Rg.min(),Rg.min(),Av.empty(),0)}static newUnknownDocument(e,t){return new Dv(e,3,t,Rg.min(),Rg.min(),Av.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Rg.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Av.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Av.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rg.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Dv&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dv(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Rv{constructor(e,t){this.position=e,this.inclusive=t}}function Pv(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Fg.comparator(Fg.fromName(o.referenceValue),n.key):fv(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Ov(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!hv(e.position[n],t.position[n]))return!1;return!0}class Lv{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Mv(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Fv{}class Uv extends Fv{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Qv(e,t,n):"array-contains"===t?new $v(e,n):"in"===t?new Zv(e,n):"not-in"===t?new ew(e,n):"array-contains-any"===t?new tw(e,n):new Uv(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Yv(e,n):new Xv(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(fv(t,this.value)):null!==t&&uv(this.value)===uv(t)&&this.matchesComparison(fv(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dg()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class jv extends Fv{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new jv(e,t)}matches(e){return Vv(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft((e=>e.isInequality()));return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Vv(e){return"and"===e.op}function zv(e){return"or"===e.op}function Bv(e){return qv(e)&&Vv(e)}function qv(e){for(const t of e.filters)if(t instanceof jv)return!1;return!0}function Kv(e){if(e instanceof Uv)return e.field.canonicalString()+e.op.toString()+mv(e.value);if(Bv(e))return e.filters.map((e=>Kv(e))).join(",");{const t=e.filters.map((e=>Kv(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Gv(e,t){return e instanceof Uv?function(e,t){return t instanceof Uv&&e.op===t.op&&e.field.isEqual(t.field)&&hv(e.value,t.value)}(e,t):e instanceof jv?function(e,t){return t instanceof jv&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Gv(n,t.filters[r])),!0)}(e,t):void dg()}function Hv(e,t){const n=e.filters.concat(t);return jv.create(n,e.op)}function Wv(e){return e instanceof Uv?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(mv(e.value))}(e):e instanceof jv?function(e){return e.op.toString()+" {"+e.getFilters().map(Wv).join(" ,")+"}"}(e):"Filter"}class Qv extends Uv{constructor(e,t,n){super(e,t,n),this.key=Fg.fromName(n.referenceValue)}matches(e){const t=Fg.comparator(e.key,this.key);return this.matchesComparison(t)}}class Yv extends Uv{constructor(e,t){super(e,"in",t),this.keys=Jv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Xv extends Uv{constructor(e,t){super(e,"not-in",t),this.keys=Jv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Fg.fromName(e.referenceValue)))}class $v extends Uv{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wv(t)&&dv(t.arrayValue,this.value)}}class Zv extends Uv{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&dv(this.value.arrayValue,t)}}class ew extends Uv{constructor(e,t){super(e,"not-in",t)}matches(e){if(dv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!dv(this.value.arrayValue,t)}}class tw extends Uv{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>dv(this.value.arrayValue,e)))}}class nw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function rw(e){return new nw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function iw(e){const t=pg(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Kv(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),cy(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>mv(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>mv(e))).join(",")),t.dt=e}return t.dt}function sw(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Mv(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Gv(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ov(e.startAt,t.startAt)&&Ov(e.endAt,t.endAt)}function ow(e){return Fg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function aw(e,t){return e.filters.filter((e=>e instanceof Uv&&e.field.isEqual(t)))}function lw(e,t,n){let r=cv,i=!0;for(const s of aw(e,t)){let e=cv,t=!0;switch(s.op){case"<":case"<=":e=Tv(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=cv}Cv({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Cv({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function cw(e,t,n){let r=lv,i=!0;for(const s of aw(e,t)){let e=lv,t=!0;switch(s.op){case">=":case">":e=kv(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=lv}xv({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];xv({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class uw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function hw(e,t,n,r,i,s,o,a){return new uw(e,t,n,r,i,s,o,a)}function dw(e){return new uw(e)}function fw(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function pw(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function mw(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function gw(e){return null!==e.collectionGroup}function yw(e){const t=pg(e);if(null===t.wt){t.wt=[];const e=mw(t),n=pw(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Lv(e)),t.wt.push(new Lv(Mg.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Lv(Mg.keyField(),e))}}}return t.wt}function vw(e){const t=pg(e);if(!t._t)if("F"===t.limitType)t._t=rw(t.path,t.collectionGroup,yw(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of yw(t)){const t="desc"===i.dir?"asc":"desc";e.push(new Lv(i.field,t))}const n=t.endAt?new Rv(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rv(t.startAt.position,t.startAt.inclusive):null;t._t=rw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function ww(e,t){t.getFirstInequalityField(),mw(e);const n=e.filters.concat([t]);return new uw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function bw(e,t,n){return new uw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _w(e,t){return sw(vw(e),vw(t))&&e.limitType===t.limitType}function Ew(e){return"".concat(iw(vw(e)),"|lt:").concat(e.limitType)}function Iw(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Wv(e))).join(", "),"]")),cy(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>mv(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>mv(e))).join(",")),"Target(".concat(t,")")}(vw(e)),"; limitType=").concat(e.limitType,")")}function Sw(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Fg.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of yw(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Pv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,yw(e),t))&&!(e.endAt&&!function(e,t,n){const r=Pv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,yw(e),t))}(e,t)}function Tw(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function kw(e){return(t,n)=>{let r=!1;for(const i of yw(e)){const e=Cw(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Cw(e,t,n){const r=e.field.isKeyField()?Fg.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?fv(r,i):dg()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return dg()}}class xw{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){By(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return qy(this.inner)}size(){return this.innerSize}}const Aw=new Ky(Fg.comparator);function Nw(){return Aw}const Dw=new Ky(Fg.comparator);function Rw(){let e=Dw;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Pw(e){let t=Dw;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Ow(){return Mw()}function Lw(){return Mw()}function Mw(){return new xw((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Fw=new Ky(Fg.comparator),Uw=new Wy(Fg.comparator);function jw(){let e=Uw;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Vw=new Wy(xg);function zw(){return Vw}function Bw(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uy(t)?"-0":t}}function qw(e){return{integerValue:""+e}}function Kw(e,t){return hy(t)?qw(t):Bw(e,t)}class Gw{constructor(){this._=void 0}}function Hw(e,t,n){return e instanceof Yw?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&rv(t)&&(t=iv(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Xw?Jw(e,t):e instanceof $w?Zw(e,t):function(e,t){const n=Qw(e,t),r=tb(n)+tb(e.gt);return vv(n)&&vv(e.gt)?qw(r):Bw(e.serializer,r)}(e,t)}function Ww(e,t,n){return e instanceof Xw?Jw(e,t):e instanceof $w?Zw(e,t):n}function Qw(e,t){return e instanceof eb?vv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Yw extends Gw{}class Xw extends Gw{constructor(e){super(),this.elements=e}}function Jw(e,t){const n=nb(t);for(const r of e.elements)n.some((e=>hv(e,r)))||n.push(r);return{arrayValue:{values:n}}}class $w extends Gw{constructor(e){super(),this.elements=e}}function Zw(e,t){let n=nb(t);for(const r of e.elements)n=n.filter((e=>!hv(e,r)));return{arrayValue:{values:n}}}class eb extends Gw{constructor(e,t){super(),this.serializer=e,this.gt=t}}function tb(e){return tv(e.integerValue||e.doubleValue)}function nb(e){return wv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class rb{constructor(e,t){this.field=e,this.transform=t}}class ib{constructor(e,t){this.version=e,this.transformResults=t}}class sb{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sb}static exists(e){return new sb(void 0,e)}static updateTime(e){return new sb(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ob(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ab{}function lb(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new vb(e.key,sb.none()):new fb(e.key,e.data,sb.none());{const n=e.data,r=Av.empty();let i=new Wy(Mg.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new pb(e.key,r,new Xy(i.toArray()),sb.none())}}function cb(e,t,n){e instanceof fb?function(e,t,n){const r=e.value.clone(),i=gb(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof pb?function(e,t,n){if(!ob(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=gb(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(mb(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ub(e,t,n,r){return e instanceof fb?function(e,t,n,r){if(!ob(e.precondition,t))return n;const i=e.value.clone(),s=yb(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof pb?function(e,t,n,r){if(!ob(e.precondition,t))return n;const i=yb(e.fieldTransforms,r,t),s=t.data;return s.setAll(mb(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return ob(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function hb(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Qw(r.transform,e||null);null!=i&&(null===n&&(n=Av.empty()),n.set(r.field,i))}return n||null}function db(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ag(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Xw&&t instanceof Xw||e instanceof $w&&t instanceof $w?Ag(e.elements,t.elements,hv):e instanceof eb&&t instanceof eb?hv(e.gt,t.gt):e instanceof Yw&&t instanceof Yw}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class fb extends ab{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class pb extends ab{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mb(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function gb(e,t,n){const r=new Map;fg(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ww(o,a,n[i]))}return r}function yb(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Hw(e,s,t))}return r}class vb extends ab{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wb extends ab{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bb{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&cb(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ub(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ub(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Lw();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=lb(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Rg.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),jw())}isEqual(e){return this.batchId===e.batchId&&Ag(this.mutations,e.mutations,((e,t)=>db(e,t)))&&Ag(this.baseMutations,e.baseMutations,((e,t)=>db(e,t)))}}class _b{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){fg(e.mutations.length===n.length);let r=Fw;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new _b(e,t,n,r)}}class Eb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Ib{constructor(e,t){this.count=e,this.unchangedNames=t}}var Sb,Tb;function kb(e){switch(e){default:return dg();case mg.CANCELLED:case mg.UNKNOWN:case mg.DEADLINE_EXCEEDED:case mg.RESOURCE_EXHAUSTED:case mg.INTERNAL:case mg.UNAVAILABLE:case mg.UNAUTHENTICATED:return!1;case mg.INVALID_ARGUMENT:case mg.NOT_FOUND:case mg.ALREADY_EXISTS:case mg.PERMISSION_DENIED:case mg.FAILED_PRECONDITION:case mg.ABORTED:case mg.OUT_OF_RANGE:case mg.UNIMPLEMENTED:case mg.DATA_LOSS:return!0}}function Cb(e){if(void 0===e)return cg("GRPC error has no .code"),mg.UNKNOWN;switch(e){case Sb.OK:return mg.OK;case Sb.CANCELLED:return mg.CANCELLED;case Sb.UNKNOWN:return mg.UNKNOWN;case Sb.DEADLINE_EXCEEDED:return mg.DEADLINE_EXCEEDED;case Sb.RESOURCE_EXHAUSTED:return mg.RESOURCE_EXHAUSTED;case Sb.INTERNAL:return mg.INTERNAL;case Sb.UNAVAILABLE:return mg.UNAVAILABLE;case Sb.UNAUTHENTICATED:return mg.UNAUTHENTICATED;case Sb.INVALID_ARGUMENT:return mg.INVALID_ARGUMENT;case Sb.NOT_FOUND:return mg.NOT_FOUND;case Sb.ALREADY_EXISTS:return mg.ALREADY_EXISTS;case Sb.PERMISSION_DENIED:return mg.PERMISSION_DENIED;case Sb.FAILED_PRECONDITION:return mg.FAILED_PRECONDITION;case Sb.ABORTED:return mg.ABORTED;case Sb.OUT_OF_RANGE:return mg.OUT_OF_RANGE;case Sb.UNIMPLEMENTED:return mg.UNIMPLEMENTED;case Sb.DATA_LOSS:return mg.DATA_LOSS;default:return dg()}}(Tb=Sb||(Sb={}))[Tb.OK=0]="OK",Tb[Tb.CANCELLED=1]="CANCELLED",Tb[Tb.UNKNOWN=2]="UNKNOWN",Tb[Tb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tb[Tb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tb[Tb.NOT_FOUND=5]="NOT_FOUND",Tb[Tb.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tb[Tb.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tb[Tb.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tb[Tb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tb[Tb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tb[Tb.ABORTED=10]="ABORTED",Tb[Tb.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tb[Tb.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tb[Tb.INTERNAL=13]="INTERNAL",Tb[Tb.UNAVAILABLE=14]="UNAVAILABLE",Tb[Tb.DATA_LOSS=15]="DATA_LOSS";class xb{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ab}static getOrCreateInstance(){return null===Ab&&(Ab=new xb),Ab}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let Ab=null;function Nb(){return new TextEncoder}const Db=new ng([4294967295,4294967295],0);function Rb(e){const t=Nb().encode(e),n=new tg;return n.update(t),new Uint8Array(n.digest())}function Pb(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ng([n,r],0),new ng([i,s],0)]}class Ob{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Lb("Invalid padding: ".concat(t));if(n<0)throw new Lb("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Lb("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Lb("Invalid padding when bitmap length is 0: ".concat(t));this.It=8*e.length-t,this.Tt=ng.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(ng.fromNumber(n)));return 1===r.compare(Db)&&(r=new ng([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Rb(e),[n,r]=Pb(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Ob(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.It)return;const t=Rb(e),[n,r]=Pb(t);for(let i=0;i<this.hashCount;i++){const e=this.Et(n,r,i);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Lb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Mb{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Fb.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Mb(Rg.min(),r,new Ky(xg),Nw(),jw())}}class Fb{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Fb(n,t,jw(),jw(),jw())}}class Ub{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class jb{constructor(e,t){this.targetId=e,this.Vt=t}}class Vb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$y.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class zb{constructor(){this.St=0,this.Dt=Kb(),this.Ct=$y.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=jw(),t=jw(),n=jw();return this.Dt.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:dg()}})),new Fb(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=Kb()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Bb{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Nw(),this.zt=qb(),this.Wt=new Ky(xg)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,(t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:dg()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach(((e,n)=>{this.te(n)&&t(n)}))}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(ow(s))if(0===r){const e=new Fg(s.path);this.Yt(n,e,Dv.newNoDocument(e,Rg.min()))}else fg(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=xb.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==u?void 0:u.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=nv(i).toUint8Array()}catch(e){if(e instanceof Jy)return ug("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new Ob(a,s,o)}catch(e){return ug(e instanceof Lb?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const i=this.Gt.ue(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());t.vt(s)||(this.Yt(e,n,null),r++)})),r}ce(e){const t=new Map;this.Qt.forEach(((n,r)=>{const i=this.se(r);if(i){if(n.current&&ow(i.target)){const t=new Fg(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Dv.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}}));let n=jw();this.zt.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.jt.forEach(((t,n)=>n.setReadTime(e)));const r=new Mb(e,t,this.Wt,this.jt,n);return this.jt=Nw(),this.zt=qb(),this.Wt=new Ky(xg),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new zb,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Wy(xg),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||lg("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new zb),this.Gt.getRemoteKeysForTarget(e).forEach((t=>{this.Yt(e,t,null)}))}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function qb(){return new Ky(Fg.comparator)}function Kb(){return new Ky(Fg.comparator)}const Gb={asc:"ASCENDING",desc:"DESCENDING"},Hb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wb={and:"AND",or:"OR"};class Qb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yb(e,t){return e.useProto3Json||cy(t)?t:{value:t}}function Xb(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function $b(e,t){return Xb(e,t.toTimestamp())}function Zb(e){return fg(!!e),Rg.fromTimestamp(function(e){const t=ev(e);return new Dg(t.seconds,t.nanos)}(e))}function e_(e,t){return function(e){return new Og(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function t_(e){const t=Og.fromString(e);return fg(I_(t)),t}function n_(e,t){return e_(e.databaseId,t.path)}function r_(e,t){const n=t_(t);if(n.get(1)!==e.databaseId.projectId)throw new gg(mg.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new gg(mg.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Fg(a_(n))}function i_(e,t){return e_(e.databaseId,t)}function s_(e){const t=t_(e);return 4===t.length?Og.emptyPath():a_(t)}function o_(e){return new Og(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function a_(e){return fg(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function l_(e,t,n){return{name:n_(e,t),fields:n.value.mapValue.fields}}function c_(e,t,n){const r=r_(e,t.name),i=Zb(t.updateTime),s=t.createTime?Zb(t.createTime):Rg.min(),o=new Av({mapValue:{fields:t.fields}}),a=Dv.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function u_(e,t){let n;if(t instanceof fb)n={update:l_(e,t.key,t.value)};else if(t instanceof vb)n={delete:n_(e,t.key)};else if(t instanceof pb)n={update:l_(e,t.key,t.data),updateMask:E_(t.fieldMask)};else{if(!(t instanceof wb))return dg();n={verify:n_(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Yw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Xw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $w)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof eb)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw dg()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:$b(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:dg()}(e,t.precondition)),n}function h_(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?sb.updateTime(Zb(e.updateTime)):void 0!==e.exists?sb.exists(e.exists):sb.none()}(t.currentDocument):sb.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)fg("REQUEST_TIME"===t.setToServerValue),n=new Yw;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Xw(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new $w(e)}else"increment"in t?n=new eb(e,t.increment):dg();const r=Mg.fromServerFormat(t.fieldPath);return new rb(r,n)}(e,t))):[];if(t.update){t.update.name;const i=r_(e,t.update.name),s=new Av({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Xy(t.map((e=>Mg.fromServerFormat(e))))}(t.updateMask);return new pb(i,s,e,n,r)}return new fb(i,s,n,r)}if(t.delete){const r=r_(e,t.delete);return new vb(r,n)}if(t.verify){const r=r_(e,t.verify);return new wb(r,n)}return dg()}function d_(e,t){return{documents:[i_(e,t.path)]}}function f_(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=i_(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=i_(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return __(jv.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:w_(e.field),direction:g_(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Yb(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function p_(e){let t=s_(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){fg(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=m_(e);return t instanceof jv&&Bv(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new Lv(b_(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,cy(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Rv(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Rv(n,t)}(n.endAt)),hw(t,i,o,s,a,"F",l,c)}function m_(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=b_(e.unaryFilter.field);return Uv.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=b_(e.unaryFilter.field);return Uv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=b_(e.unaryFilter.field);return Uv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=b_(e.unaryFilter.field);return Uv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dg()}}(e):void 0!==e.fieldFilter?function(e){return Uv.create(b_(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dg()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return jv.create(e.compositeFilter.filters.map((e=>m_(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return dg()}}(e.compositeFilter.op))}(e):dg()}function g_(e){return Gb[e]}function y_(e){return Hb[e]}function v_(e){return Wb[e]}function w_(e){return{fieldPath:e.canonicalString()}}function b_(e){return Mg.fromServerFormat(e.fieldPath)}function __(e){return e instanceof Uv?function(e){if("=="===e.op){if(_v(e.value))return{unaryFilter:{field:w_(e.field),op:"IS_NAN"}};if(bv(e.value))return{unaryFilter:{field:w_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_v(e.value))return{unaryFilter:{field:w_(e.field),op:"IS_NOT_NAN"}};if(bv(e.value))return{unaryFilter:{field:w_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:w_(e.field),op:y_(e.op),value:e.value}}}(e):e instanceof jv?function(e){const t=e.getFilters().map((e=>__(e)));return 1===t.length?t[0]:{compositeFilter:{op:v_(e.op),filters:t}}}(e):dg()}function E_(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function I_(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class S_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rg.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Rg.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:$y.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new S_(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new S_(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new S_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new S_(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class T_{constructor(e){this.fe=e}}function k_(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:C_(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:n_(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Xb(e,t.version.toTimestamp()),createTime:Xb(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:x_(t.version)};else{if(!t.isUnknownDocument())return dg();r.unknownDocument={path:n.path.toArray(),version:x_(t.version)}}return r}function C_(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function x_(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function A_(e){const t=new Dg(e.seconds,e.nanoseconds);return Rg.fromTimestamp(t)}function N_(e,t){const n=(t.baseMutations||[]).map((t=>h_(e.fe,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>h_(e.fe,t))),i=Dg.fromMillis(t.localWriteTimeMs);return new bb(t.batchId,i,n,r)}function D_(e){const t=A_(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?A_(e.lastLimboFreeSnapshotVersion):Rg.min();let r;var i;return void 0!==e.query.documents?(fg(1===(i=e.query).documents.length),r=vw(dw(s_(i.documents[0])))):r=function(e){return vw(p_(e))}(e.query),new S_(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,$y.fromBase64String(e.resumeToken))}function R_(e,t){const n=x_(t.snapshotVersion),r=x_(t.lastLimboFreeSnapshotVersion);let i;i=ow(t.target)?d_(e.fe,t.target):f_(e.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:iw(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function P_(e){const t=p_({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?bw(t,t.limit,"L"):t}function O_(e,t){return new Eb(t.largestBatchId,h_(e.fe,t.overlayMutation))}function L_(e,t){const n=t.path.lastSegment();return[e,dy(t.path.popLast()),n]}function M_(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:x_(r.readTime),documentKey:dy(r.documentKey.path),largestBatchId:r.largestBatchId}}class F_{getBundleMetadata(e,t){return U_(e).get(t).next((e=>{if(e)return{id:(t=e).bundleId,createTime:A_(t.createTime),version:t.version};var t}))}saveBundleMetadata(e,t){return U_(e).put({bundleId:(n=t).id,createTime:x_(Zb(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return j_(e).get(t).next((e=>{if(e)return{name:(t=e).name,query:P_(t.bundledQuery),readTime:A_(t.readTime)};var t}))}saveNamedQuery(e,t){return j_(e).put(function(e){return{name:e.name,readTime:x_(Zb(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function U_(e){return Vy(e,"bundles")}function j_(e){return Vy(e,"namedQueries")}class V_{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){const n=t.uid||"";return new V_(e,n)}getOverlay(e,t){return z_(e).get(L_(this.userId,t)).next((e=>e?O_(this.serializer,e):null))}getOverlays(e,t){const n=Ow();return Xg.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Eb(t,i);r.push(this.we(e,s))})),Xg.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(dy(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(z_(e).J("collectionPathOverlayIndex",r))})),Xg.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Ow(),i=dy(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return z_(e).j("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=O_(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Ow();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return z_(e).X({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=O_(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}we(e,t){return z_(e).put(function(e,t,n){const[r,i,s]=L_(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:u_(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function z_(e){return Vy(e,"documentOverlays")}class B_{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(tv(e.integerValue));else if("doubleValue"in e){const n=tv(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),uy(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie("".concat(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(nv(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?Sv(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):dg()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),Fg.fromName(e).path.forEach((e=>{this.ye(t,60),this.be(e,t)}))}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function q_(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function K_(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=q_(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}B_.Ve=new B_;class G_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=K_(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),n=K_(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class H_{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class W_{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Q_{constructor(){this.je=new G_,this.ze=new H_(this.je),this.We=new W_(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Y_{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Y_(this.indexId,this.documentKey,this.arrayValue,n)}}function X_(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=J_(e.arrayValue,t.arrayValue),0!==n?n:(n=J_(e.directionalValue,t.directionalValue),0!==n?n:Fg.comparator(e.documentKey,t.documentKey)))}function J_(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class $_{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){fg(e.collectionGroup===this.collectionId);const t=jg(e);if(void 0!==t&&!this.en(t))return!1;const n=Vg(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[i];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[s++],e))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Ye.length||!this.sn(this.Ye[s++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Z_(e){var t,n;if(fg(e instanceof Uv||e instanceof jv),e instanceof Uv){if(e instanceof Zv){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Uv.create(e.field,"==",t))))||[];return jv.create(r,"or")}return e}const r=e.filters.map((e=>Z_(e)));return jv.create(r,e.op)}function eE(e){if(0===e.getFilters().length)return[];const t=iE(Z_(e));return fg(rE(t)),tE(t)||nE(t)?[t]:t.getFilters()}function tE(e){return e instanceof Uv}function nE(e){return e instanceof jv&&Bv(e)}function rE(e){return tE(e)||nE(e)||function(e){if(e instanceof jv&&zv(e)){for(const t of e.getFilters())if(!tE(t)&&!nE(t))return!1;return!0}return!1}(e)}function iE(e){if(fg(e instanceof Uv||e instanceof jv),e instanceof Uv)return e;if(1===e.filters.length)return iE(e.filters[0]);const t=e.filters.map((e=>iE(e)));let n=jv.create(t,e.op);return n=aE(n),rE(n)?n:(fg(n instanceof jv),fg(Vv(n)),fg(n.filters.length>1),n.filters.reduce(((e,t)=>sE(e,t))))}function sE(e,t){let n;return fg(e instanceof Uv||e instanceof jv),fg(t instanceof Uv||t instanceof jv),n=e instanceof Uv?t instanceof Uv?function(e,t){return jv.create([e,t],"and")}(e,t):oE(e,t):t instanceof Uv?oE(t,e):function(e,t){if(fg(e.filters.length>0&&t.filters.length>0),Vv(e)&&Vv(t))return Hv(e,t.getFilters());const n=zv(e)?e:t,r=zv(e)?t:e,i=n.filters.map((e=>sE(e,r)));return jv.create(i,"or")}(e,t),aE(n)}function oE(e,t){if(Vv(t))return Hv(t,e.getFilters());{const n=t.filters.map((t=>sE(e,t)));return jv.create(n,"or")}}function aE(e){if(fg(e instanceof Uv||e instanceof jv),e instanceof Uv)return e;const t=e.getFilters();if(1===t.length)return aE(t[0]);if(qv(e))return e;const n=t.map((e=>aE(e))),r=[];return n.forEach((t=>{t instanceof Uv?r.push(t):t instanceof jv&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:jv.create(r,e.op)}class lE{constructor(){this.rn=new cE}addToCollectionParentIndex(e,t){return this.rn.add(t),Xg.resolve()}getCollectionParents(e,t){return Xg.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return Xg.resolve()}deleteFieldIndex(e,t){return Xg.resolve()}getDocumentsMatchingTarget(e,t){return Xg.resolve(null)}getIndexType(e,t){return Xg.resolve(0)}getFieldIndexes(e,t){return Xg.resolve([])}getNextCollectionGroupToUpdate(e){return Xg.resolve(null)}getMinOffset(e,t){return Xg.resolve(Gg.min())}getMinOffsetFromCollectionGroup(e,t){return Xg.resolve(Gg.min())}updateCollectionGroup(e,t,n){return Xg.resolve()}updateIndexEntries(e,t){return Xg.resolve()}}class cE{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Wy(Og.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Wy(Og.comparator)).toArray()}}const uE=new Uint8Array(0);class hE{constructor(e,t){this.user=e,this.databaseId=t,this.on=new cE,this.un=new xw((e=>iw(e)),((e,t)=>sw(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.on.add(t)}));const i={collectionId:n,parent:dy(r)};return dE(e).put(i)}return Xg.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Ng(t),""],!1,!0);return dE(e).j(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(my(r.parent))}return n}))}addFieldIndex(e,t){const n=pE(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=mE(e);return i.next((e=>{n.put(M_(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=pE(e),r=mE(e),i=fE(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=fE(e);let r=!0;const i=new Map;return Xg.forEach(this.cn(t),(t=>this.an(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=jw();const r=[];return Xg.forEach(i,((i,s)=>{var o;lg("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(",")))," to execute ").concat(iw(t)));const a=function(e,t){const n=jg(t);if(void 0===n)return null;for(const r of aw(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),l=function(e,t){const n=new Map;for(const r of Vg(t))for(const t of aw(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Vg(t)){const t=0===i.kind?lw(e,i.fieldPath,e.startAt):cw(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Rv(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of Vg(t)){const t=0===i.kind?cw(e,i.fieldPath,e.endAt):lw(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Rv(n,r)}(s,i),h=this.hn(i,s,c),d=this.hn(i,s,u),f=this.ln(i,s,l),p=this.fn(i.indexId,a,h,c.inclusive,d,u.inclusive,f);return Xg.forEach(p,(i=>n.H(i,t.limit).next((t=>{t.forEach((t=>{const n=Fg.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Xg.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:eE(jv.create(e.filters,"and")).map((t=>rw(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}fn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.dn(t[u/l]):uE,h=this.wn(e,a,n[u%l],r),d=this._n(e,a,i[u%l],s),f=o.map((t=>this.wn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}wn(e,t,n,r){const i=new Y_(e,Fg.empty(),t,n);return r?i:i.Je()}_n(e,t,n,r){const i=new Y_(e,Fg.empty(),t,n);return r?i.Je():i}an(e,t){const n=new $_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Xg.forEach(r,(t=>this.an(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Wy(Mg.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}mn(e,t){const n=new Q_;for(const r of Vg(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.He(r.kind);B_.Ve._e(e,i)}return n.Qe()}dn(e){const t=new Q_;return B_.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new Q_;return B_.Ve._e(yv(this.databaseId,t),n.He(function(e){const t=Vg(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new Q_);let i=0;for(const s of Vg(e)){const e=n[i++];for(const n of r)if(this.yn(t,s.fieldPath)&&wv(e))r=this.pn(r,s,e);else{const t=n.He(s.kind);B_.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Q_;n.seed(e.Qe()),B_.Ve._e(s,n.He(t.kind)),i.push(n)}return i}yn(e,t){return!!e.filters.find((e=>e instanceof Uv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=pE(e),r=mE(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next((e=>{const t=[];return Xg.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Bg(t.sequenceNumber,new Gg(A_(t.readTime),new Fg(my(t.documentKey)),t.largestBatchId)):Bg.empty(),r=e.fields.map((e=>{let[t,n]=e;return new zg(Mg.fromServerFormat(t),n)}));return new Ug(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:xg(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=pE(e),i=mE(e);return this.Tn(e).next((e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Xg.forEach(t,(t=>i.put(M_(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Xg.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Xg.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Xg.forEach(i,(n=>this.En(e,t,n).next((t=>{const i=this.An(r,n);return t.isEqual(i)?Xg.resolve():this.vn(e,r,n,t,i)})))))))}))}Rn(e,t,n,r){return fE(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return fE(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=fE(e);let i=new Wy(X_);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},((e,r)=>{i=i.add(new Y_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}An(e,t){let n=new Wy(X_);const r=this.mn(t,e);if(null==r)return n;const i=jg(t);if(null!=i){const s=e.data.field(i.fieldPath);if(wv(s))for(const i of s.arrayValue.values||[])n=n.add(new Y_(t.indexId,e.key,this.dn(i),r))}else n=n.add(new Y_(t.indexId,e.key,uE,r));return n}vn(e,t,n,r,i){lg("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Yy(s),l=Yy(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Yy(o)):t?(i(a),a=Yy(s)):(a=Yy(s),l=Yy(o))}}(r,i,X_,(r=>{s.push(this.Rn(e,t,n,r))}),(r=>{s.push(this.Pn(e,t,n,r))})),Xg.waitFor(s)}Tn(e){let t=1;return mE(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>X_(e,t))).filter(((e,t,n)=>!t||0!==X_(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=X_(s,e),i=X_(s,t);if(0===n)r[0]=e.Je();else if(n>0&&i<0)r.push(s),r.push(s.Je());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,uE,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,uE,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return X_(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gE)}getMinOffset(e,t){return Xg.mapArray(this.cn(t),(t=>this.an(e,t).next((e=>e||dg())))).next(gE)}}function dE(e){return Vy(e,"collectionParents")}function fE(e){return Vy(e,"indexEntries")}function pE(e){return Vy(e,"indexConfiguration")}function mE(e){return Vy(e,"indexState")}function gE(e){fg(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Hg(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Gg(t.readTime,t.documentKey,n)}const yE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vE{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new vE(e,vE.DEFAULT_COLLECTION_PERCENTILE,vE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function wE(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.X({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{fg(1===a)})));const c=[];for(const u of n.mutations){const e=vy(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return Xg.waitFor(s).next((()=>c))}function bE(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw dg();t=e.noDocument}return JSON.stringify(t).length}vE.DEFAULT_COLLECTION_PERCENTILE=10,vE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vE.DEFAULT=new vE(41943040,vE.DEFAULT_COLLECTION_PERCENTILE,vE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vE.DISABLED=new vE(-1,0,0);class _E{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){fg(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new _E(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return IE(e).X({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=SE(e),s=IE(e);return s.add({}).next((o=>{fg("number"==typeof o);const a=new bb(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>u_(e.fe,t))),i=n.mutations.map((t=>u_(e.fe,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new Wy(((e,t)=>xg(e.canonicalString(),t.canonicalString())));for(const e of r){const t=vy(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,wy))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Vn[o]=a.keys()})),Xg.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return IE(e).get(t).next((e=>e?(fg(e.userId===this.userId),N_(this.serializer,e)):null))}Sn(e,t){return this.Vn[t]?Xg.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return IE(e).X({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(fg(t.batchId>=n),i=N_(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return IE(e).X({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return IE(e).j("userMutationsIndex",t).next((e=>e.map((e=>N_(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=yy(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return SE(e).X({range:r},((n,r,s)=>{const[o,a,l]=n,c=my(a);if(o===this.userId&&t.path.isEqual(c))return IE(e).get(l).next((e=>{if(!e)throw dg();fg(e.userId===this.userId),i.push(N_(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Wy(xg);const r=[];return t.forEach((t=>{const i=yy(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=SE(e).X({range:s},((e,r,i)=>{const[s,o,a]=e,l=my(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),Xg.waitFor(r).next((()=>this.Dn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=yy(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Wy(xg);return SE(e).X({range:s},((e,t,i)=>{const[s,a,l]=e,c=my(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Dn(e,o)))}Dn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(IE(e).get(t).next((e=>{if(null===e)throw dg();fg(e.userId===this.userId),n.push(N_(this.serializer,e))})))})),Xg.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return wE(e.ht,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Cn(t.batchId)})),Xg.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Xg.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return SE(e).X({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=my(e[1]);r.push(t)}else n.done()})).next((()=>{fg(0===r.length)}))}))}containsKey(e,t){return EE(e,this.userId,t)}xn(e){return TE(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function EE(e,t,n){const r=yy(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return SE(e).X({range:s,Y:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function IE(e){return Vy(e,"mutations")}function SE(e){return Vy(e,"documentMutations")}function TE(e){return Vy(e,"mutationQueues")}class kE{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new kE(0)}static Mn(){return new kE(-1)}}class CE{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next((t=>{const n=new kE(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.$n(e).next((e=>Rg.fromTimestamp(new Dg(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.$n(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.$n(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r))))}addTargetData(e,t){return this.Fn(e,t).next((()=>this.$n(e).next((n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>xE(e).delete(t.targetId))).next((()=>this.$n(e))).next((t=>(fg(t.targetCount>0),t.targetCount-=1,this.On(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return xE(e).X(((s,o)=>{const a=D_(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Xg.waitFor(i))).next((()=>r))}forEachTarget(e,t){return xE(e).X(((e,n)=>{const r=D_(n);t(r)}))}$n(e){return AE(e).get("targetGlobalKey").next((e=>(fg(null!==e),e)))}On(e,t){return AE(e).put("targetGlobalKey",t)}Fn(e,t){return xE(e).put(R_(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next((e=>e.targetCount))}getTargetData(e,t){const n=iw(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return xE(e).X({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=D_(n);sw(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=NE(e);return t.forEach((t=>{const s=dy(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Xg.waitFor(r)}removeMatchingKeys(e,t,n){const r=NE(e);return Xg.forEach(t,(t=>{const i=dy(t.path);return Xg.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=NE(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=NE(e);let i=jw();return r.X({range:n,Y:!0},((e,t,n)=>{const r=my(e[1]),s=new Fg(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=dy(t.path),r=IDBKeyRange.bound([n],[Ng(n)],!1,!0);let i=0;return NE(e).X({index:"documentTargetsIndex",Y:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}le(e,t){return xE(e).get(t).next((e=>e?D_(e):null))}}function xE(e){return Vy(e,"targets")}function AE(e){return Vy(e,"targetGlobal")}function NE(e){return Vy(e,"targetDocuments")}function DE(e,t){let[n,r]=e,[i,s]=t;const o=xg(n,i);return 0===o?xg(r,s):o}class RE{constructor(e){this.Ln=e,this.buffer=new Wy(DE),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();DE(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PE{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){lg("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ty(e)?lg("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Yg(e)}await this.Qn(3e5)}))}}class OE{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Xg.resolve(ly.ct);const n=new RE(t);return this.jn.forEachTarget(e,(e=>n.Kn(e.sequenceNumber))).next((()=>this.jn.Wn(e,(e=>n.Kn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(lg("LruGarbageCollector","Garbage collection skipped; disabled"),Xg.resolve(yE)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(lg("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),yE):this.Hn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(lg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),ag()<=rs.DEBUG&&lg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Xg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function LE(e,t){return new OE(e,t)}class ME{constructor(e,t){this.db=e,this.garbageCollector=LE(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Jn(e){let t=0;return this.Wn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,((e,n)=>t(n)))}addReference(e,t,n){return FE(e,n)}removeReference(e,t,n){return FE(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return FE(e,t)}Xn(e,t){return function(e,t){let n=!1;return TE(e).Z((r=>EE(e,r,t).next((e=>(e&&(n=!0),Xg.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Yn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Rg.min()),NE(e).delete([0,dy(s.path)]))))}));r.push(t)}})).next((()=>Xg.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return FE(e,t)}Yn(e,t){const n=NE(e);let r,i=ly.ct;return n.X({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==ly.ct&&t(new Fg(my(r)),i),i=l,r=a):i=ly.ct})).next((()=>{i!==ly.ct&&t(new Fg(my(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function FE(e,t){return NE(e).put(function(e,t){return{targetId:0,path:dy(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class UE{constructor(){this.changes=new xw((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dv.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Xg.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jE{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return qE(e).put(n)}removeEntry(e,t,n){return qE(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],C_(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Zn(e,n))))}getEntry(e,t){let n=Dv.newInvalidDocument(t);return qE(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(KE(t))},((e,r)=>{n=this.ts(t,r)})).next((()=>n))}es(e,t){let n={size:0,document:Dv.newInvalidDocument(t)};return qE(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(KE(t))},((e,r)=>{n={document:this.ts(t,r),size:bE(r)}})).next((()=>n))}getEntries(e,t){let n=Nw();return this.ns(e,t,((e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)})).next((()=>n))}ss(e,t){let n=Nw(),r=new Ky(Fg.comparator);return this.ns(e,t,((e,t)=>{const i=this.ts(e,t);n=n.insert(e,i),r=r.insert(e,bE(t))})).next((()=>({documents:n,rs:r})))}ns(e,t,n){if(t.isEmpty())return Xg.resolve();let r=new Wy(HE);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(KE(r.first()),KE(r.last())),s=r.getIterator();let o=s.getNext();return qE(e).X({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Fg.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&HE(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.G(KE(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r){const i=t.path,s=[i.popLast().toArray(),i.lastSegment(),C_(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qE(e).j(IDBKeyRange.bound(s,o,!0)).next((e=>{let n=Nw();for(const i of e){const e=this.ts(Fg.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Sw(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Nw();const s=GE(t,n),o=GE(t,Gg.max());return qE(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.ts(Fg.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new zE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return BE(e).get("remoteDocumentGlobalKey").next((e=>(fg(!!e),e)))}Zn(e,t){return BE(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=c_(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Fg.fromSegments(t.noDocument.path),r=A_(t.noDocument.readTime);n=Dv.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return dg();{const e=Fg.fromSegments(t.unknownDocument.path),r=A_(t.unknownDocument.version);n=Dv.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Dg(e[0],e[1]);return Rg.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Rg.min()))return e}return Dv.newInvalidDocument(e)}}function VE(e){return new jE(e)}class zE extends UE{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new xw((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Wy(((e,t)=>xg(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.us.get(i);if(t.push(this.os.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=k_(this.os.serializer,s);r=r.add(i.path.popLast());const l=bE(a);n+=l-o.size,t.push(this.os.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=k_(this.os.serializer,s.convertToNoDocument(Rg.min()));t.push(this.os.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.os.updateMetadata(e,n)),Xg.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next((e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.os.ss(e,t).next((e=>{let{documents:t,rs:n}=e;return n.forEach(((e,n)=>{this.us.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function BE(e){return Vy(e,"remoteDocumentGlobal")}function qE(e){return Vy(e,"remoteDocumentsV14")}function KE(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function GE(e,t){const n=t.documentKey.path.toArray();return[e,C_(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function HE(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=xg(n[s],r[s]),i)return i;return i=xg(n.length,r.length),i||(i=xg(n[n.length-2],r[r.length-2]),i||xg(n[n.length-1],r[r.length-1]))}class WE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class QE{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&ub(n.mutation,e,Xy.empty(),Dg.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,jw()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jw();const r=Ow();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Rw();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Ow();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,jw())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Nw();const s=Mw(),o=Mw();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof pb)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),ub(o.mutation,t,o.mutation.getFieldMask(),Dg.now())):s.set(t.key,Xy.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new WE(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Mw();let r=new Ky(((e,t)=>e-t)),i=jw();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Xy.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||jw()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Lw();l.forEach((e=>{if(!i.has(e)){const r=lb(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Xg.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Fg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Xg.resolve(Ow());let o=-1,a=i;return s.next((t=>Xg.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Xg.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,jw()))).next((e=>({batchId:o,changes:Pw(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fg(t)).next((e=>{let t=Rw();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Rw();return this.indexManager.getCollectionParents(e,r).next((s=>Xg.forEach(s,(s=>{const o=function(e,t){return new uw(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{i=i.insert(e,t)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)))).next((e=>{r.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Dv.newInvalidDocument(r)))}));let n=Rw();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&ub(s.mutation,i,Xy.empty(),Dg.now()),Sw(t,i)&&(n=n.insert(e,i))})),n}))}}class YE{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return Xg.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Zb(n.createTime)}),Xg.resolve()}getNamedQuery(e,t){return Xg.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:P_(e.bundledQuery),readTime:Zb(e.readTime)}}(t)),Xg.resolve()}}class XE{constructor(){this.overlays=new Ky(Fg.comparator),this.ls=new Map}getOverlay(e,t){return Xg.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ow();return Xg.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.we(e,t,r)})),Xg.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.ls.delete(n)),Xg.resolve()}getOverlaysForCollection(e,t,n){const r=Ow(),i=t.length+1,s=new Fg(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Xg.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ky(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Ow(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Ow(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Xg.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Eb(t,n));let i=this.ls.get(t);void 0===i&&(i=jw(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}class JE{constructor(){this.fs=new Wy($E.ds),this.ws=new Wy($E._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new $E(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.ys(new $E(e,t))}ps(e,t){e.forEach((e=>this.removeReference(e,t)))}Is(e){const t=new Fg(new Og([])),n=new $E(t,e),r=new $E(t,e+1),i=[];return this.ws.forEachInRange([n,r],(e=>{this.ys(e),i.push(e.key)})),i}Ts(){this.fs.forEach((e=>this.ys(e)))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Fg(new Og([])),n=new $E(t,e),r=new $E(t,e+1);let i=jw();return this.ws.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new $E(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class $E{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Fg.comparator(e.key,t.key)||xg(e.As,t.As)}static _s(e,t){return xg(e.As,t.As)||Fg.comparator(e.key,t.key)}}class ZE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Wy($E.ds)}checkEmpty(e){return Xg.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new bb(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Rs=this.Rs.add(new $E(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Xg.resolve(s)}lookupMutationBatch(e,t){return Xg.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return Xg.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Xg.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return Xg.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new $E(t,0),r=new $E(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],(e=>{const t=this.Ps(e.As);i.push(t)})),Xg.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Wy(xg);return t.forEach((e=>{const t=new $E(e,0),r=new $E(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],(e=>{n=n.add(e.As)}))})),Xg.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Fg.isDocumentKey(i)||(i=i.child(""));const s=new $E(new Fg(i),0);let o=new Wy(xg);return this.Rs.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),s),Xg.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach((e=>{const n=this.Ps(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){fg(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return Xg.forEach(t.mutations,(r=>{const i=new $E(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Rs=n}))}Cn(e){}containsKey(e,t){const n=new $E(t,0),r=this.Rs.firstAfterOrEqual(n);return Xg.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Xg.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class eI{constructor(e){this.Ds=e,this.docs=new Ky(Fg.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Xg.resolve(n?n.document.mutableCopy():Dv.newInvalidDocument(t))}getEntries(e,t){let n=Nw();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Dv.newInvalidDocument(e))})),Xg.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Nw();const s=t.path,o=new Fg(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Hg(Kg(o),n)<=0||(r.has(o.key)||Sw(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Xg.resolve(i)}getAllFromCollectionGroup(e,t,n,r){dg()}Cs(e,t){return Xg.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new tI(this)}getSize(e){return Xg.resolve(this.size)}}class tI extends UE{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)})),Xg.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class nI{constructor(e){this.persistence=e,this.xs=new xw((e=>iw(e)),sw),this.lastRemoteSnapshotVersion=Rg.min(),this.highestTargetId=0,this.Ns=0,this.ks=new JE,this.targetCount=0,this.Ms=kE.kn()}forEachTarget(e,t){return this.xs.forEach(((e,n)=>t(n))),Xg.resolve()}getLastRemoteSnapshotVersion(e){return Xg.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xg.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),Xg.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),Xg.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new kE(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,Xg.resolve()}updateTargetData(e,t){return this.Fn(t),Xg.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,Xg.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Xg.waitFor(i).next((()=>r))}getTargetCount(e){return Xg.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return Xg.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),Xg.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Xg.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),Xg.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return Xg.resolve(n)}containsKey(e,t){return Xg.resolve(this.ks.containsKey(t))}}class rI{constructor(e,t){this.$s={},this.overlays={},this.Os=new ly(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new nI(this),this.indexManager=new lE,this.remoteDocumentCache=function(e){return new eI(e)}((e=>this.referenceDelegate.Ls(e))),this.serializer=new T_(t),this.qs=new YE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new ZE(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){lg("MemoryPersistence","Starting transaction:",e);const r=new iI(this.Os.next());return this.referenceDelegate.Us(),n(r).next((e=>this.referenceDelegate.Ks(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gs(e,t){return Xg.or(Object.values(this.$s).map((n=>()=>n.containsKey(e,t))))}}class iI extends Qg{constructor(e){super(),this.currentSequenceNumber=e}}class sI{constructor(e){this.persistence=e,this.Qs=new JE,this.js=null}static zs(e){return new sI(e)}get Ws(){if(this.js)return this.js;throw dg()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),Xg.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),Xg.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),Xg.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach((e=>this.Ws.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Ws.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xg.forEach(this.Ws,(n=>{const r=Fg.fromPath(n);return this.Hs(e,r).next((e=>{e||t.removeEntry(r,Rg.min())}))})).next((()=>(this.js=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hs(e,t).next((e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())}))}Ls(e){return 0}Hs(e,t){return Xg.or([()=>Xg.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class oI{constructor(e){this.serializer=e}O(e,t,n,r){const i=new Jg("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gy,{unique:!0}),e.createObjectStore("documentMutations")}(e),aI(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Xg.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),aI(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rg.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").j().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gy,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Xg.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Ys(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(i))))),n<7&&r>=7&&(s=s.next((()=>this.Zs(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ei(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Dy});t.createIndex("collectionPathOverlayIndex",Ry,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Py,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:by});t.createIndex("documentKeyIndex",_y),t.createIndex("collectionGroupIndex",Ey)}(e))).next((()=>this.ni(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Cy}).createIndex("sequenceNumberIndex",xy,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ay}).createIndex("documentKeyIndex",Ny,{unique:!1})}(e)))),s}Xs(e){let t=0;return e.store("remoteDocuments").X(((e,n)=>{t+=bE(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next((t=>Xg.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next((n=>Xg.forEach(n,(n=>{fg(n.userId===t.userId);const r=N_(this.serializer,n);return wE(e,t.userId,r).next((()=>{}))}))))}))))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.X(((n,i)=>{const s=new Og(n),o=function(e){return[0,dy(e)]}(s);r.push(t.get(o).next((n=>n?Xg.resolve():(n=>t.put({targetId:0,path:dy(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Xg.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:ky});const n=t.store("collectionParents"),r=new cE,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:dy(r)})}};return t.store("remoteDocuments").X({Y:!0},((e,t)=>{const n=new Og(e);return i(n.popLast())})).next((()=>t.store("documentMutations").X({Y:!0},((e,t)=>{let[n,r,s]=e;const o=my(r);return i(o.popLast())}))))}ei(e){const t=e.store("targets");return t.X(((e,n)=>{const r=D_(n),i=R_(this.serializer,r);return t.put(i)}))}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new Fg(Og.fromString(o.document.name).popFirst(5)):o.noDocument?Fg.fromSegments(o.noDocument.path):o.unknownDocument?Fg.fromSegments(o.unknownDocument.path):dg()).path.toArray();var o;const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>Xg.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=VE(this.serializer),i=new rI(sI.zs,this.serializer.fe);return n.j().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:jw();N_(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Xg.forEach(n,((e,n)=>{const s=new ig(n),o=V_.de(this.serializer,s),a=i.getIndexManager(s),l=_E.de(s,this.serializer,a,i.referenceDelegate);return new QE(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new jy(t,ly.ct),e).next()}))}))}}function aI(e){e.createObjectStore("targetDocuments",{keyPath:Sy}).createIndex("documentTargetsIndex",Ty,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Iy,{unique:!0}),e.createObjectStore("targetGlobal")}const lI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cI{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=i,this.window=s,this.document=o,this.ri=l,this.oi=c,this.ui=u,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!cI.D())throw new gg(mg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ME(this,r),this.di=t+"main",this.serializer=new T_(a),this.wi=new $g(this.di,this.ui,new oI(this.serializer)),this.Bs=new CE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=VE(this.serializer),this.qs=new F_,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===c&&cg("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new gg(mg.FAILED_PRECONDITION,lI);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Bs.getHighestSequenceNumber(e)))})).then((e=>{this.Os=new ly(e,this.ri)})).then((()=>{this.Fs=!0})).catch((e=>(this.wi&&this.wi.close(),Promise.reject(e))))}Ii(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>hI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ti(e).next((e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))))}))})).next((()=>this.Ei(e))).next((t=>this.isPrimary&&!t?this.Ai(e).next((()=>!1)):!!t&&this.vi(e).next((()=>!0)))))).catch((e=>{if(ty(e))return lg("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return lg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ii.enqueueRetryable((()=>this.fi(e))),this.isPrimary=e}))}Ti(e){return uI(e).get("owner").next((e=>Xg.resolve(this.Ri(e))))}Pi(e){return hI(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Vy(e,"clientMetadata");return t.j().next((e=>{const n=this.Si(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Xg.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this._i)for(const t of e)this._i.removeItem(this.Di(t.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.bi())).then((()=>this.pi()))))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?Xg.resolve(!0):uI(e).get("owner").next((t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new gg(mg.FAILED_PRECONDITION,lI);return!1}}return!(!this.networkEnabled||!this.inForeground)||hI(e).j().next((e=>void 0===this.Si(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&lg("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new jy(e,ly.ct);return this.Ai(t).next((()=>this.Pi(t)))})),this.wi.close(),this.Mi()}Si(e,t){return e.filter((e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId)))}$i(){return this.runTransaction("getActiveClients","readonly",(e=>hI(e).j().next((e=>this.Si(e,18e5).map((e=>e.clientId))))))}get started(){return this.Fs}getMutationQueue(e,t){return _E.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hE(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return V_.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){lg("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.ui)?Uy:14===s?Fy:13===s?My:12===s?Ly:11===s?Oy:void dg();var s;let o;return this.wi.runTransaction(e,r,i,(r=>(o=new jy(r,this.Os?this.Os.next():ly.ct),"readwrite-primary"===t?this.Ti(o).next((e=>!!e||this.Ei(o))).next((t=>{if(!t)throw cg("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.fi(!1))),new gg(mg.FAILED_PRECONDITION,Wg);return n(o)})).next((e=>this.vi(o).next((()=>e)))):this.Oi(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}Oi(e){return uI(e).get("owner").next((e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new gg(mg.FAILED_PRECONDITION,lI)}))}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uI(e).put("owner",t)}static D(){return $g.D()}Ai(e){const t=uI(e);return t.get("owner").next((e=>this.Ri(e)?(lg("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Xg.resolve()))}Vi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(cg("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.mi())))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;!Oi()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return lg("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return cg("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){cg("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function uI(e){return Vy(e,"owner")}function hI(e){return Vy(e,"clientMetadata")}function dI(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class fI{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=jw(),r=jw();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new fI(e,t.fromCache,n,r)}}class pI{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next((i=>i||this.Gi(e,t,r,n))).next((n=>n||this.Qi(e,t)))}Ki(e,t){if(fw(t))return Xg.resolve(null);let n=vw(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=bw(t,null,"F"),n=vw(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=jw(...r);return this.Ui.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,bw(t,null,"F")):this.Wi(e,s,t,n)}))))})))))}Gi(e,t,n,r){return fw(t)||r.isEqual(Rg.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((i=>{const s=this.ji(t,i);return this.zi(t,s,n,r)?this.Qi(e,t):(ag()<=rs.DEBUG&&lg("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Iw(t)),this.Wi(e,s,t,qg(r,-1)))}))}ji(e,t){let n=new Wy(kw(e));return t.forEach(((t,r)=>{Sw(e,r)&&(n=n.add(r))})),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return ag()<=rs.DEBUG&&lg("QueryEngine","Using full collection scan to execute query:",Iw(t)),this.Ui.getDocumentsMatchingQuery(e,t,Gg.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class mI{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Ky(xg),this.Yi=new xw((e=>iw(e)),sw),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QE(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function gI(e,t,n,r){return new mI(e,t,n,r)}async function yI(e,t){const n=pg(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=jw();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({er:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function vI(e){const t=pg(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Bs.getLastRemoteSnapshotVersion(e)))}function wI(e,t,n){let r=jw(),i=jw();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Nw();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Rg.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):lg("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{nr:r,sr:i}}))}function bI(e,t){const n=pg(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function _I(e,t){const n=pg(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Bs.getTargetData(e,t).next((i=>i?(r=i,Xg.resolve(r)):n.Bs.allocateTargetId(e).next((i=>(r=new S_(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function EI(e,t,n){const r=pg(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ty(e))throw e;lg("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function II(e,t,n){const r=pg(e);let i=Rg.min(),s=jw();return r.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const r=pg(e),i=r.Yi.get(n);return void 0!==i?Xg.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,vw(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:Rg.min(),n?s:jw()))).next((e=>(kI(r,Tw(t),e),{documents:e,ir:s})))))}function SI(e,t){const n=pg(e),r=pg(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.le(e,t).next((e=>e?e.target:null))))}function TI(e,t){const n=pg(e),r=n.Xi.get(t)||Rg.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Zi.getAllFromCollectionGroup(e,t,qg(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(kI(n,t,e),e)))}function kI(e,t,n){let r=e.Xi.get(t)||Rg.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}async function CI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jw();const r=await _I(e,vw(P_(t.bundledQuery))),i=pg(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Zb(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.qs.saveNamedQuery(e,t);const o=r.withResumeToken($y.EMPTY_BYTE_STRING,s);return i.Ji=i.Ji.insert(o.targetId,o),i.Bs.updateTargetData(e,o).next((()=>i.Bs.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Bs.addMatchingKeys(e,n,r.targetId))).next((()=>i.qs.saveNamedQuery(e,t)))}))}function xI(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function AI(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function NI(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class DI{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static ar(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new gg(r.error.code,r.error.message))),s?new DI(e,t,r.state,i):(cg("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class RI{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static ar(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new gg(n.error.code,n.error.message))),i?new RI(e,n.state,r):(cg("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class PI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=zw();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=hy(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new PI(e,i):(cg("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class OI{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new OI(t.clientId,t.onlineState):(cg("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class LI{constructor(){this.activeTargetIds=zw()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MI{constructor(e,t,n,r,i){this.window=e,this.ii=t,this.persistenceKey=n,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Ky(xg),this.started=!1,this.yr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.pr=xI(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new LI),this.Tr=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const n of e){if(n===this.wr)continue;const e=this.getItem(xI(this.persistenceKey,n));if(e){const t=PI.ar(n,e);t&&(this.gr=this.gr.insert(t.clientId,t))}}this.Pr();const t=this.storage.getItem(this.vr);if(t){const e=this.br(t);e&&this.Vr(e)}for(const n of this.yr)this.mr(n);this.yr=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,n){this.Dr(e,t,n),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(NI(this.persistenceKey,e));if(n){const r=RI.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(NI(this.persistenceKey,e))}updateQueryState(e,t,n){this.kr(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Cr(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return lg("SharedClientState","READ",e,t),t}setItem(e,t){lg("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){lg("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const t=e;if(t.storageArea===this.storage){if(lg("SharedClientState","EVENT",t.key,t.newValue),t.key===this.pr)return void cg("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Tr.test(t.key)){if(null==t.newValue){const e=this.Or(t.key);return this.Fr(e,null)}{const e=this.Br(t.key,t.newValue);if(e)return this.Fr(e.clientId,e)}}else if(this.Er.test(t.key)){if(null!==t.newValue){const e=this.Lr(t.key,t.newValue);if(e)return this.qr(e)}}else if(this.Ar.test(t.key)){if(null!==t.newValue){const e=this.Ur(t.key,t.newValue);if(e)return this.Kr(e)}}else if(t.key===this.vr){if(null!==t.newValue){const e=this.br(t.newValue);if(e)return this.Vr(e)}}else if(t.key===this.Ir){const e=function(e){let t=ly.ct;if(null!=e)try{const n=JSON.parse(e);fg("number"==typeof n),t=n}catch(e){cg("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==ly.ct&&this.sequenceNumberHandler(e)}else if(t.key===this.Rr){const e=this.Gr(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Qr(e))))}}else this.yr.push(t)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,n){const r=new DI(this.currentUser,e,t,n),i=AI(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}Cr(e){const t=AI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){const t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}kr(e,t,n){const r=NI(this.persistenceKey,e),i=new RI(e,t,n);this.setItem(r,i.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const n=this.Or(e);return PI.ar(n,t)}Lr(e,t){const n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return DI.ar(new ig(i),r,t)}Ur(e,t){const n=this.Ar.exec(e),r=Number(n[1]);return RI.ar(r,t)}br(e){return OI.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);lg("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const n=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),i=this.Sr(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Wr(s,o).then((()=>{this.gr=n}))}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=zw();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class FI{constructor(){this.Hr=new LI,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new LI,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class UI{Yr(e){}shutdown(){}}class jI{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){lg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){lg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let VI=null;function zI(){return null===VI?VI=268435456+Math.round(2147483648*Math.random()):VI++,"0x"+VI.toString(16)}const BI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qI{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const KI="WebChannelConnection";class GI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=zI(),o=this.To(e,t);lg("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then((t=>(lg("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw ug("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+sg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}To(e,t){const n=BI[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=zI();return new Promise(((s,o)=>{const a=new eg;a.setWithCredentials(!0),a.listenOnce(Ym.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Qm.NO_ERROR:const t=a.getResponseJson();lg(KI,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Qm.TIMEOUT:lg(KI,"RPC '".concat(e,"' ").concat(i," timed out")),o(new gg(mg.DEADLINE_EXCEEDED,"Request time out"));break;case Qm.HTTP_ERROR:const n=a.getStatus();if(lg(KI,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(mg).indexOf(t)>=0?t:mg.UNKNOWN}(t.status);o(new gg(e,t.message))}else o(new gg(mg.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new gg(mg.UNAVAILABLE,"Connection failed."));break;default:dg()}}finally{lg(KI,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);lg(KI,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Ro(e,t,n){const r=zI(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Hm(),o=Wm(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new $m({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");lg(KI,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new qI({ro:t=>{d?lg(KI,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(lg(KI,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),lg(KI,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Zm.EventType.OPEN,(()=>{d||lg(KI,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Zm.EventType.CLOSE,(()=>{d||(d=!0,lg(KI,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.wo())})),p(u,Zm.EventType.ERROR,(t=>{d||(d=!0,ug(KI,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.wo(new gg(mg.UNAVAILABLE,"The operation could not be completed")))})),p(u,Zm.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];fg(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){lg(KI,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Sb[e];if(void 0!==t)return Cb(t)}(t),i=o.message;void 0===n&&(n=mg.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.wo(new gg(n,i)),u.close()}else lg(KI,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f._o(i)}})),p(o,Xm.STAT_EVENT,(t=>{t.stat===Jm.PROXY?lg(KI,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Jm.NOPROXY&&lg(KI,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function HI(){return"undefined"!=typeof window?window:null}function WI(){return"undefined"!=typeof document?document:null}function QI(e){return new Qb(e,!0)}class YI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&lg("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(()=>(this.Co=Date.now(),e()))),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class XI{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new YI(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(()=>this.zo())))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===mg.RESOURCE_EXHAUSTED?(cg(t.toString()),cg("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===mg.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)}),(t=>{e((()=>{const e=new gg(mg.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)}))}))}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((()=>{n((()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,(()=>(this.Ko()&&(this.state=3),Promise.resolve()))),this.listener.uo())))})),this.stream.ao((e=>{n((()=>this.tu(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Go(){this.state=5,this.qo.No((async()=>{this.state=0,this.start()}))}tu(e){return lg("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget((()=>this.Fo===e?t():(lg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JI extends XI{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:dg()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(fg(void 0===t||"string"==typeof t),$y.fromBase64String(t||"")):(fg(void 0===t||t instanceof Uint8Array),$y.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?mg.UNKNOWN:Cb(e.code);return new gg(t,e.message||"")}(o);n=new Vb(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=r_(e,r.document.name),s=Zb(r.document.updateTime),o=r.document.createTime?Zb(r.document.createTime):Rg.min(),a=new Av({mapValue:{fields:r.document.fields}}),l=Dv.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ub(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=r_(e,r.document),s=r.readTime?Zb(r.readTime):Rg.min(),o=Dv.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ub([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=r_(e,r.document),s=r.removedTargetIds||[];n=new Ub([],s,i,null)}else{if(!("filter"in t))return dg();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Ib(r,i),o=e.targetId;n=new jb(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Rg.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Rg.min():t.readTime?Zb(t.readTime):Rg.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=o_(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ow(r)?{documents:d_(e,r)}:{query:f_(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Jb(e,t.resumeToken);const r=Yb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Rg.min())>0){n.readTime=Xb(e,t.snapshotVersion.toTimestamp());const r=Yb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dg()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=o_(this.serializer),t.removeTarget=e,this.Wo(t)}}class $I extends XI{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(fg(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(fg(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Zb(e.updateTime):Zb(t);return n.isEqual(Rg.min())&&(n=Zb(t)),new ib(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Zb(e.commitTime);return this.listener.cu(n,t)}return fg(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=o_(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>u_(this.serializer,e)))};this.Wo(t)}}class ZI extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new gg(mg.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.Io(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===mg.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new gg(mg.UNKNOWN,e.toString())}))}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.vo(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===mg.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new gg(mg.UNKNOWN,e.toString())}))}terminate(){this.lu=!0}}class eS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve()))))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(cg(t),this.mu=!1):lg("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class tS{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr((e=>{n.enqueueAndForget((async()=>{uS(this)&&(lg("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=pg(e);t.vu.add(4),await rS(t),t.bu.set("Unknown"),t.vu.delete(4),await nS(t)}(this))}))})),this.bu=new eS(n,r)}}async function nS(e){if(uS(e))for(const t of e.Ru)await t(!0)}async function rS(e){for(const t of e.Ru)await t(!1)}function iS(e,t){const n=pg(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),cS(n)?lS(n):xS(n).Ko()&&oS(n,t))}function sS(e,t){const n=pg(e),r=xS(n);n.Au.delete(t),r.Ko()&&aS(n,t),0===n.Au.size&&(r.Ko()?r.jo():uS(n)&&n.bu.set("Unknown"))}function oS(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Rg.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}xS(e).su(t)}function aS(e,t){e.Vu.qt(t),xS(e).iu(t)}function lS(e){e.Vu=new Bb({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),xS(e).start(),e.bu.gu()}function cS(e){return uS(e)&&!xS(e).Uo()&&e.Au.size>0}function uS(e){return 0===pg(e).vu.size}function hS(e){e.Vu=void 0}async function dS(e){e.Au.forEach(((t,n)=>{oS(e,t)}))}async function fS(e,t){hS(e),cS(e)?(e.bu.Iu(t),lS(e)):e.bu.set("Unknown")}async function pS(e,t,n){if(e.bu.set("Online"),t instanceof Vb&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){lg("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await mS(e,n)}else if(t instanceof Ub?e.Vu.Ht(t):t instanceof jb?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Rg.min()))try{const t=await vI(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken($y.EMPTY_BYTE_STRING,r.snapshotVersion)),aS(e,t);const i=new S_(r.target,t,n,r.sequenceNumber);oS(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){lg("RemoteStore","Failed to raise snapshot:",t),await mS(e,t)}}async function mS(e,t,n){if(!ty(t))throw t;e.vu.add(1),await rS(e),e.bu.set("Offline"),n||(n=()=>vI(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{lg("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await nS(e)}))}function gS(e,t){return t().catch((n=>mS(e,n,t)))}async function yS(e){const t=pg(e),n=AS(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;vS(t);)try{const e=await bI(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,wS(t,e)}catch(e){await mS(t,e)}bS(t)&&_S(t)}function vS(e){return uS(e)&&e.Eu.length<10}function wS(e,t){e.Eu.push(t);const n=AS(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function bS(e){return uS(e)&&!AS(e).Uo()&&e.Eu.length>0}function _S(e){AS(e).start()}async function ES(e){AS(e).hu()}async function IS(e){const t=AS(e);for(const n of e.Eu)t.uu(n.mutations)}async function SS(e,t,n){const r=e.Eu.shift(),i=_b.from(r,t,n);await gS(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await yS(e)}async function TS(e,t){t&&AS(e).ou&&await async function(e,t){if(kb(n=t.code)&&n!==mg.ABORTED){const n=e.Eu.shift();AS(e).Qo(),await gS(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await yS(e)}var n}(e,t),bS(e)&&_S(e)}async function kS(e,t){const n=pg(e);n.asyncQueue.verifyOperationInProgress(),lg("RemoteStore","RemoteStore received new credentials");const r=uS(n);n.vu.add(3),await rS(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await nS(n)}async function CS(e,t){const n=pg(e);t?(n.vu.delete(2),await nS(n)):t||(n.vu.add(2),await rS(n),n.bu.set("Unknown"))}function xS(e){return e.Su||(e.Su=function(e,t,n){const r=pg(e);return r.fu(),new JI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:dS.bind(null,e),ao:fS.bind(null,e),nu:pS.bind(null,e)}),e.Ru.push((async t=>{t?(e.Su.Qo(),cS(e)?lS(e):e.bu.set("Unknown")):(await e.Su.stop(),hS(e))}))),e.Su}function AS(e){return e.Du||(e.Du=function(e,t,n){const r=pg(e);return r.fu(),new $I(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:ES.bind(null,e),ao:TS.bind(null,e),au:IS.bind(null,e),cu:SS.bind(null,e)}),e.Ru.push((async t=>{t?(e.Du.Qo(),await yS(e)):(await e.Du.stop(),e.Eu.length>0&&(lg("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]))}))),e.Du}class NS{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new yg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new NS(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gg(mg.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function DS(e,t){if(cg("AsyncQueue","".concat(t,": ").concat(e)),ty(e))return new gg(mg.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class RS{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Fg.comparator(t.key,n.key):(e,t)=>Fg.comparator(e.key,t.key),this.keyedMap=Rw(),this.sortedSet=new Ky(this.comparator)}static emptySet(e){return new RS(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof RS))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new RS;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class PS{constructor(){this.Cu=new Ky(Fg.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):dg():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class OS{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new OS(e,t,RS.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_w(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class LS{constructor(){this.Nu=void 0,this.listeners=[]}}class MS{constructor(){this.queries=new xw((e=>Ew(e)),_w),this.onlineState="Unknown",this.ku=new Set}}async function FS(e,t){const n=pg(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new LS),i)try{s.Nu=await n.onListen(r)}catch(e){const n=DS(e,"Initialization of query '".concat(Iw(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&zS(n)}async function US(e,t){const n=pg(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function jS(e,t){const n=pg(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(i)&&(r=!0);t.Nu=i}}r&&zS(n)}function VS(e,t,n){const r=pg(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function zS(e){e.ku.forEach((e=>{e.next()}))}class BS{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new OS(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=OS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class qS{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class KS{constructor(e){this.serializer=e}rr(e){return r_(this.serializer,e)}ur(e){return e.metadata.exists?c_(this.serializer,e.document,!1):Dv.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Zb(e)}}class GS{constructor(e,t,n){this.ju=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HS(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const n=Og.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,n=new KS(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.rr(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||jw()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=pg(e);let s=jw(),o=Nw();for(const c of n){const e=t.rr(c.metadata.name);c.document&&(s=s.add(e));const n=t.ur(c);n.setReadTime(t.cr(c.metadata.readTime)),o=o.insert(e,n)}const a=i.Zi.newChangeBuffer({trackRemovals:!0}),l=await _I(i,function(e){return vw(dw(Og.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>wI(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Bs.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Bs.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr))).next((()=>t.nr))))))}(this.localStore,new KS(this.serializer),this.documents,this.ju.id),t=this.Wu(this.documents);for(const n of this.queries)await CI(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function HS(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class WS{constructor(e){this.key=e}}class QS{constructor(e){this.key=e}}class YS{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=jw(),this.mutatedKeys=jw(),this.tc=kw(e),this.ec=new RS(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new PS,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Sw(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dg()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc))),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new OS(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new PS,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach((e=>this.Yu=this.Yu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Yu=this.Yu.delete(e))),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=jw(),this.ec.forEach((e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))}));const t=[];return e.forEach((e=>{this.Zu.has(e)||t.push(new QS(e))})),this.Zu.forEach((n=>{e.has(n)||t.push(new WS(n))})),t}hc(e){this.Yu=e.ir,this.Zu=jw();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return OS.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class XS{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class JS{constructor(e){this.key=e,this.fc=!1}}class $S{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new xw((e=>Ew(e)),_w),this._c=new Map,this.mc=new Set,this.gc=new Ky(Fg.comparator),this.yc=new Map,this.Ic=new JE,this.Tc={},this.Ec=new Map,this.Ac=kE.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function ZS(e,t){const n=TT(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await _I(n.localStore,vw(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await eT(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&iS(n.remoteStore,e)}return i}async function eT(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await II(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.sc(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return hT(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await II(e.localStore,t,!0),o=new YS(t,s.ir),a=o.sc(s.documents),l=Fb.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);hT(e,n,c.cc);const u=new XS(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function tT(e,t){const n=pg(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter((e=>!_w(e,t)))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await EI(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),sS(n.remoteStore,r.targetId),cT(n,r.targetId)})).catch(Yg)):(cT(n,r.targetId),await EI(n.localStore,r.targetId,!0))}async function nT(e,t){const n=pg(e);try{const e=await function(e,t){const n=pg(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken($y.EMPTY_BYTE_STRING,Rg.min()).withLastLimboFreeSnapshotVersion(Rg.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Bs.updateTargetData(e,c))}));let a=Nw(),l=jw();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(wI(e,s,t.documentUpdates).next((e=>{a=e.nr,l=e.sr}))),!r.isEqual(Rg.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next((t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Xg.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ji=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.yc.get(t);r&&(fg(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?fg(r.fc):e.removedDocuments.size>0&&(fg(r.fc),r.fc=!1))})),await pT(n,e,t)}catch(e){await Yg(e)}}function rT(e,t,n){const r=pg(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach(((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=pg(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Mu(t)&&(r=!0)})),r&&zS(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function iT(e,t,n){const r=pg(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new Ky(Fg.comparator);e=e.insert(s,Dv.newNoDocument(s,Rg.min()));const n=jw().add(s),i=new Mb(Rg.min(),new Map,new Ky(xg),e,n);await nT(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),fT(r)}else await EI(r.localStore,t,!1).then((()=>cT(r,t,n))).catch(Yg)}async function sT(e,t){const n=pg(e),r=t.batch.batchId;try{const e=await function(e,t){const n=pg(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Xg.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);fg(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=jw();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);lT(n,r,null),aT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pT(n,e)}catch(e){await Yg(e)}}async function oT(e,t,n){const r=pg(e);try{const e=await function(e,t){const n=pg(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(fg(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);lT(r,t,n),aT(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await pT(r,e)}catch(n){await Yg(n)}}function aT(e,t){(e.Ec.get(t)||[]).forEach((e=>{e.resolve()})),e.Ec.delete(t)}function lT(e,t,n){const r=pg(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function cT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((t=>{e.Ic.containsKey(t)||uT(e,t)}))}function uT(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(sS(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),fT(e))}function hT(e,t,n){for(const r of n)r instanceof WS?(e.Ic.addReference(r.key,t),dT(e,r)):r instanceof QS?(lg("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||uT(e,r.key)):dg()}function dT(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(lg("SyncEngine","New document in limbo: "+n),e.mc.add(r),fT(e))}function fT(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Fg(Og.fromString(t)),r=e.Ac.next();e.yc.set(r,new JS(n)),e.gc=e.gc.insert(n,r),iS(e.remoteStore,new S_(vw(dw(n.path)),r,"TargetPurposeLimboResolution",ly.ct))}}async function pT(e,t,n){const r=pg(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach(((e,a)=>{o.push(r.Rc(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=fI.Li(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=pg(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Xg.forEach(t,(t=>Xg.forEach(t.Fi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Xg.forEach(t.Bi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ty(e))throw e;lg("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,i)}}}(r.localStore,s))}async function mT(e,t){const n=pg(e);if(!n.currentUser.isEqual(t)){lg("SyncEngine","User change. New user:",t.toKey());const e=await yI(n.localStore,t);n.currentUser=t,function(e,t){e.Ec.forEach((e=>{e.forEach((e=>{e.reject(new gg(mg.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await pT(n,e.er)}}function gT(e,t){const n=pg(e),r=n.yc.get(t);if(r&&r.fc)return jw().add(r.key);{let e=jw();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}async function yT(e,t){const n=pg(e),r=await II(n.localStore,t.query,!0),i=t.view.hc(r);return n.isPrimaryClient&&hT(n,t.targetId,i.cc),i}async function vT(e,t){const n=pg(e);return TI(n.localStore,t).then((e=>pT(n,e)))}async function wT(e,t,n,r){const i=pg(e),s=await function(e,t){const n=pg(e),r=pg(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Sn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Xg.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await yS(i.remoteStore):"acknowledged"===n||"rejected"===n?(lT(i,t,r||null),aT(i,t),function(e,t){pg(pg(e).mutationQueue).Cn(t)}(i.localStore,t)):dg(),await pT(i,s)):lg("SyncEngine","Cannot apply mutation batch with id: "+t)}async function bT(e,t,n){const r=pg(e),i=[],s=[];for(const o of t){let e;const t=r._c.get(o);if(t&&0!==t.length){e=await _I(r.localStore,vw(t[0]));for(const e of t){const t=r.wc.get(e),n=await yT(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await SI(r.localStore,o);e=await _I(r.localStore,t),await eT(r,_T(t),o,!1,e.resumeToken)}i.push(e)}return r.dc.nu(s),i}function _T(e){return hw(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ET(e){const t=pg(e);return pg(pg(t.localStore).persistence).$i()}async function IT(e,t,n,r){const i=pg(e);if(i.vc)return void lg("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await TI(i.localStore,Tw(s[0])),r=Mb.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,$y.EMPTY_BYTE_STRING);await pT(i,e,r);break}case"rejected":await EI(i.localStore,t,!0),cT(i,t,r);break;default:dg()}}async function ST(e,t,n){const r=TT(e);if(r.vc){for(const e of t){if(r._c.has(e)){lg("SyncEngine","Adding an already active target "+e);continue}const t=await SI(r.localStore,e),n=await _I(r.localStore,t);await eT(r,_T(t),n.targetId,!1,n.resumeToken),iS(r.remoteStore,n)}for(const e of n)r._c.has(e)&&await EI(r.localStore,e,!1).then((()=>{sS(r.remoteStore,e),cT(r,e)})).catch(Yg)}}function TT(e){const t=pg(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=iT.bind(null,t),t.dc.nu=jS.bind(null,t.eventManager),t.dc.Pc=VS.bind(null,t.eventManager),t}function kT(e){const t=pg(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=sT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oT.bind(null,t),t}class CT{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=QI(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return gI(this.persistence,new pI,e.initialUser,this.serializer)}createPersistence(e){return new rI(sI.zs,this.serializer)}createSharedClientState(e){return new FI}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class xT extends CT{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await kT(this.Vc.syncEngine),await yS(this.Vc.remoteStore),await this.persistence.Ii((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return gI(this.persistence,new pI,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new PE(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new ay(t,this.persistence);return new oy(e.asyncQueue,n)}createPersistence(e){const t=dI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vE.withCacheSize(this.cacheSizeBytes):vE.DEFAULT;return new cI(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,HI(),WI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new FI}}class AT extends xT{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Vc.syncEngine;this.sharedClientState instanceof MI&&(this.sharedClientState.syncEngine={jr:wT.bind(null,t),zr:IT.bind(null,t),Wr:ST.bind(null,t),$i:ET.bind(null,t),Qr:vT.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ii((async e=>{await async function(e,t){const n=pg(e);if(TT(n),kT(n),!0===t&&!0!==n.vc){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await bT(n,e.toArray());n.vc=!0,await CS(n.remoteStore,!0);for(const r of t)iS(n.remoteStore,r)}else if(!1===t&&!1!==n.vc){const e=[];let t=Promise.resolve();n._c.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(cT(n,i),EI(n.localStore,i,!0)))),sS(n.remoteStore,i)})),await t,await bT(n,e),function(e){const t=pg(e);t.yc.forEach(((e,n)=>{sS(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new Ky(Fg.comparator)}(n),n.vc=!1,await CS(n.remoteStore,!1)}}(this.Vc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=HI();if(!MI.D(t))throw new gg(mg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=dI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new MI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class NT{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>rT(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=mT.bind(null,this.syncEngine),await CS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new MS}createDatastore(e){const t=QI(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new GI(r));var r;return function(e,t,n,r){return new ZI(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>rT(this.syncEngine,e,0),s=jI.D()?new jI:new UI,new tS(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new $S(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=pg(e);lg("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await rS(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}function DT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class RT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):cg("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class PT{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new yg,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((e=>{e&&e.Qu()?this.metadata.resolve(e.Gu.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(e=>this.metadata.reject(e)))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(null===e)return null;const t=this.xc.decode(e),n=Number(t);isNaN(n)&&this.Mc("length string (".concat(t,") is not valid number"));const r=await this.$c(n);return new qS(JSON.parse(r),e.length+n)}Oc(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(0===this.buffer.length)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const t=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Mc(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}async Fc(){const e=await this.Cc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class OT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new gg(mg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=pg(e),r=o_(n.serializer)+"/documents",i={documents:t.map((e=>n_(n.serializer,e)))},s=await n.vo("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){fg(!!t.found),t.found.name,t.found.updateTime;const n=r_(e,t.found.name),r=Zb(t.found.updateTime),i=t.found.createTime?Zb(t.found.createTime):Rg.min(),s=new Av({mapValue:{fields:t.found.fields}});return Dv.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){fg(!!t.missing),fg(!!t.readTime);const n=r_(e,t.missing),r=Zb(t.readTime);return Dv.newNoDocument(n,r)}(e,t):dg()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());fg(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new vb(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Fg.fromPath(t);this.mutations.push(new wb(n,this.precondition(n)))})),await async function(e,t){const n=pg(e),r=o_(n.serializer)+"/documents",i={writes:t.map((e=>u_(n.serializer,e)))};await n.Io("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dg();t=Rg.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new gg(mg.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Rg.min())?sb.exists(!1):sb.updateTime(t):sb.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rg.min()))throw new gg(mg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sb.updateTime(t)}return sb.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class LT{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Bc=n.maxAttempts,this.qo=new YI(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No((async()=>{const e=new OT(this.datastore),t=this.qc(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Uc(e)}))))})).catch((e=>{this.Uc(e)}))}))}qc(e){try{const t=this.updateFunction(e);return!cy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((()=>(this.Lc(),Promise.resolve())))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!kb(t)}return!1}}class MT{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=ig.UNAUTHENTICATED,this.clientId=Cg.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{lg("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(lg("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new gg(mg.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Cx){const n=DS(Cx,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function FT(e,t){e.asyncQueue.verifyOperationInProgress(),lg("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await yI(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function UT(e,t){e.asyncQueue.verifyOperationInProgress();const n=await VT(e);lg("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>kS(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>kS(t.remoteStore,n))),e._onlineComponents=t}function jT(e){return"FirebaseError"===e.name?e.code===mg.FAILED_PRECONDITION||e.code===mg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function VT(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){lg("FirestoreClient","Using user provided OfflineComponentProvider");try{await FT(e,e._uninitializedComponentsProvider._offline)}catch(Cx){const n=Cx;if(!jT(n))throw n;ug("Error using user provided cache. Falling back to memory cache: "+n),await FT(e,new CT)}}else lg("FirestoreClient","Using default OfflineComponentProvider"),await FT(e,new CT);return e._offlineComponents}async function zT(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(lg("FirestoreClient","Using user provided OnlineComponentProvider"),await UT(e,e._uninitializedComponentsProvider._online)):(lg("FirestoreClient","Using default OnlineComponentProvider"),await UT(e,new NT))),e._onlineComponents}function BT(e){return VT(e).then((e=>e.persistence))}function qT(e){return VT(e).then((e=>e.localStore))}function KT(e){return zT(e).then((e=>e.remoteStore))}function GT(e){return zT(e).then((e=>e.syncEngine))}function HT(e){return zT(e).then((e=>e.datastore))}async function WT(e){const t=await zT(e),n=t.eventManager;return n.onListen=ZS.bind(null,t.syncEngine),n.onUnlisten=tT.bind(null,t.syncEngine),n}function QT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new yg;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new RT({next:s=>{t.enqueueAndForget((()=>US(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new gg(mg.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new gg(mg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new BS(dw(n.path),s,{includeMetadataChanges:!0,Ku:!0});return FS(e,o)}(await WT(e),e.asyncQueue,t,n,r))),r.promise}function YT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new yg;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new RT({next:n=>{t.enqueueAndForget((()=>US(e,o))),n.fromCache&&"server"===r.source?i.reject(new gg(mg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new BS(n,s,{includeMetadataChanges:!0,Ku:!0});return FS(e,o)}(await WT(e),e.asyncQueue,t,n,r))),r.promise}function XT(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Nb().encode(e):e,function(e,t){return new PT(e,t)}(function(e,t){if(e instanceof Uint8Array)return DT(e,t);if(e instanceof ArrayBuffer)return DT(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,QI(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=pg(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=pg(e),r=Zb(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.qs.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(HS(r));const i=new GS(r,e.localStore,t.serializer);let s=await t.bc();for(;s;){const e=await i.zu(s);e&&n._updateProgress(e),s=await t.bc()}const o=await i.complete();return await pT(e,o.Ju,void 0),await function(e,t){const n=pg(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.qs.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Hu)}catch(e){return ug("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await GT(e),i,r)}))}function JT(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const $T=new Map;function ZT(e,t,n){if(!n)throw new gg(mg.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ek(e,t,n,r){if(!0===t&&!0===r)throw new gg(mg.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function tk(e){if(!Fg.isDocumentKey(e))throw new gg(mg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function nk(e){if(Fg.isDocumentKey(e))throw new gg(mg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function rk(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":dg()}function ik(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new gg(mg.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rk(e);throw new gg(mg.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function sk(e,t){if(t<=0)throw new gg(mg.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class ok{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new gg(mg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new gg(mg.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ek("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JT(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new gg(mg.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new gg(mg.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new gg(mg.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class ak{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ok({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new gg(mg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new gg(mg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ok(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new wg;switch(e.type){case"firstParty":return new Ig(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new gg(mg.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$T.get(e);t&&(lg("ComponentProvider","Removing Datastore"),$T.delete(e),t.terminate())}(this),Promise.resolve()}}function lk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=ik(e,ak))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&ug("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=ig.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ki(JSON.stringify({alg:"none",type:"JWT"})),ki(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new gg(mg.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new ig(s)}e._authCredentials=new bg(new vg(t,n))}}class ck{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hk(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ck(this.firestore,e,this._key)}}class uk{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new uk(this.firestore,e,this._query)}}class hk extends uk{constructor(e,t,n){super(e,t,dw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ck(this.firestore,null,new Fg(e))}withConverter(e){return new hk(this.firestore,e,this._path)}}function dk(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ji(e),ZT("collection","path",t),e instanceof ak){const n=Og.fromString(t,...r);return nk(n),new hk(e,null,n)}{if(!(e instanceof ck||e instanceof hk))throw new gg(mg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Og.fromString(t,...r));return nk(n),new hk(e.firestore,null,n)}}function fk(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ji(e),1===arguments.length&&(t=Cg.A()),ZT("doc","path",t),e instanceof ak){const n=Og.fromString(t,...r);return tk(n),new ck(e,null,new Fg(n))}{if(!(e instanceof ck||e instanceof hk))throw new gg(mg.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Og.fromString(t,...r));return tk(n),new ck(e.firestore,e instanceof hk?e.converter:null,new Fg(n))}}function pk(e,t){return e=Ji(e),t=Ji(t),(e instanceof ck||e instanceof hk)&&(t instanceof ck||t instanceof hk)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function mk(e,t){return e=Ji(e),t=Ji(t),e instanceof uk&&t instanceof uk&&e.firestore===t.firestore&&_w(e._query,t._query)&&e.converter===t.converter}class gk{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new YI(this,"async_queue_retry"),this.Xc=()=>{const e=WI();e&&lg("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=WI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=WI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise((()=>{}));const t=new yg;return this.ta((()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qc.push(e),this.ea())))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!ty(e))throw e;lg("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No((()=>this.ea()))}}ta(e){const t=this.Gc.then((()=>(this.Hc=!0,e().catch((e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw cg("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Hc=!1,e))))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=NS.createAndSchedule(this,e,t,n,(e=>this.na(e)));return this.zc.push(r),r}Zc(){this.Wc&&dg()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then((()=>{this.zc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()}))}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function yk(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class vk{constructor(){this._progressObserver={},this._taskCompletionResolver=new yg,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class wk extends ak{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new gk,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_k(this),this._firestoreClient.terminate()}}function bk(e){return e._firestoreClient||_k(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function _k(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new ov(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,JT(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new MT(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Ek(e,t,n){const r=new yg;return e.asyncQueue.enqueue((async()=>{try{await FT(e,n),await UT(e,t),r.resolve()}catch(e){const n=e;if(!jT(n))throw n;ug("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Ik(e){return function(e){const t=new yg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=pg(e);uS(n.remoteStore)||lg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=pg(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ec.get(e)||[];r.push(t),n.Ec.set(e,r)}catch(e){const n=DS(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await GT(e),t))),t.promise}(bk(e=ik(e,wk)))}function Sk(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await BT(e),n=await KT(e);return t.setNetworkEnabled(!0),function(e){const t=pg(e);return t.vu.delete(0),nS(t)}(n)}))}(bk(e=ik(e,wk)))}function Tk(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await BT(e),n=await KT(e);return t.setNetworkEnabled(!1),async function(e){const t=pg(e);t.vu.add(0),await rS(t),t.bu.set("Offline")}(n)}))}(bk(e=ik(e,wk)))}function kk(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=pg(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.qs.getNamedQuery(e,t)))}(await qT(e),t)))}(bk(e=ik(e,wk)),t).then((t=>t?new uk(e,null,t.query):null))}function Ck(e){if(e._initialized||e._terminated)throw new gg(mg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xk{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xk($y.fromBase64String(e))}catch(e){throw new gg(mg.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new xk($y.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ak{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new gg(mg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mg(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Nk{constructor(e){this._methodName=e}}class Dk{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new gg(mg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new gg(mg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xg(this._lat,e._lat)||xg(this._long,e._long)}}const Rk=/^__.*__$/;class Pk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new pb(e,this.data,this.fieldMask,t,this.fieldTransforms):new fb(e,this.data,t,this.fieldTransforms)}}class Ok{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new pb(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dg()}}class Mk{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Mk(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return nC(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Lk(this.ca)&&Rk.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Fk{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||QI(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Mk({ca:e,methodName:t,ga:n,path:Mg.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uk(e){const t=e._freezeSettings(),n=QI(e._databaseId);return new Fk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function jk(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);$k("Data must be an object, but it was:",o,r);const a=Xk(r,o);let l,c;if(s.merge)l=new Xy(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Zk(t,r,n);if(!o.contains(i))throw new gg(mg.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));rC(e,i)||e.push(i)}l=new Xy(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Pk(new Av(a),l,c)}class Vk extends Nk{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vk}}function zk(e,t,n){return new Mk({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Bk extends Nk{_toFieldTransform(e){return new rb(e.path,new Yw)}isEqual(e){return e instanceof Bk}}class qk extends Nk{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=zk(this,e,!0),n=this.pa.map((e=>Yk(e,t))),r=new Xw(n);return new rb(e.path,r)}isEqual(e){return this===e}}class Kk extends Nk{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=zk(this,e,!0),n=this.pa.map((e=>Yk(e,t))),r=new $w(n);return new rb(e.path,r)}isEqual(e){return this===e}}class Gk extends Nk{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new eb(e.serializer,Kw(e.serializer,this.Ia));return new rb(e.path,t)}isEqual(e){return this===e}}function Hk(e,t,n,r){const i=e.ya(1,t,n);$k("Data must be an object, but it was:",i,r);const s=[],o=Av.empty();By(r,((e,r)=>{const a=tC(t,e,n);r=Ji(r);const l=i.da(a);if(r instanceof Vk)s.push(a);else{const e=Yk(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Xy(s);return new Ok(o,a,i.fieldTransforms)}function Wk(e,t,n,r,i,s){const o=e.ya(1,t,n),a=[Zk(t,r,n)],l=[i];if(s.length%2!=0)throw new gg(mg.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Zk(t,s[d])),l.push(s[d+1]);const c=[],u=Av.empty();for(let d=a.length-1;d>=0;--d)if(!rC(c,a[d])){const e=a[d];let t=l[d];t=Ji(t);const n=o.da(e);if(t instanceof Vk)c.push(e);else{const r=Yk(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Xy(c);return new Ok(u,h,o.fieldTransforms)}function Qk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Yk(n,e.ya(r?4:3,t))}function Yk(e,t){if(Jk(e=Ji(e)))return $k("Unsupported field value:",t,e),Xk(e,t);if(e instanceof Nk)return function(e,t){if(!Lk(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Yk(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ji(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Kw(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Dg.fromDate(e);return{timestampValue:Xb(t.serializer,n)}}if(e instanceof Dg){const n=new Dg(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xb(t.serializer,n)}}if(e instanceof Dk)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof xk)return{bytesValue:Jb(t.serializer,e._byteString)};if(e instanceof ck){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:e_(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(rk(e)))}(e,t)}function Xk(e,t){const n={};return qy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):By(e,((e,r)=>{const i=Yk(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Jk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Dg||e instanceof Dk||e instanceof xk||e instanceof ck||e instanceof Nk)}function $k(e,t,n){if(!Jk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=rk(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Zk(e,t,n){if((t=Ji(t))instanceof Ak)return t._internalPath;if("string"==typeof t)return tC(e,t);throw nC("Field path arguments must be of type string or ",e,!1,void 0,n)}const eC=new RegExp("[~\\*/\\[\\]]");function tC(e,t,n){if(t.search(eC)>=0)throw nC("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Ak(...t.split("."))._internalPath}catch(r){throw nC("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function nC(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new gg(mg.INVALID_ARGUMENT,a+e+l)}function rC(e,t){return e.some((e=>e.isEqual(t)))}class iC{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ck(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sC extends iC{data(){return super.data()}}function oC(e,t){return"string"==typeof t?tC(e,t):t instanceof Ak?t._internalPath:t._delegate._internalPath}function aC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new gg(mg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lC{}class cC extends lC{}function uC(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof lC&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof dC)).length,n=e.filter((e=>e instanceof hC)).length;if(t>1||t>0&&n>0)throw new gg(mg.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class hC extends cC{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new hC(e,t,n)}_apply(e){const t=this._parse(e);return bC(e._query,t),new uk(e.firestore,e.converter,ww(e._query,t))}_parse(e){const t=Uk(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new gg(mg.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){wC(o,s);const t=[];for(const n of o)t.push(vC(r,e,n));a={arrayValue:{values:t}}}else a=vC(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||wC(o,s),a=Qk(n,"where",o,"in"===s||"not-in"===s);return Uv.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class dC extends lC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new dC(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:jv.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)bC(n,i),n=ww(n,i)}(e._query,t),new uk(e.firestore,e.converter,ww(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fC extends cC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fC(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new gg(mg.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new gg(mg.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Lv(t,n);return function(e,t){if(null===pw(e)){const n=mw(e);null!==n&&_C(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new uk(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new uw(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class pC extends cC{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new pC(e,t,n)}_apply(e){return new uk(e.firestore,e.converter,bw(e._query,this._limit,this._limitType))}}class mC extends cC{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new mC(e,t,n)}_apply(e){const t=yC(e,this.type,this._docOrFields,this._inclusive);return new uk(e.firestore,e.converter,function(e,t){return new uw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class gC extends cC{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new gC(e,t,n)}_apply(e){const t=yC(e,this.type,this._docOrFields,this._inclusive);return new uk(e.firestore,e.converter,function(e,t){return new uw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function yC(e,t,n,r){if(n[0]=Ji(n[0]),n[0]instanceof iC)return function(e,t,n,r,i){if(!r)throw new gg(mg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of yw(e))if(o.field.isKeyField())s.push(yv(t,r.key));else{const e=r.data.field(o.field);if(rv(e))throw new gg(mg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new gg(mg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Rv(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Uk(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new gg(mg.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new gg(mg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!gw(e)&&-1!==s.indexOf("/"))throw new gg(mg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(Og.fromString(s));if(!Fg.isDocumentKey(n))throw new gg(mg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Fg(n);a.push(yv(t,i))}else{const e=Qk(n,r,s);a.push(e)}}return new Rv(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function vC(e,t,n){if("string"==typeof(n=Ji(n))){if(""===n)throw new gg(mg.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gw(t)&&-1!==n.indexOf("/"))throw new gg(mg.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Og.fromString(n));if(!Fg.isDocumentKey(r))throw new gg(mg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return yv(e,new Fg(r))}if(n instanceof ck)return yv(e,n._key);throw new gg(mg.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(rk(n),"."))}function wC(e,t){if(!Array.isArray(e)||0===e.length)throw new gg(mg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function bC(e,t){if(t.isInequality()){const n=mw(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new gg(mg.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));const i=pw(e);null!==i&&_C(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new gg(mg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new gg(mg.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function _C(e,t,n){if(!n.isEqual(t))throw new gg(mg.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}class EC{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(uv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dg()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return By(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Dk(tv(e.latitude),tv(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=iv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(sv(e));default:return null}}convertTimestamp(e){const t=ev(e);return new Dg(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Og.fromString(e);fg(I_(n));const r=new av(n.get(1),n.get(3)),i=new Fg(n.popFirst(5));return r.isEqual(t)||cg("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function IC(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class SC extends EC{constructor(e){super(),this.firestore=e}convertBytes(e){return new xk(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ck(this.firestore,null,t)}}class TC{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kC extends iC{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new CC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(oC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class CC extends kC{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class xC{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new TC(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new CC(this._firestore,this._userDataWriter,n.key,n,new TC(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new gg(mg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new CC(e._firestore,e._userDataWriter,n.doc.key,n.doc,new TC(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new CC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new TC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:AC(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function AC(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dg()}}function NC(e,t){return e instanceof kC&&t instanceof kC?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof xC&&t instanceof xC&&e._firestore===t._firestore&&mk(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class DC extends EC{constructor(e){super(),this.firestore=e}convertBytes(e){return new xk(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ck(this.firestore,null,t)}}function RC(e){e=ik(e,ck);const t=ik(e.firestore,wk),n=bk(t),r=new DC(t);return function(e,t){const n=new yg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=pg(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new gg(mg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=DS(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await qT(e),t,n))),n.promise}(n,e._key).then((n=>new kC(t,r,e._key,n,new TC(null!==n&&n.hasLocalMutations,!0),e.converter)))}function PC(e){e=ik(e,uk);const t=ik(e.firestore,wk),n=bk(t),r=new DC(t);return function(e,t){const n=new yg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await II(e,t,!0),i=new YS(t,r.ir),s=i.sc(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=DS(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await qT(e),t,n))),n.promise}(n,e._query).then((n=>new xC(t,r,e,n)))}function OC(e,t,n){e=ik(e,ck);const r=ik(e.firestore,wk),i=IC(e.converter,t,n);return UC(r,[jk(Uk(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,sb.none())])}function LC(e,t,n){e=ik(e,ck);const r=ik(e.firestore,wk),i=Uk(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Ji(t))||t instanceof Ak?Wk(i,"updateDoc",e._key,t,n,a):Hk(i,"updateDoc",e._key,t),UC(r,[s.toMutation(e._key,sb.exists(!0))])}function MC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Ji(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||yk(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(yk(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof ck)h=ik(e.firestore,wk),d=dw(e._key.path),u={next:t=>{n[l]&&n[l](jC(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=ik(e,uk);h=ik(t.firestore,wk),d=t._query;const r=new DC(h);u={next:e=>{n[l]&&n[l](new xC(h,r,t,e))},error:n[l+1],complete:n[l+2]},aC(e._query)}return function(e,t,n,r){const i=new RT(r),s=new BS(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>FS(await WT(e),s))),()=>{i.Dc(),e.asyncQueue.enqueueAndForget((async()=>US(await WT(e),s)))}}(bk(h),d,c,u)}function FC(e,t){return function(e,t){const n=new RT(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){pg(e).ku.add(t),t.next()}(await WT(e),n))),()=>{n.Dc(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){pg(e).ku.delete(t)}(await WT(e),n)))}}(bk(e=ik(e,wk)),yk(t)?t:{next:t})}function UC(e,t){return function(e,t){const n=new yg;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=kT(e);try{const e=await function(e,t){const n=pg(e),r=Dg.now(),i=t.reduce(((e,t)=>e.add(t.key)),jw());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Nw(),l=jw();return n.Zi.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=hb(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new pb(e.key,t,Nv(t.value.mapValue),sb.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Pw(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Ky(xg)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await pT(r,e.changes),await yS(r.remoteStore)}catch(e){const t=DS(e,"Failed to persist write");n.reject(t)}}(await GT(e),t,n))),n.promise}(bk(e),t)}function jC(e,t,n){const r=n.docs.get(t._key),i=new DC(e);return new kC(e,i,t._key,r,new TC(n.hasPendingWrites,n.fromCache),t.converter)}const VC={maxAttempts:5};class zC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Uk(e)}set(e,t,n){this._verifyNotCommitted();const r=BC(e,this._firestore),i=IC(r.converter,t,n),s=jk(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,sb.none())),this}update(e,t,n){this._verifyNotCommitted();const r=BC(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Ji(t))||t instanceof Ak?Wk(this._dataReader,"WriteBatch.update",r._key,t,n,o):Hk(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,sb.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=BC(e,this._firestore);return this._mutations=this._mutations.concat(new vb(t._key,sb.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new gg(mg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function BC(e,t){if((e=Ji(e)).firestore!==t)throw new gg(mg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class qC extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Uk(e)}get(e){const t=BC(e,this._firestore),n=new SC(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return dg();const r=e[0];if(r.isFoundDocument())return new iC(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new iC(this._firestore,n,t._key,null,t.converter);throw dg()}))}set(e,t,n){const r=BC(e,this._firestore),i=IC(r.converter,t,n),s=jk(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=BC(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Ji(t))||t instanceof Ak?Wk(this._dataReader,"Transaction.update",r._key,t,n,o):Hk(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=BC(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=BC(e,this._firestore),n=new DC(this._firestore);return super.get(e).then((e=>new kC(this._firestore,n,t._key,e._document,new TC(!1,!1),t.converter)))}}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){sg=e}(fo),oo(new $i("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new wk(new _g(e.getProvider("auth-internal")),new Tg(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new gg(mg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new av(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),vo(rg,"3.13.0",e),vo(rg,"3.13.0","esm2017")}();function KC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new gg("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function GC(){if("undefined"===typeof Uint8Array)throw new gg("unimplemented","Uint8Arrays are not available in this environment.")}function HC(){if("undefined"==typeof atob)throw new gg("unimplemented","Blobs are unavailable in Firestore in this environment.")}class WC{constructor(e){this._delegate=e}static fromBase64String(e){return HC(),new WC(xk.fromBase64String(e))}static fromUint8Array(e){return GC(),new WC(xk.fromUint8Array(e))}toBase64(){return HC(),this._delegate.toBase64()}toUint8Array(){return GC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function QC(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class YC{enableIndexedDbPersistence(e,t){return function(e,t){Ck(e=ik(e,wk));const n=bk(e);if(n._uninitializedComponentsProvider)throw new gg(mg.FAILED_PRECONDITION,"SDK cache is already specified.");ug("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new NT;return Ek(n,i,new xT(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Ck(e=ik(e,wk));const t=bk(e);if(t._uninitializedComponentsProvider)throw new gg(mg.FAILED_PRECONDITION,"SDK cache is already specified.");ug("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new NT;return Ek(t,r,new AT(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new gg(mg.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new yg;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!$g.D())return Promise.resolve();const t=e+"main";await $g.delete(t)}(dI(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class XC{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof av||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||ug("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};lk(this._delegate,e,t,n)}enableNetwork(){return Sk(this._delegate)}disableNetwork(){return Tk(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,ek("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Ik(this._delegate)}onSnapshotsInSync(e){return FC(this._delegate,e)}get app(){if(!this._appCompat)throw new gg("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ux(this,dk(this._delegate,e))}catch(Cx){throw nx(Cx,"collection()","Firestore.collection()")}}doc(e){try{return new tx(this,fk(this._delegate,e))}catch(Cx){throw nx(Cx,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ax(this,function(e,t){if(e=ik(e,ak),ZT("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new gg(mg.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new uk(e,null,function(e){return new uw(Og.emptyPath(),e)}(t))}(this._delegate,e))}catch(Cx){throw nx(Cx,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=ik(e,wk);const r=Object.assign(Object.assign({},VC),n);return function(e){if(e.maxAttempts<1)throw new gg(mg.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new yg;return e.asyncQueue.enqueueAndForget((async()=>{const i=await HT(e);new LT(e.asyncQueue,i,n,t,r).run()})),r.promise}(bk(e),(n=>t(new qC(e,n))),r)}(this._delegate,(t=>e(new $C(this,t))))}batch(){return bk(this._delegate),new ZC(new zC(this._delegate,(e=>UC(this._delegate,e))))}loadBundle(e){return function(e,t){const n=bk(e=ik(e,wk)),r=new vk;return XT(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return kk(this._delegate,e).then((e=>e?new ax(this,e):null))}}class JC extends EC{constructor(e){super(),this.firestore=e}convertBytes(e){return new WC(new xk(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return tx.forKey(t,this.firestore,null)}}class $C{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new JC(e)}get(e){const t=hx(e);return this._delegate.get(t).then((e=>new sx(this._firestore,new kC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=hx(e);return n?(KC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=hx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=hx(e);return this._delegate.delete(t),this}}class ZC{constructor(e){this._delegate=e}set(e,t,n){const r=hx(e);return n?(KC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=hx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=hx(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ex{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new CC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ox(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=ex.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new ex(e,new JC(e),t),r.set(t,i)),i}}ex.INSTANCES=new WeakMap;class tx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JC(e)}static forPath(e,t,n){if(e.length%2!==0)throw new gg("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new tx(t,new ck(t._delegate,n,new Fg(e)))}static forKey(e,t,n){return new tx(t,new ck(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new ux(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ux(this.firestore,dk(this._delegate,e))}catch(Cx){throw nx(Cx,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Ji(e))instanceof ck&&pk(this._delegate,e)}set(e,t){t=KC("DocumentReference.set",t);try{return t?OC(this._delegate,e,t):OC(this._delegate,e)}catch(Cx){throw nx(Cx,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?LC(this._delegate,e):LC(this._delegate,e,t,...r)}catch(Cx){throw nx(Cx,"updateDoc()","DocumentReference.update()")}}delete(){return UC(ik((e=this._delegate).firestore,wk),[new vb(e._key,sb.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=rx(t),i=ix(t,(e=>new sx(this.firestore,new kC(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return MC(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?RC(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ik(e,ck);const t=ik(e.firestore,wk);return QT(bk(t),e._key,{source:"server"}).then((n=>jC(t,e,n)))}(this._delegate):function(e){e=ik(e,ck);const t=ik(e.firestore,wk);return QT(bk(t),e._key).then((n=>jC(t,e,n)))}(this._delegate),t.then((e=>new sx(this.firestore,new kC(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new tx(this.firestore,e?this._delegate.withConverter(ex.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function nx(e,t,n){return e.message=e.message.replace(t,n),e}function rx(e){for(const t of e)if("object"===typeof t&&!QC(t))return t;return{}}function ix(e,t){var n,r;let i;return i=QC(e[0])?e[0]:QC(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class sx{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new tx(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return NC(this._delegate,e._delegate)}}class ox extends sx{data(e){const t=this._delegate.data(e);return void 0!==t||dg(),t}}class ax{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new JC(e)}where(e,t,n){try{return new ax(this.firestore,uC(this._delegate,function(e,t,n){const r=t,i=oC("where",e);return hC._create(i,r,n)}(e,t,n)))}catch(Cx){throw nx(Cx,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ax(this.firestore,uC(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=oC("orderBy",e);return fC._create(n,t)}(e,t)))}catch(Cx){throw nx(Cx,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ax(this.firestore,uC(this._delegate,(sk("limit",t=e),pC._create("limit",t,"F"))))}catch(Cx){throw nx(Cx,"limit()","Query.limit()")}var t}limitToLast(e){try{return new ax(this.firestore,uC(this._delegate,(sk("limitToLast",t=e),pC._create("limitToLast",t,"L"))))}catch(Cx){throw nx(Cx,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new ax(this.firestore,uC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mC._create("startAt",t,!0)}(...arguments)))}catch(Cx){throw nx(Cx,"startAt()","Query.startAt()")}}startAfter(){try{return new ax(this.firestore,uC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mC._create("startAfter",t,!1)}(...arguments)))}catch(Cx){throw nx(Cx,"startAfter()","Query.startAfter()")}}endBefore(){try{return new ax(this.firestore,uC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gC._create("endBefore",t,!1)}(...arguments)))}catch(Cx){throw nx(Cx,"endBefore()","Query.endBefore()")}}endAt(){try{return new ax(this.firestore,uC(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gC._create("endAt",t,!0)}(...arguments)))}catch(Cx){throw nx(Cx,"endAt()","Query.endAt()")}}isEqual(e){return mk(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?PC(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ik(e,uk);const t=ik(e.firestore,wk),n=bk(t),r=new DC(t);return YT(n,e._query,{source:"server"}).then((n=>new xC(t,r,e,n)))}(this._delegate):function(e){e=ik(e,uk);const t=ik(e.firestore,wk),n=bk(t),r=new DC(t);return aC(e._query),YT(n,e._query).then((n=>new xC(t,r,e,n)))}(this._delegate),t.then((e=>new cx(this.firestore,new xC(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=rx(t),i=ix(t,(e=>new cx(this.firestore,new xC(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return MC(this._delegate,r,i)}withConverter(e){return new ax(this.firestore,e?this._delegate.withConverter(ex.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class lx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ox(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class cx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ax(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new ox(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new lx(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new ox(this._firestore,n))}))}isEqual(e){return NC(this._delegate,e._delegate)}}class ux extends ax{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new tx(this.firestore,e):null}doc(e){try{return new tx(this.firestore,void 0===e?fk(this._delegate):fk(this._delegate,e))}catch(Cx){throw nx(Cx,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=ik(e.firestore,wk),r=fk(e),i=IC(e.converter,t);return UC(n,[jk(Uk(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,sb.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new tx(this.firestore,e)))}isEqual(e){return pk(this._delegate,e._delegate)}withConverter(e){return new ux(this.firestore,e?this._delegate.withConverter(ex.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function hx(e){return ik(e,ck)}class dx{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Ak(...t)}static documentId(){return new dx(Mg.keyField().canonicalString())}isEqual(e){return(e=Ji(e))instanceof Ak&&this._delegate._internalPath.isEqual(e._internalPath)}}class fx{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Bk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new fx(e)}static delete(){const e=new Vk("deleteField");return e._methodName="FieldValue.delete",new fx(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qk("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new fx(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Kk("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new fx(e)}static increment(e){const t=new Gk("increment",e);return t._methodName="FieldValue.increment",new fx(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const px={Firestore:XC,GeoPoint:Dk,Timestamp:Dg,Blob:WC,Transaction:$C,WriteBatch:ZC,DocumentReference:tx,DocumentSnapshot:sx,Query:ax,QueryDocumentSnapshot:ox,QuerySnapshot:cx,CollectionReference:ux,FieldPath:dx,FieldValue:fx,setLogLevel:function(e){var t;t=e,og.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new $i("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},px)))}(e,((e,t)=>new XC(e,t,new YC))),e.registerVersion("@firebase/firestore-compat","0.3.12")}(Fo);var mx=function(){return mx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},mx.apply(this,arguments)};var gx=function(e){return{loading:void 0===e||null===e,value:e}},yx=function(e){var t=e?e():void 0,n=(0,o.useReducer)((function(e,t){switch(t.type){case"error":return mx({},e,{error:t.error,loading:!1,value:void 0});case"reset":return gx(t.defaultValue);case"value":return mx({},e,{error:void 0,loading:!1,value:t.value});default:return e}}),gx(t)),r=n[0],i=n[1],s=function(){var t=e?e():void 0;i({type:"reset",defaultValue:t})},a=function(e){i({type:"error",error:e})},l=function(e){i({type:"value",value:e})};return(0,o.useMemo)((function(){return{error:r.error,loading:r.loading,reset:s,setError:a,setValue:l,value:r.value}}),[r.error,r.loading,s,a,l,r.value])};const vx=Fo.initializeApp({apiKey:"AIzaSyDiQohmQoqWuSVwz0b33VQ-c5vCoyNJVPc",authDomain:"react-test-b3315.firebaseapp.com",projectId:"react-test-b3315",storageBucket:"react-test-b3315.appspot.com",messagingSenderId:"103930812840",appId:"1:103930812840:web:942459fd41f571307f659d",measurementId:"G-1PS4FYX20E"}),wx=(vx.firestore(),vx.auth());wx.onAuthStateChanged((e=>{e&&H("/")}));const bx=new Fo.auth.GoogleAuthProvider,_x=()=>(0,pi.jsx)(pi.Fragment,{children:(0,pi.jsx)("button",{onClick:e=>{e.preventDefault(),wx.signInWithPopup(bx).then((()=>{H("/")})).catch((e=>alert(e.message)))},children:"Sign In With Google"})});function Ex(){const[e,t]=function(e){var t=yx((function(){return e.currentUser})),n=t.error,r=t.loading,i=t.setError,s=t.setValue,a=t.value;(0,o.useEffect)((function(){var t=e.onAuthStateChanged(s,i);return function(){t()}}),[e]);var l=[a,r,n];return(0,o.useMemo)((function(){return l}),l)}(wx);return(0,pi.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark mb-3",children:(0,pi.jsx)("div",{className:"container-fluid",children:(0,pi.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:(0,pi.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[(0,pi.jsx)("li",{className:"nav-item",children:(0,pi.jsx)(jt,{className:"nav-link",to:"/",children:"Home"})}),(0,pi.jsx)("li",{className:"nav-item",children:(0,pi.jsx)(jt,{className:"nav-link",to:"/authors",children:"Authors"})}),e?(0,pi.jsx)("li",{className:"nav-item",children:(0,pi.jsx)("button",{className:"nav-link",onClick:()=>{wx.signOut().then((()=>{H("/")}))},children:"Logout"})}):(0,pi.jsx)("li",{className:"nav-item",children:(0,pi.jsx)(jt,{className:"nav-link",to:"/login",children:"Login"})})]})})})})}function Ix(){return(0,pi.jsx)(pi.Fragment,{children:(0,pi.jsx)("h1",{children:"About"})})}const Sx=[{path:"about",element:(0,pi.jsx)(Ix,{})},{path:"login",element:(0,pi.jsx)(_x,{})},{path:"authors/page?/:page?",element:(0,pi.jsx)(mi,{})},{path:"blog/:id",element:(0,pi.jsx)(_i,{})}],Tx=function(e,t){return ae({basename:null==t?void 0:t.basename,future:St({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:(n={window:null==t?void 0:t.window},void 0===n&&(n={}),v((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return m("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:g(t)}),null,n)),hydrationData:(null==t?void 0:t.hydrationData)||Ct(),routes:e,mapRouteProperties:It,unstable_dataStrategy:null==t?void 0:t.unstable_dataStrategy,unstable_patchRoutesOnMiss:null==t?void 0:t.unstable_patchRoutesOnMiss,window:null==t?void 0:t.window}).initialize();var n}([{path:"/",Component(){const e=hi();e(ni(1));const t=tn(ui);(0,o.useEffect)((()=>{fi.getAll(1e3,1).then((t=>{e(ai(t.length))}))}),[t,e]);let n=vt(gt.UseNavigation).navigation;return(0,pi.jsx)(pi.Fragment,{children:"idle"!==n.state?(0,pi.jsx)("div",{className:"is-loading",children:"Loading..."}):(0,pi.jsxs)("div",{className:"container",children:[(0,pi.jsx)(Ex,{}),(0,pi.jsx)(_t,{}),(0,pi.jsx)(Ei,{})]})})},children:[{index:!0,element:(0,pi.jsx)(vi,{})},...Sx,{path:"author/:id",Component(){let e=at();return(0,pi.jsx)(pi.Fragment,{children:(0,pi.jsx)(vi,{author:e.id})})}}]}]),kx=document.getElementById("root");Bt.H(kx).render((0,pi.jsx)(o.StrictMode,{children:(0,pi.jsx)(cn,{store:ti,children:(0,pi.jsx)(Lt,{router:Tx})})})),i()})();
//# sourceMappingURL=main.c5dff79a.js.map